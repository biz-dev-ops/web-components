<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>BPMN viewer</title>
    <link rel="stylesheet" href="../theme.css" />
    <link rel="stylesheet" href="../specflow.css" />
    <style>

      bpmn-viewer {
        min-height: 500px;
        max-height: 1000px;
      }
    </style>
  </head>

  <body>
    <main>
      <h1>BPMN viewer</h1>
      <bdo-driver>
        <bdo-button slot="driver" data-action="toggle-fullscreen" title="Toggle Fullscreen">
          <bdo-icon icon="mat-fullscreen"></bdo-icon>
        </bdo-button>
        <bdo-button slot="driver" data-action="zoom-in" title="Zoom In">
          <bdo-icon icon="mat-zoom_in"></bdo-icon>
        </bdo-button>
        <bdo-button slot="driver" data-action="zoom-out" title="Zoom Out">
          <bdo-icon icon="mat-zoom_out"></bdo-icon>
        </bdo-button>
        <bdo-button slot="driver" data-action="zoom-reset" title="Zoom Reset">
          <bdo-icon icon="mat-reset_focus"></bdo-icon>
        </bdo-button>

        <bdo-button slot="driver" data-action="change-src" title="Change src">
          <bdo-icon icon="mat-cycle"></bdo-icon>
        </bdo-button>
        <bdo-button slot="driver" data-action="toggle-simulator" title="Toggle simulator">
          <bdo-icon icon="mat-modeling"></bdo-icon>
        </bdo-button>
        <bdo-button slot="driver" data-action="toggle-interaction" title="Toggle interaction">
          <bdo-icon icon="mat-touch_app"></bdo-icon>
        </bdo-button>

        <bpmn-viewer src="custom-links.bpmn"></bpmn-viewer>
      </bdo-driver>

      <h2>Run tests</h2>
      <code>
        npm run test -- 'bpmn-viewer'
      </code>
    </main>

    <script type="module">
      import "../../src/bpmn-viewer/index.ts";
      import "../../src/shared/driver/index.ts";
      import "../../src/shared/icon/index.ts";
      import "../../src/shared/button/index.ts";

      const driver = document.getElementsByTagName("bdo-driver")[0];
      const viewer = document.getElementsByTagName("bpmn-viewer")[0];

      viewer.addEventListener("onelementclick", (event) => {
        console.dir(event);
      });

      viewer.addEventListener("click", function (event) {
        const target = event.target;

        if (target.getAttribute("data-action") === "change-src") {
          viewer.setAttribute("src", viewer.src.endsWith("custom-links.bpmn") ? "subprocesses.bpmn" : "custom-links.bpmn");
        }
      });
    </script>
  </body>
</html>
