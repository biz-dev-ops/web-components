import{r as is,x as Mr,i as vn,a as oi}from"./lit-element-CPu3RyXn.js";import{n as en,t as rs}from"./property-I-G7jaNi.js";import{r as os}from"./reset.css-DipPbE3d.js";import{d as ce,e as de,c as Z,s as Nn,I as Dr,f as tt,a as rt,b as ge,g as Fr,q as Se,h as Je,r as ss,i as It,j as as,k as ki,l as ne,m as Bn,n as In,B as Nr,t as si,o as pi,p as Ue,u as ls,v as cs,w as ps,x as us,y as q,T as ds,z as ui,A as Br,C as hs,D as jn,E as fs,F as ms,O as Ir,G as bt,H as xt,J as ys,K as gs,L as vs,M as Ln,N as bs,P as Qe,Q as On,R as Qi,S as Es,U as ws,V as _s,W as xs,X as Ss,Y as ks,Z as Cs,_ as er}from"./Diagram-DenZM_b2.js";import{g as As}from"./_commonjsHelpers-D6-XlEtG.js";const Ts='.djs-parent{--color-grey-225-10-15: hsl(225, 10%, 15%);--color-grey-225-10-35: hsl(225, 10%, 35%);--color-grey-225-10-55: hsl(225, 10%, 55%);--color-grey-225-10-75: hsl(225, 10%, 75%);--color-grey-225-10-80: hsl(225, 10%, 80%);--color-grey-225-10-85: hsl(225, 10%, 85%);--color-grey-225-10-90: hsl(225, 10%, 90%);--color-grey-225-10-95: hsl(225, 10%, 95%);--color-grey-225-10-97: hsl(225, 10%, 97%);--color-blue-205-100-45: hsl(205, 100%, 45%);--color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);--color-blue-205-100-50: hsl(205, 100%, 50%);--color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);--color-blue-205-100-70: hsl(205, 100%, 75%);--color-blue-205-100-95: hsl(205, 100%, 95%);--color-green-150-86-44: hsl(150, 86%, 44%);--color-red-360-100-40: hsl(360, 100%, 40%);--color-red-360-100-45: hsl(360, 100%, 45%);--color-red-360-100-92: hsl(360, 100%, 92%);--color-red-360-100-97: hsl(360, 100%, 97%);--color-white: hsl(0, 0%, 100%);--color-black: hsl(0, 0%, 0%);--color-black-opacity-10: hsla(0, 0%, 0%, 10%);--color-black-opacity-30: hsla(0, 0%, 0%, 30%);--canvas-fill-color: var(--color-white);--bendpoint-fill-color: var(--color-blue-205-100-45);--bendpoint-stroke-color: var(--canvas-fill-color);--context-pad-entry-background-color: var(--color-white);--context-pad-entry-hover-background-color: var(--color-grey-225-10-95);--element-dragger-color: var(--color-blue-205-100-50);--element-hover-outline-fill-color: var(--color-blue-205-100-45);--element-selected-outline-stroke-color: var(--color-blue-205-100-50);--element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);--lasso-fill-color: var(--color-blue-205-100-50-opacity-15);--lasso-stroke-color: var(--element-selected-outline-stroke-color);--palette-entry-color: var(--color-grey-225-10-15);--palette-entry-hover-color: var(--color-blue-205-100-45);--palette-entry-selected-color: var(--color-blue-205-100-50);--palette-separator-color: var(--color-grey-225-10-75);--palette-toggle-hover-background-color: var(--color-grey-225-10-55);--palette-background-color: var(--color-grey-225-10-97);--palette-border-color: var(--color-grey-225-10-75);--popup-font-family: "IBM Plex Sans", sans-serif;--popup-font-size: 14px;--popup-header-entry-selected-color: var(--color-blue-205-100-50);--popup-header-font-weight: bolder;--popup-header-group-divider-color: var(--color-grey-225-10-75);--popup-background-color: var(--color-white);--popup-border-color: transparent;--popup-shadow-color: var(--color-black-opacity-30);--popup-description-color: var(--color-grey-225-10-55);--popup-no-results-color: var(--color-grey-225-10-55);--popup-entry-title-color: var(--color-grey-225-10-55);--popup-entry-hover-color: var(--color-grey-225-10-95);--popup-search-border-color: var(--color-grey-225-10-75);--popup-search-focus-border-color: var(--color-blue-205-100-50);--popup-search-focus-background-color: var(--color-blue-205-100-95);--resizer-fill-color: var(--color-blue-205-100-45);--resizer-stroke-color: var(--canvas-fill-color);--search-font-family: "IBM Plex Sans", sans-serif;--search-font-size: 14px;--search-container-background-color: var(--color-white);--search-shadow-color: var(--color-black-opacity-30);--search-input-border-color: var(--color-grey-225-10-75);--search-input-focus-border-color: var(--color-blue-205-100-50);--search-input-focus-background-color: var(--color-blue-205-100-95);--search-result-hover-background-color: var(--color-grey-225-10-95);--search-result-secondary-color: var(--color-grey-225-10-55);--search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);--shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);--shape-connect-allowed-fill-color: var(--color-grey-225-10-97);--shape-drop-allowed-fill-color: var(--color-grey-225-10-97);--shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);--shape-resize-preview-stroke-color: var(--color-blue-205-100-50);--snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);--space-tool-crosshair-stroke-color: var(--color-black);--tooltip-error-background-color: var(--color-red-360-100-97);--tooltip-error-border-color: var(--color-red-360-100-45);--tooltip-error-color: var(--color-red-360-100-45)}.djs-container svg.drop-not-ok{background:var(--shape-drop-not-allowed-fill-color)!important}.djs-container svg.new-parent{background:var(--shape-drop-allowed-fill-color)!important}.djs-outline,.djs-selection-outline{fill:none;shape-rendering:geometricPrecision;stroke-width:2px}.djs-outline{visibility:hidden}.djs-selection-outline{stroke:var(--element-selected-outline-stroke-color)}.djs-element.selected .djs-outline{visibility:visible;stroke:var(--element-selected-outline-stroke-color)}.djs-connection.selected .djs-outline{display:none}.djs-multi-select .djs-element.selected .djs-outline{stroke:var(--element-selected-outline-secondary-stroke-color);display:block}.djs-shape.connect-ok .djs-visual>:nth-child(1){fill:var(--shape-connect-allowed-fill-color)!important}.djs-shape.connect-not-ok .djs-visual>:nth-child(1),.djs-shape.drop-not-ok .djs-visual>:nth-child(1){fill:var(--shape-drop-not-allowed-fill-color)!important}.djs-shape.new-parent .djs-visual>:nth-child(1){fill:var(--shape-drop-allowed-fill-color)!important}.drop-not-ok,.connect-not-ok,.drop-not-ok *,.connect-not-ok *{cursor:not-allowed!important}.drop-ok,.connect-ok,.drop-ok *,.connect-ok *{cursor:default!important}.djs-element.attach-ok .djs-visual>:nth-child(1){stroke-width:5px!important;stroke:var(--shape-attach-allowed-stroke-color)!important}.djs-frame.connect-not-ok .djs-visual>:nth-child(1),.djs-frame.drop-not-ok .djs-visual>:nth-child(1){stroke-width:3px!important;stroke:var(--shape-drop-not-allowed-fill-color)!important;fill:none!important}.djs-lasso-overlay{fill:var(--lasso-fill-color);stroke:var(--lasso-stroke-color);stroke-width:2px;shape-rendering:geometricPrecision;pointer-events:none}.djs-resize-overlay{fill:none;stroke-dasharray:5 1 3 1;stroke:var(--shape-resize-preview-stroke-color);pointer-events:none}.djs-resizer-hit{fill:none;pointer-events:all}.djs-resizer-visual{fill:var(--resizer-fill-color);stroke-width:1px;stroke:var(--resizer-stroke-color);shape-rendering:geometricPrecision}.djs-resizer:hover .djs-resizer-visual{stroke:var(--resizer-stroke-color);stroke-opacity:1}.djs-cursor-resize-ns,.djs-resizer-n,.djs-resizer-s{cursor:ns-resize}.djs-cursor-resize-ew,.djs-resizer-e,.djs-resizer-w{cursor:ew-resize}.djs-cursor-resize-nwse,.djs-resizer-nw,.djs-resizer-se{cursor:nwse-resize}.djs-cursor-resize-nesw,.djs-resizer-ne,.djs-resizer-sw{cursor:nesw-resize}.djs-shape.djs-resizing>.djs-outline{visibility:hidden!important}.djs-shape.djs-resizing>.djs-resizer{visibility:hidden}.djs-dragger>.djs-resizer{visibility:hidden}.djs-dragger *{fill:none!important;stroke:var(--element-dragger-color)!important}.djs-dragger tspan,.djs-dragger text{fill:var(--element-dragger-color)!important;stroke:none!important}.djs-dragger marker circle,.djs-dragger marker path,.djs-dragger marker polygon,.djs-dragger marker polyline,.djs-dragger marker rect{fill:var(--element-dragger-color)!important;stroke:none!important}.djs-dragger marker text,.djs-dragger marker tspan{fill:none!important;stroke:var(--element-dragger-color)!important}.djs-dragging,.djs-dragging>*{opacity:.3!important;pointer-events:none!important}.djs-visual,.djs-outline{pointer-events:none}.djs-element.attach-ok .djs-hit{stroke-width:60px!important}.djs-element>.djs-hit-all,.djs-element>.djs-hit-no-move{pointer-events:all}.djs-element>.djs-hit-stroke,.djs-element>.djs-hit-click-stroke{pointer-events:stroke}.djs-connection .djs-visual{stroke-width:2px;fill:none}.djs-cursor-grab{cursor:grab}.djs-cursor-grabbing{cursor:grabbing}.djs-cursor-crosshair{cursor:crosshair}.djs-cursor-move{cursor:move}.djs-cursor-resize-ns{cursor:ns-resize}.djs-cursor-resize-ew{cursor:ew-resize}.djs-snap-line{stroke:var(--snap-line-stroke-color);stroke-linecap:round;stroke-width:2px;pointer-events:none}.djs-crosshair{stroke:var(--space-tool-crosshair-stroke-color);stroke-linecap:round;stroke-width:1px;pointer-events:none;shape-rendering:geometricPrecision;stroke-dasharray:5,5}.djs-palette{position:absolute;left:20px;top:20px;box-sizing:border-box;width:48px}.djs-palette .separator{margin:5px;padding-top:5px;border:none;border-bottom:solid 1px var(--palette-separator-color);clear:both}.djs-palette .entry:before{vertical-align:initial}.djs-palette .djs-palette-toggle{cursor:pointer}.djs-palette .entry,.djs-palette .djs-palette-toggle{color:var(--palette-entry-color);font-size:30px;text-align:center}.djs-palette .entry{float:left}.djs-palette .entry img{max-width:100%}.djs-palette .djs-palette-entries:after{content:"";display:table;clear:both}.djs-palette .djs-palette-toggle:hover{background:var(--palette-toggle-hover-background-color)}.djs-palette .entry:hover{color:var(--palette-entry-hover-color)}.djs-palette .highlighted-entry{color:var(--palette-entry-selected-color)!important}.djs-palette .entry,.djs-palette .djs-palette-toggle{width:46px;height:46px;line-height:46px;cursor:default}.djs-palette.two-column.open{width:94px}.djs-palette:not(.open) .djs-palette-entries{display:none}.djs-palette:not(.open){overflow:hidden}.djs-palette.open .djs-palette-toggle{display:none}.djs-context-pad{position:absolute;display:none;pointer-events:none;line-height:1;width:72px;z-index:100}.djs-context-pad .entry{width:22px;height:22px;text-align:center;display:inline-block;font-size:22px;margin:0 2px 2px 0;border-radius:3px;cursor:default;background-color:var(--context-pad-entry-background-color);box-shadow:0 0 2px 1px var(--context-pad-entry-background-color);pointer-events:all;vertical-align:middle}.djs-context-pad .entry:hover{background:var(--context-pad-entry-hover-background-color)}.djs-context-pad.open{display:block}.djs-popup{line-height:1;box-sizing:border-box;width:-moz-min-content;width:min-content;background:var(--popup-background-color);overflow:hidden;position:fixed;z-index:200;box-shadow:0 2px 6px var(--popup-shadow-color);border:solid 1px var(--popup-border-color);min-width:120px;outline:none;font-size:var(--popup-font-size);font-family:var(--popup-font-family)}.djs-popup-search input{width:100%;box-sizing:border-box;font-size:var(--popup-font-size);padding:3px 6px 3px 28px;border-radius:2px;border:solid 1px var(--popup-search-border-color);line-height:21px}.djs-popup-search input:focus{background-color:var(--popup-search-focus-background-color);border:solid 1px var(--popup-search-focus-border-color);outline:none}.djs-popup-header{display:flex;align-items:stretch;line-height:20px;margin:10px 12px}.djs-popup-header .entry{border-radius:2px}.djs-popup button.entry{padding:0;background:transparent;border:0}.djs-popup-header .entry.active{color:var(--popup-header-entry-selected-color)}.djs-popup-header .entry.disabled{color:inherit}.djs-popup-header-group{display:flex;flex-direction:row;align-items:center;list-style:none;margin:0;padding:0}.djs-popup-header-group .entry{display:flex;flex-direction:row;align-items:center}.djs-popup-header-group+.djs-popup-header-group:before{content:"";width:1px;height:20px;background:var(--popup-header-group-divider-color);margin:0 5px}.djs-popup-search{position:relative;width:auto;margin:10px 12px}.djs-popup-title{font-size:var(--popup-font-size);font-weight:var(--popup-header-font-weight);flex:1;margin:0}.djs-popup-search-icon{position:absolute;left:8px;top:7px}.djs-popup-results{margin:7px 3px 7px 12px;list-style:none;max-height:280px;overflow:auto;padding-right:9px}.djs-popup-group{margin:0;padding:0;width:100%}.djs-popup-body .entry,.djs-popup-body .entry-header{padding:5px 7px;cursor:default;border-radius:4px}.djs-popup-body .entry-header{font-weight:var(--popup-header-font-weight);color:var(--popup-entry-title-color);padding-left:0}.djs-popup [class*=icon] .djs-popup-label,.djs-popup-label:not(:first-child){margin-left:.5em}.djs-popup [class*=icon]:before,.djs-popup-entry-icon{width:1em;height:1em;display:inline-block;font-size:1.4em;vertical-align:middle}.djs-popup-body .entry-header:not(:first-child){margin-top:8px;margin-bottom:2px}.djs-popup-body .entry{display:flex;flex-direction:row;align-items:stretch;height:-moz-min-content;height:min-content}.djs-popup .entry.selected{background-color:var(--popup-entry-hover-color)}.djs-popup-body .entry:not(:first-child){margin-top:2px}.djs-popup-entry-content{display:flex;flex-direction:column;flex:1;overflow:hidden}.djs-popup-entry-description{color:var(--popup-description-color)}.djs-popup-label,.djs-popup-entry-description{line-height:1.4em}.djs-popup .entry,.djs-popup .entry-header{margin:1px}.djs-popup-title,.djs-popup-label,.djs-popup-entry-description,.djs-popup .entry-header{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.djs-popup-entry-name{display:flex}.djs-popup-body{flex-direction:column;width:auto}.djs-popup *::-webkit-scrollbar{width:6px}.djs-popup *::-webkit-scrollbar-thumb{border-radius:3px;background-color:#0003}.djs-popup *::-webkit-scrollbar-track{box-shadow:none;background:transparent;margin:0;padding:5px}.djs-popup-no-results{padding:0 12px 12px;color:var(--popup-no-results-color)}.djs-popup-entry-docs{flex:0;flex-direction:row;align-items:center;padding-left:5px;display:none}.djs-popup-body .entry:hover .djs-popup-entry-docs{display:flex}.djs-popup-entry-docs svg{vertical-align:middle;margin:auto 2px auto 5px}.djs-palette{background:var(--palette-background-color);border:solid 1px var(--palette-border-color);border-radius:2px}.djs-segment-dragger,.djs-bendpoint{display:none}.djs-segment-dragger .djs-visual{display:none;fill:var(--bendpoint-fill-color);stroke:var(--bendpoint-stroke-color);stroke-width:1px;stroke-opacity:1}.djs-segment-dragger:hover .djs-visual{display:block}.djs-bendpoint .djs-visual{fill:var(--bendpoint-fill-color);stroke:var(--bendpoint-stroke-color);stroke-width:1px}.djs-segment-dragger:hover,.djs-bendpoints.hover .djs-segment-dragger,.djs-bendpoints.selected .djs-segment-dragger,.djs-bendpoint:hover,.djs-bendpoints.hover .djs-bendpoint,.djs-bendpoints.selected .djs-bendpoint{display:block}.djs-drag-active .djs-bendpoints *{display:none}.djs-bendpoints:not(.hover) .floating{display:none}.djs-segment-dragger:hover .djs-visual,.djs-segment-dragger.djs-dragging .djs-visual,.djs-bendpoint:hover .djs-visual,.djs-bendpoint.floating .djs-visual{fill:var(--bendpoint-fill-color);stroke:var(--bendpoint-stroke-color);stroke-opacity:1}.djs-bendpoint.floating .djs-hit{pointer-events:none}.djs-segment-dragger .djs-hit,.djs-bendpoint .djs-hit{fill:none;pointer-events:all}.djs-segment-dragger.horizontal .djs-hit{cursor:ns-resize}.djs-segment-dragger.vertical .djs-hit{cursor:ew-resize}.djs-segment-dragger.djs-dragging .djs-hit{pointer-events:none}.djs-updating,.djs-updating>*{pointer-events:none!important}.djs-updating .djs-context-pad,.djs-updating .djs-outline,.djs-updating .djs-bendpoint,.djs-multi-select .djs-bendpoint,.djs-multi-select .djs-segment-dragger,.connect-ok .djs-bendpoint,.connect-not-ok .djs-bendpoint,.drop-ok .djs-bendpoint,.drop-not-ok .djs-bendpoint{display:none!important}.djs-segment-dragger.djs-dragging,.djs-bendpoint.djs-dragging{display:block;opacity:1}.djs-tooltip-error{width:160px;padding:6px;background:var(--tooltip-error-background-color);border:solid 1px var(--tooltip-error-border-color);border-radius:2px;color:var(--tooltip-error-color);font-size:12px;line-height:16px;opacity:.75}.djs-tooltip-error:hover{opacity:1}.djs-search-open .djs-context-pad{display:none}.djs-search-open .djs-connection.selected .djs-outline{display:block}.djs-search-container{position:absolute;top:20px;left:0;right:0;margin-left:auto;margin-right:auto;width:25%;min-width:300px;max-width:400px;z-index:10;font-family:var(--search-font-family);font-size:var(--search-font-size);border-radius:2px;box-shadow:0 2px 6px var(--search-shadow-color)}.djs-search-container:not(.open){display:none}.djs-search-input{position:relative}.djs-search-input svg{position:absolute;left:8px;top:7px}.djs-search-input input{font-size:var(--search-font-size);width:100%;padding:3px 6px 3px 28px;border:1px solid var(--search-input-border-color);border-radius:2px;box-sizing:border-box;line-height:21px}.djs-search-input input:focus{background-color:var(--search-input-focus-background-color);border:solid 1px var(--search-input-focus-border-color);outline:none}.djs-search-results{position:relative;overflow-y:auto;max-height:200px;background:var(--search-container-background-color)}.djs-search-result{padding:6px 8px}.djs-search-result-primary{margin:0 0 3px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.djs-search-result-secondary{font-family:monospace;margin:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;color:var(--search-result-secondary-color)}.djs-search-result:hover,.djs-search-result-selected,.djs-search-result-selected:hover{background:var(--search-result-hover-background-color)}.djs-search-open .djs-element .djs-outline{fill:var(--search-preselected-background-color)!important}.djs-element-hidden,.djs-element-hidden .djs-hit,.djs-element-hidden .djs-outline,.djs-label-hidden .djs-label{display:none!important}.djs-element .djs-hit-stroke,.djs-element .djs-hit-click-stroke,.djs-element .djs-hit-all{cursor:move}',Rs=`.bjs-container{--bjs-font-family: Arial, sans-serif;--color-grey-225-10-15: hsl(225, 10%, 15%);--color-grey-225-10-35: hsl(225, 10%, 35%);--color-grey-225-10-55: hsl(225, 10%, 55%);--color-grey-225-10-75: hsl(225, 10%, 75%);--color-grey-225-10-80: hsl(225, 10%, 80%);--color-grey-225-10-85: hsl(225, 10%, 85%);--color-grey-225-10-90: hsl(225, 10%, 90%);--color-grey-225-10-95: hsl(225, 10%, 95%);--color-grey-225-10-97: hsl(225, 10%, 97%);--color-blue-205-100-45: hsl(205, 100%, 45%);--color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);--color-blue-205-100-50: hsl(205, 100%, 50%);--color-blue-205-100-95: hsl(205, 100%, 95%);--color-green-150-86-44: hsl(150, 86%, 44%);--color-red-360-100-40: hsl(360, 100%, 40%);--color-red-360-100-45: hsl(360, 100%, 45%);--color-red-360-100-92: hsl(360, 100%, 92%);--color-red-360-100-97: hsl(360, 100%, 97%);--color-white: hsl(0, 0%, 100%);--color-black: hsl(0, 0%, 0%);--color-black-opacity-05: hsla(0, 0%, 0%, 5%);--color-black-opacity-10: hsla(0, 0%, 0%, 10%);--breadcrumbs-font-family: var(--bjs-font-family);--breadcrumbs-item-color: var(--color-blue-205-100-50);--breadcrumbs-arrow-color: var(--color-black);--drilldown-fill-color: var(--color-white);--drilldown-background-color: var(--color-blue-205-100-50)}.bjs-breadcrumbs{position:absolute;display:none;flex-wrap:wrap;align-items:center;top:30px;left:30px;padding:0;margin:0;font-family:var(--breadcrumbs-font-family);font-size:16px;line-height:normal}.bjs-breadcrumbs-shown .bjs-breadcrumbs{display:flex}.djs-palette-shown .bjs-breadcrumbs{left:90px}.djs-palette-shown.djs-palette-two-column .bjs-breadcrumbs{left:140px}.bjs-breadcrumbs li{display:inline-flex;padding-bottom:5px;align-items:center}.bjs-breadcrumbs li a{cursor:pointer;color:var(--breadcrumbs-item-color)}.bjs-breadcrumbs li:last-of-type a{color:inherit;cursor:default}.bjs-breadcrumbs li:not(:first-child):before{content:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /><path d="M0 0h24v24H0z" fill="none" /></svg>');padding:0 8px;color:var(--breadcrumbs-arrow-color);height:1em}.bjs-breadcrumbs .bjs-crumb{display:inline-block;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bjs-drilldown{width:20px;height:20px;padding:0;margin-left:-20px;cursor:pointer;border:none;border-radius:2px;outline:none;fill:var(--drilldown-fill-color);background-color:var(--drilldown-background-color)}.bjs-drilldown-empty{display:none}.selected .bjs-drilldown-empty{display:inherit}[data-popup=align-elements] .djs-popup-results{display:flex}[data-popup=align-elements] .djs-popup-body [data-group]+[data-group]{border-left:1px solid var(--popup-border-color)}[data-popup=align-elements] [data-group=align]{display:grid;grid-template-columns:repeat(3,1fr)}[data-popup=align-elements] .djs-popup-body .entry{padding:6px 8px}[data-popup=align-elements] .djs-popup-body .entry:not(:first-child){margin-top:0}[data-popup=align-elements] .djs-popup-entry-icon{display:block;margin:0;height:20px;width:20px}`,Ps=':root{--token-simulation-green-base-44: #10D070;--token-simulation-grey-base-40: #666666;--token-simulation-grey-darken-30: #212121;--token-simulation-grey-lighten-56: #909090;--token-simulation-red-base-62: #FF3D3D;--token-simulation-silver-base-97: #F8F8F8;--token-simulation-silver-darken-94: #EFEFEF;--token-simulation-white: #FFFFFF}.bjs-breadcrumbs{top:60px;left:50px}.bjs-container.simulation .djs-container{box-shadow:inset 0 0 0 4px var(--token-simulation-green-base-44, #10D070)}.bjs-container.simulation.paused .djs-container{box-shadow:inset 0 0 0 4px var(--token-simulation-grey-base-40, #666666)}.bjs-container.simulation.warning .djs-container{box-shadow:inset 0 0 0 4px var(--token-simulation-red-base-62, #FF3D3D)!important}.bts-context-pad{cursor:pointer;background-color:var(--token-simulation-grey-lighten-56, #909090);border-radius:2px;margin:0;font-size:16px;color:var(--token-simulation-grey-darken-30, #212121);opacity:.5;transition:all .1s ease-in-out;width:30px;height:30px;display:flex;justify-content:center;align-items:center;box-sizing:border-box}.bts-context-pad:not(.disabled):hover{background-color:var(--token-simulation-green-base-44, #10D070);opacity:1;color:var(--token-simulation-white, #FFFFFF)}.djs-overlays:not(.hover) .bts-context-pad:not(:hover).show-hover,.bts-context-pad:not(:hover) .show-hover,.bts-context-pad:hover .hide-hover{display:none}.bts-context-pad.disabled{background-color:var(--token-simulation-silver-darken-94, #EFEFEF);color:var(--token-simulation-grey-base-40, #666666);pointer-events:none}.bts-context-pad.hidden{display:none}.bts-context-pad [class^=bpmn-icon-]:before,.bts-context-pad [class*=" bpmn-icon-"]:before{margin:0}.bts-token .text{font-family:Arial,sans-serif}.bts-token-count-parent{white-space:nowrap}.bts-token-count{background-color:#fafafa;border-radius:100%;width:25px;height:25px;line-height:25px;text-align:center;font-size:14px;color:var(--token-simulation-grey-darken-30, #212121);-webkit-user-select:none;-moz-user-select:none;user-select:none;animation:bts-jump 1s infinite;animation-timing-function:ease;position:relative;top:0;display:inline-block}.bts-token-count.inactive{display:none}.bts-token-count+.bts-token-count{margin-left:-8px}.bts-token-count.waiting{color:var(--token-simulation-white, #FFFFFF);font-family:Arial,sans-serif;background-color:var(--token-simulation-green-base-44, #10D070)}@keyframes bts-jump{50%{top:5px}}.bts-notifications{position:absolute;bottom:20px;left:20px}.bts-notifications .bts-notification{background-color:var(--token-simulation-silver-darken-94, #EFEFEF);border-radius:2px;padding:5px 8px;font-size:16px;color:var(--token-simulation-silver-darken-94, #EFEFEF);-webkit-user-select:none;-moz-user-select:none;user-select:none;margin-top:4px;min-width:300px;max-width:400px;display:flex;justify-content:center;align-items:stretch}.bts-notifications .bts-notification.info{background-color:var(--token-simulation-silver-darken-94, #EFEFEF);color:#000}.bts-notifications .bts-notification.success{background-color:var(--token-simulation-green-base-44, #10D070);color:var(--token-simulation-white, #FFFFFF)}.bts-notifications .bts-notification.warning{background-color:var(--token-simulation-red-base-62, #FF3D3D);color:var(--token-simulation-white, #FFFFFF)}.bts-notifications .bts-notification>*{flex:initial}.bts-notifications .bts-notification>:not(:last-child){margin-right:6px}.bts-notifications .bts-notification>.bts-icon{min-width:20px;text-align:center}.bts-notifications .bts-notification>.bts-text{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bts-notifications .bts-notification>.bts-scope{font-family:monospace;font-size:.8em;padding:2px 3px;border-radius:3px;cursor:default}.bts-notifications .bts-notification>.bts-icon [class^=bpmn-icon-]:before,.bts-notifications .bts-notification>.bts-icon [class*=" bpmn-icon-"]:before{margin:0}.bjs-container.paused .bts-play-pause.active{color:var(--token-simulation-silver-darken-94, #EFEFEF);background-color:var(--token-simulation-silver-darken-94, #EFEFEF)}.bts-element-notification{background-color:var(--token-simulation-silver-darken-94, #EFEFEF);color:var(--token-simulation-silver-darken-94, #EFEFEF);border-radius:2px;height:30px;box-sizing:border-box;display:flex;justify-content:center;align-items:center;padding:0 6px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.bts-element-notification .bts-text{margin:0 3px}.bts-element-notification .bts-text{white-space:nowrap}.bts-element-notification.success{background-color:var(--token-simulation-green-base-44, #10D070);color:var(--token-simulation-white, #FFFFFF)}.bts-element-notification.warning{background-color:var(--token-simulation-red-base-62, #FF3D3D);color:var(--token-simulation-white, #FFFFFF)}.bts-toggle-mode{cursor:pointer;position:absolute;top:20px;left:20px;background-color:var(--token-simulation-silver-darken-94, #EFEFEF);border-radius:2px;padding:6px;font-size:16px;color:var(--token-simulation-grey-darken-30, #212121);-webkit-user-select:none;-moz-user-select:none;user-select:none;display:inline-flex}.bts-toggle-mode .bts-toggle{margin-left:.25em;display:inline-flex}.bjs-container.simulation .bts-toggle-mode,.bts-toggle-mode:hover{background-color:var(--token-simulation-green-base-44, #10D070);color:var(--token-simulation-white, #FFFFFF)}.bjs-container .djs-palette{top:60px}.bjs-container.simulation .djs-bendpoint,.bjs-container.simulation .djs-context-pad,.bjs-container.simulation .djs-outline,.bjs-container.simulation .djs-palette,.bjs-container.simulation .djs-resizer,.bjs-container.simulation .djs-segment-dragger{display:none!important}.bjs-container.simulation .djs-overlay:not(.djs-overlay-bts-context-menu,.djs-overlay-bts-element-notification,.djs-overlay-bts-token-count,.djs-overlay-drilldown){display:none!important}.bts-palette{position:absolute;top:60px;left:20px}.bts-palette.hidden{display:none}.bts-palette .bts-entry{cursor:pointer;background-color:var(--token-simulation-silver-darken-94, #EFEFEF);border-radius:2px;padding:6px 0;margin-bottom:6px;font-size:16px;color:var(--token-simulation-grey-darken-30, #212121);-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;justify-content:center;align-items:center;width:30px;box-sizing:border-box;transition:all .1s ease}.bts-palette .bts-entry:last-child{margin-bottom:0}.bts-palette .bts-entry:not(.disabled):hover{color:var(--token-simulation-white, #FFFFFF);background-color:var(--token-simulation-green-base-44, #10D070)}.bts-palette .bts-entry.active{color:var(--token-simulation-white, #FFFFFF);background-color:var(--token-simulation-green-base-44, #10D070)}.bts-palette .bts-entry.disabled{pointer-events:none;color:var(--token-simulation-grey-base-40, #666666)}.bts-log{position:absolute;top:30%;right:20px;bottom:50px;width:300px;background-color:var(--token-simulation-silver-darken-94, #EFEFEF);border-radius:2px;z-index:10000;overflow:hidden;display:flex;flex-direction:column}.bts-log.hidden{display:none}.bts-log .bts-header{background-color:var(--token-simulation-green-base-44, #10D070);padding:6px 8px;color:var(--token-simulation-white, #FFFFFF);height:30px;box-sizing:border-box;font-size:16px;flex:0;display:flex;justify-content:space-between}.bts-log .bts-close{background:none;border:none;cursor:pointer;color:var(--token-simulation-white, #FFFFFF)}.bts-log .bts-log-icon{cursor:pointer}.bts-log .bts-content{overflow-y:auto;box-sizing:border-box;flex:1;margin:7px 3px 7px 12px;padding:5px 9px 5px 0}.bts-log *::-webkit-scrollbar{width:6px}.bts-log *::-webkit-scrollbar-thumb{border-radius:3px;background-color:#0003}.bts-log *::-webkit-scrollbar-track{box-shadow:none;background:transparent;margin:0;padding:5px}.bts-log .bts-entry{font-size:16px;margin:0 0 6px;padding:6px;background:var(--token-simulation-white, #FFFFFF);border-radius:2px;display:flex;align-items:stretch;justify-content:center}.bts-log .bts-entry.inactive{opacity:.5}.bts-log .bts-entry.success{background-color:var(--token-simulation-green-base-44, #10D070);color:var(--token-simulation-white, #FFFFFF)}.bts-log .bts-entry.warning{background-color:var(--token-simulation-red-base-62, #FF3D3D);color:var(--token-simulation-white, #FFFFFF)}.bts-log .bts-entry:last-child{margin:0}.bts-log .bts-entry>*{flex:initial}.bts-log .bts-entry>:not(:last-child){margin-right:6px}.bts-log .bts-entry>.bts-icon{min-width:20px;text-align:center}.bts-log .bts-entry>.bts-scope{font-family:monospace;font-size:.8em;padding:2px 3px;border-radius:3px;cursor:default}.bts-log .bts-entry>.bts-text{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bts-log .bts-entry.placeholder.hidden{display:none}.bts-scopes{position:absolute;top:22px;left:190px;display:flex;flex-direction:row}.bts-scopes.hidden{display:none}.bts-scopes .bts-scope{border-radius:100%;width:25px;height:25px;font-size:14px;line-height:25px;text-align:center;background-color:var(--token-simulation-silver-darken-94, #EFEFEF);margin-right:10px;cursor:pointer;outline:none}.bts-scopes .bts-scope.inactive:hover{opacity:1}.bts-scopes .bts-scope.inactive{opacity:.25}.bts-scopes .bts-scope.focussed{outline-offset:2px;outline-width:2px;outline-style:solid}.djs-container.highlight{background-color:var(--token-simulation-silver-base-97, #F8F8F8)}.bts-set-animation-speed{position:absolute;bottom:20px;left:50%;transform:translate(-50%);font-size:16px;text-align:center;background-color:var(--token-simulation-silver-darken-94, #EFEFEF);border-radius:2px;display:flex;flex-direction:row;align-items:center;padding-left:6px;overflow:hidden}.bts-set-animation-speed.hidden{display:none}.bts-set-animation-speed .bts-animation-speed-buttons{display:flex;flex-direction:row;margin-left:6px}.bts-set-animation-speed .bts-animation-speed-button{padding:10px 0;width:30px;display:inline-flex;justify-content:center;border:none}.bts-set-animation-speed .bts-animation-speed-button.active,.bts-set-animation-speed .bts-animation-speed-button:hover{background-color:var(--token-simulation-green-base-44, #10D070);color:var(--token-simulation-white, #FFFFFF)}.bts-icon{display:inline-flex;align-items:center;justify-content:center}.bts-icon>svg{height:1em}',be="tokenSimulation.toggleMode",jr="tokenSimulation.playSimulation",Lr="tokenSimulation.pauseSimulation",Ye="tokenSimulation.resetSimulation",Ms="tokenSimulation.animationCreated",Or="tokenSimulation.animationSpeedChanged",$r="tokenSimulation.simulator.elementChanged",tn="tokenSimulation.simulator.destroyScope",Ds="tokenSimulation.simulator.scopeChanged",St="tokenSimulation.simulator.createScope",Ot="tokenSimulation.scopeFilterChanged",zr="tokenSimulation.simulator.trace";var Fs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"/></svg>',Ns='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg>',Bs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg>',Is='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>',js='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>',Ls='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"/></svg>',Os='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"/></svg>',$s=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 580.5 448">
  <path fill="currentColor" d="M112 0C85 0 64 22 64 48v196l192-89V48c0-26-22-48-48-48zm256 0c-27 0-48 22-48 48v77l190-89c-5-21-24-36-46-36Zm144 105-192 89v70l192-89zM256 224 64 314v70l192-90zm256 21-192 89v66c0 27 21 48 48 48h96c26 0 48-21 48-48zM256 364 89 442c7 4 14 6 23 6h96c26 0 48-21 48-48z"/>
  <rect fill="currentColor" width="63.3" height="618.2" x="311.5" y="-469.4" transform="rotate(65)" rx="10"/>
</svg>
`,zs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Adapted from Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"/></svg>',Hs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"/></svg>',Vs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"/></svg>',Ws='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',Us='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',Gs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"/></svg>',Ys='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"/></svg>';function ke(e){return function(n=""){return`<span class="bts-icon ${n}">${e}</span>`}}const tr=ke(Fs),Ks=ke(Ns),di=ke(Bs),qs=ke($s),Hr=ke(Is),Vr=ke(js),Wr=ke(Ls),hi=ke(Os),Ur=ke(zs),Xs=ke(Hs),Zs=ke(Vs),Js=ke(Ws),Qs=ke(Us),Gr=ke(Gs),ea=ke(Ys);function $n(e,t,n){this._eventBus=e,this._canvas=t,this._active=!1,e.on("diagram.init",()=>{this._canvasParent=this._canvas.getContainer().parentNode,this._init()}),e.on("import.parse.start",()=>{this._active&&(this.toggleMode(!1),e.once("import.done",()=>{this.toggleMode(!0)}))})}$n.prototype._init=function(){this._container=ce(`
    <div class="bts-toggle-mode">
      Token Simulation <span class="bts-toggle">${Gr()}</span>
    </div>
  `),de.bind(this._container,"click",()=>this.toggleMode()),this._canvas.getContainer().appendChild(this._container)};$n.prototype.toggleMode=function(e=!this._active){e!==this._active&&(e?(this._container.innerHTML=`Token Simulation <span class="bts-toggle">${ea()}</span>`,Z(this._canvasParent).add("simulation")):(this._container.innerHTML=`Token Simulation <span class="bts-toggle">${Gr()}</span>`,Z(this._canvasParent).remove("simulation")),this._eventBus.fire(be,{active:e}),this._active=e)};$n.$inject=["eventBus","canvas"];const ta={__init__:["toggleMode"],toggleMode:["type",$n]},Ci=1,Yr=2,Kr=4,qr=8,na=16,ia=32,ra=64,oa=128,sa=256,aa=512,la=Ci|Yr|Kr,ca=Ci|qr,W=Object.freeze({ACTIVATED:Ci,RUNNING:Yr,ENDING:Kr,ENDED:qr,DESTROYED:na,FAILED:ia,TERMINATED:ra,CANCELED:oa,COMPLETED:sa,COMPENSABLE:aa,ACTIVE:la,NOT_DEAD:ca}),nn={};function ht(e,t){throw new Error(`illegal transition: ${e.name} -> ${t}`)}function ft(e,t){return e===nn?t:e}class Pe{constructor(t,n,i={}){this.name=t,this.traits=n,this.setTransitions(i)}setTransitions({start:t,cancel:n,complete:i,destroy:o,fail:a,terminate:l,compensable:c}){this._start=ft(t,this),this._compensable=ft(c,this),this._cancel=ft(n,this),this._complete=ft(i,this),this._destroy=ft(o,this),this._fail=ft(a,this),this._terminate=ft(l,this)}hasTrait(t){return(this.traits&t)!==0}complete(){return this._complete||ht(this,"complete")}destroy(){return this._destroy||ht(this,"destroy")}cancel(){return this._cancel||ht(this,"cancel")}fail(){return this._fail||ht(this,"fail")}terminate(){return this._terminate||ht(this,"terminate")}compensable(){return this._compensable||ht(this,"compensable")}start(){return this._start||ht(this,"start")}}const zn=new Pe("failed",W.DESTROYED|W.FAILED),Hn=new Pe("terminated",W.DESTROYED|W.TERMINATED|W.COMPLETED),Ai=new Pe("completed",W.DESTROYED|W.COMPLETED),ot=new Pe("terminating",W.ENDING|W.TERMINATED|W.COMPLETED,{destroy:Hn}),$t=new Pe("canceling",W.ENDING|W.FAILED|W.CANCELED,{destroy:zn,complete:nn,terminate:ot}),Ti=new Pe("completing",W.ENDING|W.COMPLETED,{destroy:Ai,cancel:$t,terminate:ot}),Xr=new Pe("failing",W.ENDING|W.FAILED,{cancel:$t,complete:Ti,destroy:zn,terminate:ot}),Ri=new Pe("compensable:completed",W.ENDED|W.COMPLETED),Zr=new Pe("compensable:completing",W.ENDING|W.COMPLETED,{destroy:Ri,terminate:ot,compensable:nn}),Jr=new Pe("compensable:failing",W.ENDING|W.FAILED,{complete:Zr,terminate:ot,destroy:zn});Ri.setTransitions({cancel:$t,fail:Jr,destroy:Ai,compensable:nn});const pa=new Pe("compensable:running",W.RUNNING|W.COMPENSABLE,{cancel:$t,complete:Zr,compensable:nn,destroy:Ri,fail:Jr,terminate:ot}),Qr=new Pe("running",W.RUNNING,{cancel:$t,complete:Ti,compensable:pa,destroy:Hn,fail:Xr,terminate:ot}),ua=new Pe("activated",W.ACTIVATED,{start:Qr,destroy:Hn}),da=Object.freeze({ACTIVATED:ua,RUNNING:Qr,CANCELING:$t,COMPLETING:Ti,COMPLETED:Ai,FAILING:Xr,FAILED:zn,TERMINATING:ot,TERMINATED:Hn});class ha{constructor(t,n,i=null,o=null){this.id=t,this.element=n,this.parent=i,this.initiator=o,this.subscriptions=new Set,this.children=[],this.state=da.ACTIVATED}get running(){return this.hasTrait(W.RUNNING)}get destroyed(){return this.hasTrait(W.DESTROYED)}get completed(){return this.hasTrait(W.COMPLETED)}get canceled(){return this.hasTrait(W.CANCELED)}get failed(){return this.hasTrait(W.FAILED)}get active(){return this.hasTrait(W.ACTIVE)}hasTrait(t){return this.state.hasTrait(t)}start(){return this.state=this.state.start(),this}compensable(){return this.state=this.state.compensable(),this}fail(t){return this.failed||(this.state=this.state.fail(),this.failInitiator=t),this}cancel(t){return this.canceled||(this.state=this.state.cancel(),this.cancelInitiator=t),this}terminate(t){return this.state=this.state.terminate(),this.terminateInitiator=t,this}complete(){return this.state=this.state.complete(),this}destroy(t){return this.state=this.state.destroy(),this.destroyInitiator=t,this}getTokens(){return this.children.filter(t=>!t.destroyed).length}getTokensByElement(t){return this.children.filter(n=>!n.destroyed&&n.element===t).length}}function Bt(e,t){const n=[];for(const i of e)t(i)&&n.push(i);return n}function nr(e,t){for(const n of e)if(t(n))return n;return null}function fi(e,t){const n=["type","name","iref"].every(o=>!(o in e)||e[o]===t[o]),i=!t.ref&&(t.type==="error"||t.type==="escalation");return n&&(i||eo(e,t))}function eo(e,t){const n="ref";return!(n in e)||e[n]===t[n]}function v(e,t){var n=Y(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Et(e,t){return Nn(t,function(n){return v(e,n)})}function Y(e){return e&&e.businessObject||e}function ze(e){return e&&e.di}var fa="_plane";function Vn(e){var t=e.id;return v(e,"bpmn:SubProcess")?ya(t):t}function ma(e){var t=ze(e);return v(t,"bpmndi:BPMNPlane")}function ya(e){return e+fa}function rn(e){return e.filter(t=>v(t,"bpmn:SequenceFlow"))}function mi(e){return v(e,"bpmn:MessageFlow")}function st(e){return v(e,"bpmn:SequenceFlow")}function Pi(e){return Mi(e)&&Un(e,"bpmn:LinkEventDefinition")}function ga(e){return v(e,"bpmn:IntermediateThrowEvent")&&Un(e,"bpmn:LinkEventDefinition")}function Mn(e){return Mi(e)&&Un(e,"bpmn:CompensateEventDefinition")}function to(e){return v(e,"bpmn:Activity")&&e.businessObject.isForCompensation}function Mi(e){return(v(e,"bpmn:CatchEvent")||v(e,"bpmn:ReceiveTask"))&&!Wn(e)}function An(e){return v(e,"bpmn:BoundaryEvent")&&!Wn(e)}function no(e){return gt(e)&&!Un(e)}function Di(e){return!(Wn(e)||!on(e,["bpmn:Activity","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:Gateway","bpmn:EndEvent"])||Pi(e)||e.incoming.find(st)||to(e)||nt(e))}function gt(e){return v(e,"bpmn:StartEvent")&&!Wn(e)}function Wn(e){return!!e.labelTarget}function nt(e){return Y(e).triggeredByEvent}function io(e){return v(e,"bpmn:StartEvent")&&Y(e).isInterrupting||v(e,"bpmn:BoundaryEvent")&&Y(e).cancelActivity}function on(e,t){return t.some(n=>v(e,n))}function Un(e,t){return Nn(Y(e).eventDefinitions,n=>t?v(n,t):!0)}function jt(e,t){return e.children&&e.children.length!==0?e.children:v(e,"bpmn:SubProcess")&&!e.di.isExpanded?t.get(Vn(e)).children:[]}function ro(e,t,n){const i=e.get("scopeIds",!1)||new Dr([32,36]),o={},a={},l=new va,c=new Set,d=[],f=new Set,b=new Set;fe("tick",function(){for(const r of c)re("elementChanged",{element:r});c.clear()});function w(r,s){if(d.push([s,r]),d.length!==1)return;let p;for(;p=d[0];){const[h,m]=p;m.destroyed||h(),d.shift()}re("tick")}function j(r){return a[r.type]||l}function z(r){const{element:s,parentScope:p,initiator:h=null,scope:m=k({element:s,parent:p,initiator:h})}=r;return w(m,function(){m.running||m.start(),he("signal",{...r,scope:m}),j(s).signal({...r,scope:m}),m.parent&&O(m.parent)}),m}function ie(r){const{element:s,scope:p,initiator:h=p}=r,m=k({element:s,parent:p,initiator:h});return w(m,function(){m.running||m.start(),he("enter",r),j(s).enter({...r,initiator:h,scope:m}),m.parent&&O(m.parent)}),m}function N(r){const{element:s,scope:p,initiator:h=p}=r;w(p,function(){he("exit",r),j(s).exit({...r,initiator:h}),p.running&&p.complete(),U(p,h),p.parent&&O(p.parent)})}function L(r){const{event:s,initiator:p,scope:h}=r,m=D(s),y=h.subscriptions;let C=Bt(y,Q=>fi(m,Q.event));if(m.type==="error"||m.type==="escalation"){const Q=Bt(C,X=>eo(m,X.event));(C.every(X=>X.event.boundary)&&Q.some(X=>X.event.boundary)||Q.some(X=>!X.event.boundary))&&(C=Q)}const I=C.filter(Q=>!Q.event.interrupting),oe=C.filter(Q=>Q.event.interrupting);if(!oe.length)return I.map(Q=>Q.triggerFn(p)).flat();const se=oe.find(Q=>!Q.event.boundary)||oe[0],ue=Bt(y,Q=>Q.event.persistent||ba(Q.event,se.event));return y.forEach(Q=>{ue.includes(Q)||Q.remove()}),[se.triggerFn(p)].flat().filter(Q=>Q)}function J(r,s,p){s=D(s);const h=s.element,m={scope:r,event:s,element:h,triggerFn:p,remove(){G(m)}};return b.add(m),r.subscriptions.add(m),h&&H(h),m}function G(r){const{scope:s,event:p}=r;b.delete(r),s.subscriptions.delete(r),p.element&&H(p.element)}function Ce(r){return v(r,"bpmn:StartEvent")||v(r,"bpmn:IntermediateCatchEvent")||v(r,"bpmn:ReceiveTask")||wa(r)?Y(r).name||r.id:null}function x(r){return{element:r,interrupting:!1,boundary:!1,iref:r.id,type:"none"}}function D(r){if(!r.businessObject)return r;const s=io(r),p=An(r),h=Ce(r),m={element:r,interrupting:s,boundary:p,...h?{iref:h}:{}},y=oo(r)[0];if(!y)return{...m,type:Ea(r)?"message":"none"};if(v(y,"bpmn:LinkEventDefinition"))return{...m,type:"link",name:y.name};if(v(y,"bpmn:SignalEventDefinition"))return{...m,type:"signal",ref:y.signalRef};if(v(y,"bpmn:TimerEventDefinition"))return{...m,type:"timer"};if(v(y,"bpmn:ConditionalEventDefinition"))return{...m,type:"condition"};if(v(y,"bpmn:EscalationEventDefinition"))return{...m,type:"escalation",ref:y.escalationRef};if(v(y,"bpmn:CancelEventDefinition"))return{...m,type:"cancel"};if(v(y,"bpmn:ErrorEventDefinition"))return{...m,type:"error",ref:y.errorRef};if(v(y,"bpmn:MessageEventDefinition"))return{...m,type:"message",ref:y.messageRef};if(v(y,"bpmn:CompensateEventDefinition")){let C=y.activityRef&&n.get(y.activityRef.id);return C||(gt(r)&&nt(r.parent)?C=r.parent.parent:An(r)?C=r.host:C=r.parent),{...m,type:"compensate",ref:C,persistent:!0}}throw new Error("unknown event definition",y)}function B(r,s=!0){const{element:p,parent:h,initiator:m}=r;s&&he("createScope",{element:p,scope:h});const y=new ha(i.next(),p,h,m);return h&&h.children.push(y),f.add(y),s&&re("createScope",{scope:y}),H(p),h&&H(h.element),y}function g(r){if(typeof r=="function")return r;const{event:s,element:p,scope:h}=r,m=r.elements||p&&[p],y=s&&D(s);return C=>(!y||fi(y,C.event))&&(!m||m.includes(C.element))&&(!h||h===C.scope)}function E(r){const s=r==="function"?r:g(r);return p=>Array.from(p.subscriptions).some(s)}function S(r){if(typeof r=="function")return r;const{element:s,waitsOnElement:p,parent:h,trait:m=W.RUNNING,subscribedTo:y}=r,C=y?E(y):()=>!0;return I=>(!s||I.element===s)&&(!h||I.parent===h)&&(!p||I.getTokensByElement(p)>0)&&I.hasTrait(m)&&C(I)}function T(r){return Bt(b,g(r))}function A(r){return nr(b,g(r))}function M(r){return Bt(f,S(r))}function R(r){return nr(f,S(r))}function U(r,s=null){if(!r.destroyed){r.destroy(s);for(const p of r.subscriptions){const h=p.event.traits||W.ACTIVE;r.hasTrait(h)||G(p)}if(r.destroyed){for(const p of r.children)p.destroyed||U(p,s);he("destroyScope",{element:r.element,scope:r}),f.delete(r),re("destroyScope",{scope:r})}H(r.element),r.parent&&H(r.parent.element)}}function he(r,s){re("trace",{...s,action:r})}function H(r){c.add(r),d.length||re("tick")}function O(r){re("scopeChanged",{scope:r})}function re(r,s={}){return t.fire(`tokenSimulation.simulator.${r}`,s)}function fe(r,s){t.on("tokenSimulation.simulator."+r,s)}function le(r,s){t.off("tokenSimulation.simulator."+r,s)}function we(r,s){const p=F(r);o[r.id||r]={...p,...s},H(r)}function _(){const r=[];return n.forEach(s=>{if(!on(s,["bpmn:Process","bpmn:Participant"]))return;const p=B({element:s},!1);r.push(p);const h=s.children.filter(gt),m=s.children.filter(Di);for(const y of h){const C={...D(y),interrupting:!1};J(p,C,I=>z({element:s,startEvent:y,initiator:I}))}if(!h.length)for(const y of m){const C=x(y);J(p,C,I=>z({element:s,initiator:I}))}}),r}function k(r){const{element:s}=r,p=B(r),{attachers:h=[]}=s,m=jt(s,n);for(const y of m)if(nt(y)){const C=jt(y,n).filter(I=>gt(I)&&!Mn(I));for(const I of C)J(p,I,oe=>z({element:y,parentScope:p,startEvent:I,initiator:oe}))}for(const y of h)An(y)&&!Mn(y)&&J(p,y,C=>z({element:y,parentScope:p.parent,hostScope:p,initiator:C}));return p}function F(r){return o[r.id||r]||{}}function ee(r,s){if(!s.length)return;const p={type:"all-completed",persistent:!1},h=new Set(s),m=y=>{h.delete(y.scope),h.size===0&&(le("destroyScope",m),L({scope:r,event:p}))};return fe("destroyScope",m),p}function _e(r,s=!0){we(r,{wait:s})}function u(){for(const r of f)U(r);for(const r of _())f.add(r);re("tick"),re("reset")}this.createScope=B,this.destroyScope=U,this.findScope=R,this.findScopes=M,this.findSubscription=A,this.findSubscriptions=T,this.waitAtElement=_e,this.waitForScopes=ee,this.setConfig=we,this.getConfig=F,this.signal=z,this.enter=ie,this.exit=N,this.subscribe=J,this.trigger=L,this.reset=u,this.on=fe,this.off=le,this.registerBehavior=function(r,s){a[r]=s}}ro.$inject=["injector","eventBus","elementRegistry"];function va(){this.signal=function(e){console.log("ignored #exit",e.element)},this.exit=function(e){console.log("ignored #exit",e.element)},this.enter=function(e){console.log("ignored #enter",e.element)}}function ba(e,t){return e.boundary&&!t.boundary}function Ea(e){return v(e,"bpmn:ReceiveTask")||e.incoming.some(t=>v(t,"bpmn:MessageFlow"))}function wa(e){if(!An(e))return!1;const t=oo(e);return!t[0]||on(t[0],["bpmn:ConditionalEventDefinition","bpmn:TimerEventDefinition"])}function oo(e){return e.businessObject.get("eventDefinitions")||[]}function Gn(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:StartEvent",this)}Gn.prototype.signal=function(e){this._simulator.exit(e)};Gn.prototype.exit=function(e){this._activityBehavior.exit(e)};Gn.$inject=["simulator","activityBehavior"];function sn(e,t,n){this._intermediateThrowEventBehavior=n,this._scopeBehavior=t,e.registerBehavior("bpmn:EndEvent",this)}sn.$inject=["simulator","scopeBehavior","intermediateThrowEventBehavior"];sn.prototype.enter=function(e){this._intermediateThrowEventBehavior.enter(e)};sn.prototype.signal=function(e){this._intermediateThrowEventBehavior.signal(e)};sn.prototype.exit=function(e){const{scope:t}=e;this._scopeBehavior.tryExit(t.parent,t)};function Yn(e,t,n){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,e.registerBehavior("bpmn:BoundaryEvent",this)}Yn.prototype.signal=function(e){const{element:t,scope:n,hostScope:i=this._simulator.findScope({parent:n.parent,element:t.host})}=e;if(!i)throw new Error("host scope not found");if(Y(t).cancelActivity){this._scopeBehavior.interrupt(i,n);const a=this._scopeBehavior.tryExit(i,n);if(a){const l=this._simulator.subscribe(i,a,c=>(l.remove(),this._simulator.exit(e)));return}}this._simulator.exit(e)};Yn.prototype.exit=function(e){this._activityBehavior.exit(e)};Yn.$inject=["simulator","activityBehavior","scopeBehavior"];function an(e,t){this._activityBehavior=t,this._simulator=e,e.registerBehavior("bpmn:IntermediateCatchEvent",this),e.registerBehavior("bpmn:ReceiveTask",this)}an.$inject=["simulator","activityBehavior"];an.prototype.signal=function(e){return this._simulator.exit(e)};an.prototype.enter=function(e){const{element:t}=e;return this._activityBehavior.signalOnEvent(e,t)};an.prototype.exit=function(e){this._activityBehavior.exit(e)};function ln(e,t,n){this._simulator=e,this._activityBehavior=t,this._eventBehaviors=n,e.registerBehavior("bpmn:IntermediateThrowEvent",this),e.registerBehavior("bpmn:SendTask",this)}ln.prototype.enter=function(e){const{element:t}=e,n=this._eventBehaviors.get(t);if(n){const i=n(e);if(i)return this._activityBehavior.signalOnEvent(e,i)}this._activityBehavior.enter(e)};ln.prototype.signal=function(e){this._activityBehavior.signal(e)};ln.prototype.exit=function(e){this._activityBehavior.exit(e)};ln.$inject=["simulator","activityBehavior","eventBehaviors"];function Kn(e,t){this._scopeBehavior=t,this._simulator=e,e.registerBehavior("bpmn:ExclusiveGateway",this)}Kn.prototype.enter=function(e){this._simulator.exit(e)};Kn.prototype.exit=function(e){const{element:t,scope:n}=e,i=rn(t.outgoing);if(i.length===1)return this._simulator.enter({element:i[0],scope:n.parent});const{activeOutgoing:o}=this._simulator.getConfig(t),a=i.find(l=>l===o);return a?this._simulator.enter({element:a,scope:n.parent}):this._scopeBehavior.tryExit(n.parent,n)};Kn.$inject=["simulator","scopeBehavior"];function cn(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:ParallelGateway",this)}cn.prototype.enter=function(e){const{scope:t}=e,n=this._findJoiningScopes(e);if(n.length){for(const i of n)i!==t&&this._simulator.destroyScope(i.complete(),t);this._simulator.exit(e)}};cn.prototype._findJoiningScopes=function(e){const{scope:t,element:n}=e,i=rn(n.incoming),{parent:o}=t,a=this._simulator.findScopes({parent:o,element:n}),l=i.map(c=>a.find(d=>d.initiator.element===c)).filter(c=>c);return l.length===i.length?l:[]};cn.prototype.exit=function(e){this._activityBehavior.exit(e)};cn.$inject=["simulator","activityBehavior"];function Fi(e){this._simulator=e,e.registerBehavior("bpmn:EventBasedGateway",this)}Fi.$inject=["simulator"];Fi.prototype.enter=function(e){const{element:t,scope:n}=e,i=n.parent,a=_a(t).map(l=>this._simulator.subscribe(i,l,c=>(a.forEach(d=>d.remove()),this._simulator.destroyScope(n,c),this._simulator.signal({element:l,parentScope:i,initiator:c}))))};function _a(e){return e.outgoing.map(t=>t.target).filter(t=>on(t,["bpmn:IntermediateCatchEvent","bpmn:ReceiveTask"]))}function so(e,t){return tt(Y(e).eventDefinitions,n=>v(n,t))}function xa(e,t){return Nn(Y(e).eventDefinitions,n=>v(n,t))}function at(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:InclusiveGateway",this)}at.prototype.enter=function(e){this._tryJoin(e)};at.prototype.exit=function(e){const{element:t,scope:n}=e;if(rn(t.outgoing).length>1){const{activeOutgoing:o=[]}=this._simulator.getConfig(t);if(!o.length)throw new Error("no outgoing configured");for(const a of o)this._simulator.enter({element:a,scope:n.parent})}else this._activityBehavior.exit(e)};at.prototype._tryJoin=function(e){var t=e.exclude||[];const{scope:n,element:i}=e,{parent:o}=n,a=rn(i.incoming),l=this._simulator.findScopes({parent:o,element:i}).filter(N=>!t.includes(N)),c=a.filter(N=>!l.find(L=>L.initiator.element===N)),d=a.filter(N=>l.find(L=>L.initiator.element===N)),w=this._getRemainingScopes(e).filter(N=>c.some(L=>this._canReachElement(e,N.element,L))).filter(N=>!d.some(L=>this._canReachElement(e,N.element,L)));if(w.length||this._join(e,d,l,t),this._simulator.findScopes({parent:o,element:i}).filter(N=>!t.includes(N))[0]!==n)return;const z=this._simulator.waitForScopes(n,w),ie=this._simulator.subscribe(n,z,()=>{ie.remove(),this._tryJoin(e)})};at.prototype._getRemainingScopes=function(e){const{scope:t,element:n}=e,{parent:i}=t;return this._simulator.findScopes(o=>o.parent===i&&o.element!==n)};at.prototype._join=function(e,t,n,i){const{scope:o}=e,a=t.map(c=>n.find(d=>d.initiator.element===c));for(const c of a)c!==o&&this._simulator.destroyScope(c.complete(),o);this._simulator.exit(e),i.push(o);const l=n.filter(c=>!a.includes(c));l.length&&this._tryJoin({initiator:l[0].initiator,element:l[0].element,scope:l[0],exclude:i})};at.prototype._canReachElement=function(e,t,n,i=new Set){return e.element===n||i.has(n)?!1:(i.add(n),t===n?!0:st(n)?this._canReachElement(e,t,n.source,i):Pi(n)?Sa(n.parent.children,ao(n)).some(l=>this._canReachElement(e,t,l,i)):rn(n.incoming).some(a=>this._canReachElement(e,t,a,i)))};function ao(e){return so(e,"bpmn:LinkEventDefinition").name}function Sa(e,t){return e.filter(n=>ga(n)&&ao(n)===t)}at.$inject=["simulator","activityBehavior"];function Ke(e,t,n){this._simulator=e,this._scopeBehavior=t,this._transactionBehavior=n;const i=["bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:ManualTask","bpmn:ScriptTask","bpmn:ServiceTask","bpmn:Task","bpmn:UserTask"];for(const o of i)e.registerBehavior(o,this)}Ke.$inject=["simulator","scopeBehavior","transactionBehavior"];Ke.prototype.signal=function(e){const t=this._triggerMessages(e);if(t)return this.signalOnEvent(e,t);this._simulator.exit(e)};Ke.prototype.enter=function(e){const{element:t}=e,n=this.waitAtElement(t);if(n)return this.signalOnEvent(e,n);const i=this._triggerMessages(e);if(i)return this.signalOnEvent(e,i);this._simulator.exit(e)};Ke.prototype.exit=function(e){const{element:t,scope:n}=e,i=n.parent,o=n.active&&!n.failed;o&&!nt(t)&&this._transactionBehavior.registerCompensation(n);const a=o?t.outgoing.filter(st):[];a.forEach(l=>this._simulator.enter({element:l,scope:i})),a.length===0&&this._scopeBehavior.tryExit(i,n)};Ke.prototype.signalOnEvent=function(e,t){const{scope:n,element:i}=e,o=this._simulator.subscribe(n,t,a=>(o.remove(),this._simulator.signal({scope:n,element:i,initiator:a})))};Ke.prototype.waitAtElement=function(e){return this._simulator.getConfig(e).wait&&{element:e,type:"continue",interrupting:!1,boundary:!1}};Ke.prototype._getMessageContexts=function(e,t=null){const n=t?o=>o.referencePoint.x>t.x:()=>!0,i=(o,a)=>o.referencePoint.x-a.referencePoint.x;return[...e.incoming.filter(mi).map(o=>({incoming:o,referencePoint:Ca(o.waypoints)})),...e.outgoing.filter(mi).map(o=>({outgoing:o,referencePoint:ka(o.waypoints)}))].sort(i).filter(n)};Ke.prototype._triggerMessages=function(e){const{element:t,initiator:n,scope:i}=e;let o=i.messageContexts;o||(o=i.messageContexts=this._getMessageContexts(t));const a=n&&n.element;if(mi(a)&&i.expectedIncoming!==a){console.debug("Simulator :: ActivityBehavior :: ignoring out-of-bounds message");return}for(;o.length;){const{incoming:l,outgoing:c}=o.shift();if(l){if(!n)continue;return i.expectedIncoming=l,{element:t,type:"message",name:l.id,interrupting:!1,boundary:!1}}this._simulator.signal({element:c})}};function ka(e){return e&&e[0]}function Ca(e){return e&&e[e.length-1]}function kt(e,t,n,i,o){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,this._transactionBehavior=i,this._elementRegistry=o,e.registerBehavior("bpmn:SubProcess",this),e.registerBehavior("bpmn:Transaction",this),e.registerBehavior("bpmn:AdHocSubProcess",this)}kt.$inject=["simulator","activityBehavior","scopeBehavior","transactionBehavior","elementRegistry"];kt.prototype.signal=function(e){this._start(e)};kt.prototype.enter=function(e){const{element:t}=e,n=this._activityBehavior.waitAtElement(t);if(n)return this._activityBehavior.signalOnEvent(e,n);this._start(e)};kt.prototype.exit=function(e){const{scope:t}=e,n=t.parent;n.failInitiator===t&&n.complete(),this._activityBehavior.exit(e)};kt.prototype._start=function(e){const{element:t,startEvent:n,scope:i}=e,o=i.parent;if(nt(t)){if(!n)throw new Error("missing <startEvent>: required for event sub-process")}else if(n)throw new Error("unexpected <startEvent>: not allowed for sub-process");if(o.destroyed)throw new Error(`target scope <${o.id}> destroyed`);Aa(t)&&this._transactionBehavior.setup(e),n&&io(n)&&this._scopeBehavior.interrupt(o,i);const a=this._findStarts(t,n);for(const l of a)gt(l)?this._simulator.signal({element:l,parentScope:i,initiator:i}):this._simulator.enter({element:l,scope:i,initiator:i});a.length||this._simulator.exit(e)};kt.prototype._findStarts=function(e,t){const n=t?i=>t===i:i=>no(i);return jt(e,this._elementRegistry).filter(i=>n(i)||Di(i))};function Aa(e){return v(e,"bpmn:Transaction")}const yi={type:"cancel",interrupting:!0,boundary:!1,persistent:!0};function lt(e,t,n){this._simulator=e,this._scopeBehavior=t,this._elementRegistry=n}lt.$inject=["simulator","scopeBehavior","elementRegistry"];lt.prototype.setup=function(e){const{scope:t}=e,n=this._simulator.subscribe(t,yi,a=>(n.remove(),this.cancel({scope:t,initiator:a}))),i={type:"compensate",ref:t.element,persistent:!0,traits:W.NOT_DEAD},o=this._simulator.subscribe(t,i,a=>t.canceled?(o.remove(),this.compensate({scope:t,element:t.element,initiator:a})):this._simulator.trigger({event:yi,scope:t}))};lt.prototype.cancel=function(e){const{scope:t,initiator:n}=e;if(!t.destroyed)return t.cancel(n),this._simulator.trigger({event:{type:"compensate",ref:t.element},initiator:n,scope:t}),this._simulator.trigger({scope:t,initiator:n,event:yi})};lt.prototype.registerCompensation=function(e){const{element:t}=e,i=jt(t,this._elementRegistry).filter(nt).map(l=>jt(l,this._elementRegistry).find(c=>gt(c)&&Mn(c))).filter(l=>l),o=t.attachers.filter(Mn);if(!i.length&&!o.length)return;const a=this.findTransactionScope(e);v(a.element,"bpmn:Transaction")||this.makeCompensable(a);for(const l of i){const c={element:l,type:"compensate",persistent:!0,interrupting:!0,ref:t,traits:W.NOT_DEAD},d=l.parent,f=this._simulator.subscribe(e,c,b=>(f.remove(),this._simulator.signal({initiator:b,element:d,startEvent:l,parentScope:e})))}for(const l of o){const c={element:l,type:"compensate",persistent:!0,ref:t,traits:W.NOT_DEAD},d=l.outgoing.map(b=>b.target).find(to);if(!d)continue;const f=this._simulator.subscribe(a,c,b=>(f.remove(),this._simulator.enter({initiator:b,element:d,scope:a})))}};lt.prototype.makeCompensable=function(e){if(e.hasTrait(W.COMPENSABLE)||!e.parent)return;const t={type:"compensate",ref:e.element,interrupting:!0,persistent:!0,traits:W.NOT_DEAD};e.compensable();const n=this._simulator.subscribe(e,t,a=>(n.remove(),e.fail(a),this.compensate({scope:e,element:e.element,initiator:a}),this._scopeBehavior.tryExit(e,a),e)),i=e.parent;if(!i)return;const o=this._simulator.subscribe(i,t,a=>(o.remove(),this._simulator.trigger({scope:e,event:t,initiator:a})));this.makeCompensable(i)};lt.prototype.findTransactionScope=function(e){let t=e;for(;t;){const n=t.element;if(v(n,"bpmn:SubProcess")&&!nt(n)||on(n,["bpmn:Transaction","bpmn:Process","bpmn:Participant"]))return t;t=t.parent}throw Ta(e)};lt.prototype.compensate=function(e){const{scope:t,element:n}=e,i=Bt(t.subscriptions,l=>fi({type:"compensate"},l.event)),o=i.filter(l=>l.event.ref===n),a=i.filter(l=>l.event.ref!==n);for(const l of o)this._scopeBehavior.preExit(t,c=>this._simulator.trigger(l));for(const l of a.reverse())this._scopeBehavior.preExit(t,c=>this._simulator.trigger(l))};function Ta(e){throw new Error(`no transaction context for <${e.id}>`)}function Ct(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:SequenceFlow",this)}Ct.prototype.enter=function(e){this._simulator.exit(e)};Ct.prototype.exit=function(e){const{element:t,scope:n}=e;this._simulator.enter({initiator:n,element:t.target,scope:n.parent})};Ct.$inject=["simulator","scopeBehavior"];function At(e){this._simulator=e,e.registerBehavior("bpmn:MessageFlow",this)}At.$inject=["simulator"];At.prototype.signal=function(e){this._simulator.exit(e)};At.prototype.exit=function(e){const{element:t,scope:n}=e,i=t.target,o=Mi(i)?i:{type:"message",element:t,name:t.id},a=this._simulator.findSubscription({event:o,elements:[i,i.parent]});a&&this._simulator.trigger({event:o,initiator:n,scope:a.scope})};function Ni(e,t,n){this._simulator=e,this._elementRegistry=t,this._scopeBehavior=n}Ni.$inject=["simulator","elementRegistry","scopeBehavior"];Ni.prototype.get=function(e){const n=Object.entries({"bpmn:LinkEventDefinition":i=>{const{element:o,scope:a}=i,l=ir(o),c=a.parent,d=c.element,b=jt(d,this._elementRegistry).filter(w=>Pi(w)&&ir(w).name===l.name);for(const w of b)this._simulator.signal({element:w,parentScope:c,initiator:a})},"bpmn:SignalEventDefinition":i=>{const{element:o,scope:a}=i,l=this._simulator.findSubscriptions({event:o}),c=new Set;for(const d of l){const f=d.scope;c.has(f)||(c.add(f),this._simulator.trigger({event:o,scope:f,initiator:a}))}},"bpmn:EscalationEventDefinition":i=>{const{element:o,scope:a}=i,l=this._simulator.findScopes({subscribedTo:{event:o},trait:W.ACTIVE});let c=a;for(;c=c.parent;)if(l.includes(c)){this._simulator.trigger({event:o,scope:c,initiator:a});break}},"bpmn:ErrorEventDefinition":i=>{const{element:o,scope:a}=i,l=this._simulator.findScopes({subscribedTo:{event:o},trait:W.ACTIVE});let c=a;for(;c=c.parent;)if(l.includes(c)){this._simulator.trigger({event:o,scope:c,initiator:a});break}},"bpmn:TerminateEventDefinition":i=>{const{scope:o}=i;this._scopeBehavior.terminate(o.parent,o)},"bpmn:CancelEventDefinition":i=>{const{scope:o,element:a}=i;this._simulator.trigger({event:a,initiator:o,scope:rr(o)})},"bpmn:CompensateEventDefinition":i=>{const{scope:o,element:a}=i;return this._simulator.waitForScopes(o,this._simulator.trigger({event:a,scope:rr(o)}))}}).find(i=>xa(e,i[0]));return n&&n[1]};function ir(e){return so(e,"bpmn:LinkEventDefinition")}function rr(e){for(;nt(e.parent.element);)e=e.parent;return e.parent}const lo={type:"pre-exit",persistent:!0,interrupting:!0,boundary:!1},ai={type:"exit",interrupting:!0,boundary:!1,persistent:!0};function qe(e){this._simulator=e}qe.$inject=["simulator"];qe.prototype.isFinished=function(e,t=null){return t=co(t),e.children.every(n=>n.destroyed||n.completed||t(n))};qe.prototype.destroyChildren=function(e,t,n=null){n=co(n),e.children.filter(i=>!i.destroyed&&!n(i)).map(i=>{this._simulator.destroyScope(i,t)})};qe.prototype.terminate=function(e,t){this.destroyChildren(e,t),e.terminate(t),this.tryExit(e,t)};qe.prototype.interrupt=function(e,t){this.destroyChildren(e,t,t),e.fail(t)};qe.prototype.tryExit=function(e,t){if(!e)throw new Error("missing <scope>");if(t||(t=e),!this.isFinished(e,t))return ai;const n=this._simulator.findSubscriptions({event:lo,scope:e});for(const i of n){const{event:o,scope:a}=i;if(this._simulator.trigger({event:o,scope:a,initiator:t}).length)return ai}this._simulator.trigger({event:ai,scope:e,initiator:t}),this.exit({scope:e,initiator:t})};qe.prototype.exit=function(e){const{scope:t,initiator:n}=e;if(!n)throw new Error("missing <initiator>");this._simulator.exit({element:t.element,scope:t,initiator:n})};qe.prototype.preExit=function(e,t){const n=this._simulator.subscribe(e,lo,i=>(n.remove(),t(i)));return n};function co(e){return typeof e=="function"?e:t=>t===e}function pn(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:Process",this),e.registerBehavior("bpmn:Participant",this)}pn.prototype.signal=function(e){const{element:t,startEvent:n,startNodes:i=this._findStarts(t,n),scope:o}=e;if(!i.length)throw new Error("missing <startNodes> or <startEvent>");for(const a of i)gt(a)?this._simulator.signal({element:a,parentScope:o}):this._simulator.enter({element:a,scope:o})};pn.prototype.exit=function(e){const{scope:t,initiator:n}=e;this._scopeBehavior.destroyChildren(t,n)};pn.prototype._findStarts=function(e,t){const n=t?i=>t===i:i=>no(i);return e.children.filter(i=>n(i)||Di(i))};pn.$inject=["simulator","scopeBehavior"];const Ra={__init__:["startEventBehavior","endEventBehavior","boundaryEventBehavior","intermediateCatchEventBehavior","intermediateThrowEventBehavior","exclusiveGatewayBehavior","parallelGatewayBehavior","eventBasedGatewayBehavior","inclusiveGatewayBehavior","subProcessBehavior","sequenceFlowBehavior","messageFlowBehavior","processBehavior"],startEventBehavior:["type",Gn],endEventBehavior:["type",sn],boundaryEventBehavior:["type",Yn],intermediateCatchEventBehavior:["type",an],intermediateThrowEventBehavior:["type",ln],exclusiveGatewayBehavior:["type",Kn],parallelGatewayBehavior:["type",cn],eventBasedGatewayBehavior:["type",Fi],inclusiveGatewayBehavior:["type",at],activityBehavior:["type",Ke],subProcessBehavior:["type",kt],sequenceFlowBehavior:["type",Ct],messageFlowBehavior:["type",At],eventBehaviors:["type",Ni],scopeBehavior:["type",qe],processBehavior:["type",pn],transactionBehavior:["type",lt]},Pa=5e3,po={__depends__:[Ra],__init__:[["eventBus","simulator",function(e,t){e.on(["tokenSimulation.toggleMode","tokenSimulation.resetSimulation"],Pa,n=>{t.reset()})}]],simulator:["type",ro]};function qn(e,t){e.invoke(At,this),this._animation=t}rt(qn,At);qn.$inject=["injector","animation"];qn.prototype.signal=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{At.prototype.signal.call(this,e)})};function Xn(e,t){e.invoke(Ct,this),this._animation=t}rt(Xn,Ct);Xn.$inject=["injector","animation"];Xn.prototype.enter=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{Ct.prototype.enter.call(this,e)})};const Ma={sequenceFlowBehavior:["type",Xn],messageFlowBehavior:["type",qn]},or=e=>!0;function zt(e,t){this._eventBus=e,this._simulator=t,this._filter=or,e.on([be,Ye],()=>{this._filter=or}),e.on(tn,n=>{const{scope:i}=n;this._scope===i&&i.parent&&this.toggle(i.parent)}),e.on(St,n=>{const{scope:i}=n;!i.parent&&this._scope&&!uo(this._scope,i)&&this.toggle(null)})}zt.prototype.toggle=function(e){const t=this._scope!==e;this._scope=t?e:null,this._filter=this._scope?n=>uo(this._scope,n):n=>!0,this._eventBus.fire(Ot,{filter:this._filter,scope:this._scope})};zt.prototype.isShown=function(e){return typeof e=="string"&&(e=this._simulator.findScope(t=>t.id===e)),e&&this._filter(e)};zt.prototype.isFocused=function(e){var n;const t=e.id||e;return((n=this._scope)==null?void 0:n.id)===t};zt.prototype.findScope=function(e){return this._simulator.findScopes(e).filter(t=>this.isShown(t))[0]};zt.$inject=["eventBus","simulator"];function uo(e,t){do if(e===t)return!0;while(t=t.parent);return!1}const Ht={scopeFilter:["type",zt]},ho=getComputedStyle(document.documentElement),Da=ho.getPropertyValue("--token-simulation-green-base-44"),Fa=ho.getPropertyValue("--token-simulation-white");function Na(){}function Ba(e,t){return t.length===2?Oa:e===1?ja:e===t.length-1?La:Ia}const Ia=function(e){return e},ja=function(e){return-Math.cos(e*Math.PI/2)+1},La=function(e){return Math.sin(e*Math.PI/2)},Oa=function(e){return-Math.cos(e*Math.PI)/2+.5},Zt=20;function Te(e,t,n,i){this._eventBus=n,this._scopeFilter=i,this._canvas=t,this._randomize=e&&e.randomize!==!1,this._animations=new Set,this._speed=1,n.on(["diagram.destroy",Ye],()=>{this.clearAnimations()}),n.on(Lr,()=>{this.pause()}),n.on(jr,()=>{this.play()}),n.on(Ot,o=>{this.each(a=>{this._scopeFilter.isShown(a.scope)?a.show():a.hide()})}),n.on(tn,o=>{const{scope:a}=o;this.clearAnimations(a)})}Te.prototype.animate=function(e,t,n){this.createAnimation(e,t,n)};Te.prototype.pause=function(){this.each(e=>e.pause())};Te.prototype.play=function(){this.each(e=>e.play())};Te.prototype.each=function(e){this._animations.forEach(e)};Te.prototype.createAnimation=function(e,t,n=Na){const i=this._getGroup(t);if(!i)return;const o=this._createTokenGfx(i,t),a=new Fe(o,e.waypoints,this._randomize,()=>{this._clearAnimation(a),n()});return a.setSpeed(this.getAnimationSpeed()),this._scopeFilter.isShown(t)||a.hide(),a.scope=t,a.element=e,this._animations.add(a),this._eventBus.fire(Ms,{animation:a}),a.play(),a};Te.prototype.setAnimationSpeed=function(e){this._speed=e,this.each(t=>t.setSpeed(e)),this._eventBus.fire(Or,{speed:e})};Te.prototype.getAnimationSpeed=function(){return this._speed};Te.prototype.clearAnimations=function(e){this.each(t=>{(!e||t.scope===e)&&this._clearAnimation(t)})};Te.prototype._clearAnimation=function(e){e.remove(),this._animations.delete(e)};Te.prototype._createTokenGfx=function(e,t){const n=ge(this._getTokenSVG(t).trim());return Fr(n,e)};Te.prototype._getTokenSVG=function(e){const t=e.colors||{primary:Da,auxiliary:Fa};return`
    <g class="bts-token">
      <circle
        class="bts-circle"
        r="${Zt/2}"
        cx="${Zt/2}"
        cy="${Zt/2}"
        fill="${t.primary}"
      />
      <text
        class="bts-text"
        transform="translate(10, 14)"
        text-anchor="middle"
        fill="${t.auxiliary}"
      >1</text>
    </g>
  `};Te.prototype._getGroup=function(e){var t=this._canvas,n,i;"findRoot"in t?(i=t.findRoot(e.element),n=t._findPlaneForRoot(i).layer):n=Se(".viewport",t._svg);var o=Se(".bts-animation-tokens",n);return o||(o=ge('<g class="bts-animation-tokens" />'),Fr(o,n)),o};Te.$inject=["config.animation","canvas","eventBus","scopeFilter"];function Fe(e,t,n,i){this.gfx=e,this.waypoints=t,this.done=i,this.randomize=n,this._paused=!0,this._t=0,this._parts=[],this.create()}Fe.prototype.pause=function(){this._paused=!0};Fe.prototype.play=function(){this._paused&&(this._paused=!1,this.tick(0)),this.schedule()};Fe.prototype.schedule=function(){if(this._paused||this._scheduled)return;const e=Date.now();this._scheduled=!0,requestAnimationFrame(()=>{this._scheduled=!1,!this._paused&&(this.tick((Date.now()-e)*this._speed),this.schedule())})};Fe.prototype.tick=function(e){const t=this._t=this._t+e,n=this._parts.find(c=>c.startTime<=t&&c.endTime>t);if(!n)return this.completed();const i=t-n.startTime,o=n.length*n.easing(i/n.duration),a=n.startLength+o,l=this._path.getPointAtLength(a);this.move(l.x,l.y)};Fe.prototype.move=function(e,t){Je(this.gfx,"transform",`translate(${e}, ${t})`)};Fe.prototype.create=function(){const e=this.waypoints,t=e.reduce((a,l,c)=>{const d=e[c-1];if(d){const f=a[a.length-1],b=f&&f.endLength||0,w=Ha(d,l);a.push({startLength:b,endLength:b+w,length:w,easing:Ba(c,e)})}return a},[]),n=t.reduce(function(a,l){return a+l.length},0),i=e.reduce((a,l,c)=>{const d=l.x-Zt/2,f=l.y-Zt/2;return a.push([c>0?"L":"M",d,f]),a},[]).flat().join(" "),o=$a(n,this._randomize);this._parts=t.reduce((a,l,c)=>{const d=o/n*l.length,f=c>0?a[c-1].endTime:0,b=f+d;return[...a,{...l,startTime:f,endTime:b,duration:d}]},[]),this._path=ge(`<path d="${i}" />`),this._t=0};Fe.prototype.show=function(){Je(this.gfx,"display","")};Fe.prototype.hide=function(){Je(this.gfx,"display","none")};Fe.prototype.completed=function(){this.done()};Fe.prototype.remove=function(){this.pause(),ss(this.gfx)};Fe.prototype.setSpeed=function(e){this._speed=e};function $a(e,t=!1){return Math.log(e)*(t?za(250,300):250)}function za(e,t){return e+Math.floor(Math.random()*(t-e))}function Ha(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}const Va={__depends__:[po,Ma,Ht],animation:["type",Te]};var Xt={exports:{}},Wa=Xt.exports,sr;function Ua(){return sr||(sr=1,function(e,t){(function(n,i){{var o=i();e&&e.exports&&(t=e.exports=o),t.randomColor=o}})(Wa,function(){var n=null,i={};J();var o=[],a=function(g){if(g=g||{},g.seed!==void 0&&g.seed!==null&&g.seed===parseInt(g.seed,10))n=g.seed;else if(typeof g.seed=="string")n=D(g.seed);else{if(g.seed!==void 0&&g.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var E,S,T;if(g.count!==null&&g.count!==void 0){for(var A=g.count,M=[],R=0;R<g.count;R++)o.push(!1);for(g.count=null;A>M.length;){var U=a(g);n!==null&&(g.seed=n),M.push(U)}return g.count=A,M}return E=l(g),S=c(E,g),T=d(E,S,g),f([E,S,T],g)};function l(g){if(o.length>0){var E=B(g.hue),S=ie(E),T=(E[1]-E[0])/o.length,A=parseInt((S-E[0])/T);o[A]===!0?A=(A+2)%o.length:o[A]=!0;var M=(E[0]+A*T)%359,R=(E[0]+(A+1)*T)%359;return E=[M,R],S=ie(E),S<0&&(S=360+S),S}else{var E=w(g.hue);return S=ie(E),S<0&&(S=360+S),S}}function c(g,E){if(E.hue==="monochrome")return 0;if(E.luminosity==="random")return ie([0,100]);var S=j(g),T=S[0],A=S[1];switch(E.luminosity){case"bright":T=55;break;case"dark":T=A-10;break;case"light":A=55;break}return ie([T,A])}function d(g,E,S){var T=b(g,E),A=100;switch(S.luminosity){case"dark":A=T+20;break;case"light":T=(A+T)/2;break;case"random":T=0,A=100;break}return ie([T,A])}function f(g,E){switch(E.format){case"hsvArray":return g;case"hslArray":return x(g);case"hsl":var S=x(g);return"hsl("+S[0]+", "+S[1]+"%, "+S[2]+"%)";case"hsla":var T=x(g),R=E.alpha||Math.random();return"hsla("+T[0]+", "+T[1]+"%, "+T[2]+"%, "+R+")";case"rgbArray":return G(g);case"rgb":var A=G(g);return"rgb("+A.join(", ")+")";case"rgba":var M=G(g),R=E.alpha||Math.random();return"rgba("+M.join(", ")+", "+R+")";default:return N(g)}}function b(g,E){for(var S=z(g).lowerBounds,T=0;T<S.length-1;T++){var A=S[T][0],M=S[T][1],R=S[T+1][0],U=S[T+1][1];if(E>=A&&E<=R){var he=(U-M)/(R-A),H=M-he*A;return he*E+H}}return 0}function w(g){if(typeof parseInt(g)=="number"){var E=parseInt(g);if(E<360&&E>0)return[E,E]}if(typeof g=="string"){if(i[g]){var S=i[g];if(S.hueRange)return S.hueRange}else if(g.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var T=Ce(g)[0];return[T,T]}}return[0,360]}function j(g){return z(g).saturationRange}function z(g){g>=334&&g<=360&&(g-=360);for(var E in i){var S=i[E];if(S.hueRange&&g>=S.hueRange[0]&&g<=S.hueRange[1])return i[E]}return"Color not found"}function ie(g){if(n===null){var E=.618033988749895,S=Math.random();return S+=E,S%=1,Math.floor(g[0]+S*(g[1]+1-g[0]))}else{var T=g[1]||1,A=g[0]||0;n=(n*9301+49297)%233280;var M=n/233280;return Math.floor(A+M*(T-A))}}function N(g){var E=G(g);function S(A){var M=A.toString(16);return M.length==1?"0"+M:M}var T="#"+S(E[0])+S(E[1])+S(E[2]);return T}function L(g,E,S){var T=S[0][0],A=S[S.length-1][0],M=S[S.length-1][1],R=S[0][1];i[g]={hueRange:E,lowerBounds:S,saturationRange:[T,A],brightnessRange:[M,R]}}function J(){L("monochrome",null,[[0,0],[100,0]]),L("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),L("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),L("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),L("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),L("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),L("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),L("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function G(g){var E=g[0];E===0&&(E=1),E===360&&(E=359),E=E/360;var S=g[1]/100,T=g[2]/100,A=Math.floor(E*6),M=E*6-A,R=T*(1-S),U=T*(1-M*S),he=T*(1-(1-M)*S),H=256,O=256,re=256;switch(A){case 0:H=T,O=he,re=R;break;case 1:H=U,O=T,re=R;break;case 2:H=R,O=T,re=he;break;case 3:H=R,O=U,re=T;break;case 4:H=he,O=R,re=T;break;case 5:H=T,O=R,re=U;break}var fe=[Math.floor(H*255),Math.floor(O*255),Math.floor(re*255)];return fe}function Ce(g){g=g.replace(/^#/,""),g=g.length===3?g.replace(/(.)/g,"$1$1"):g;var E=parseInt(g.substr(0,2),16)/255,S=parseInt(g.substr(2,2),16)/255,T=parseInt(g.substr(4,2),16)/255,A=Math.max(E,S,T),M=A-Math.min(E,S,T),R=A?M/A:0;switch(A){case E:return[60*((S-T)/M%6)||0,R,A];case S:return[60*((T-E)/M+2)||0,R,A];case T:return[60*((E-S)/M+4)||0,R,A]}}function x(g){var E=g[0],S=g[1]/100,T=g[2]/100,A=(2-S)*T;return[E,Math.round(S*T/(A<1?A:2-A)*1e4)/100,A/2*100]}function D(g){for(var E=0,S=0;S!==g.length&&!(E>=Number.MAX_SAFE_INTEGER);S++)E+=g.charCodeAt(S);return E}function B(g){if(isNaN(g)){if(typeof g=="string"){if(i[g]){var S=i[g];if(S.hueRange)return S.hueRange}else if(g.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var T=Ce(g)[0];return z(T).hueRange}}}else{var E=parseInt(g);if(E<360&&E>0)return z(g).hueRange}return[0,360]}return a})}(Xt,Xt.exports)),Xt.exports}var Ga=Ua();const Ya=As(Ga),Ka=1500;function fo(e){const t=Ya({count:60}).filter(a=>n(a.substring(1))<200);function n(a){var l=parseInt(a.substr(0,2),16),c=parseInt(a.substr(2,2),16),d=parseInt(a.substr(4,2),16),f=(l*299+c*587+d*114)/1e3;return f}let i=0;function o(a){const{element:l}=a;if(l&&l.type==="bpmn:MessageFlow")return{primary:"#999",auxiliary:"#FFF"};if(a.parent)return a.parent.colors;const c=t[i++%t.length];return{primary:c,auxiliary:n(c)>=128?"#111":"#fff"}}e.on(St,Ka,a=>{const{scope:l}=a;l.colors=o(l)})}fo.$inject=["eventBus"];const qa={__init__:["coloredScopes"],coloredScopes:["type",fo]};function Bi(e){this._exclusiveGatewaySettings=e}Bi.prototype.createContextPads=function(e){if(e.outgoing.filter(function(o){return v(o,"bpmn:SequenceFlow")}).length<2)return;const n=`
    <div class="bts-context-pad" title="Set Sequence Flow">
      ${Hr()}
    </div>
  `;return[{action:()=>{this._exclusiveGatewaySettings.setSequenceFlow(e)},element:e,html:n}]};Bi.$inject=["exclusiveGatewaySettings"];function Ii(e){this._inclusiveGatewaySettings=e}Ii.prototype.createContextPads=function(e){const t=e.outgoing.filter(st);if(t.length<2)return;const n=t.filter(o=>{const a=Y(o);return Y(e).default!==a}),i=`
    <div class="bts-context-pad" title="Set Sequence Flow">
      ${Hr()}
    </div>
  `;return n.map(o=>({action:()=>{this._inclusiveGatewaySettings.toggleSequenceFlow(e,o)},element:o,html:i}))};Ii.$inject=["inclusiveGatewaySettings"];function Tt(e){this._simulator=e}Tt.prototype.createContextPads=function(e){return v(e,"bpmn:ReceiveTask")||v(e,"bpmn:SubProcess")&&Y(e).triggeredByEvent?[]:[this.createPauseContextPad(e)]};Tt.prototype.createPauseContextPad=function(e){const t=()=>this._findSubscriptions({element:e}),n=this._isPaused(e),i=`
    <div class="bts-context-pad ${n?"":"show-hover"}" title="${n?"Remove":"Add"} pause point">
      ${(n?qs:hi)("show-hover")}
      ${hi("hide-hover")}
    </div>
  `;return{action:()=>{this._togglePaused(e)},element:e,hideContexts:t,html:i}};Tt.prototype._isPaused=function(e){const{wait:t}=this._simulator.getConfig(e);return t};Tt.prototype._togglePaused=function(e){const t=!this._isPaused(e);this._simulator.waitAtElement(e,t)};Tt.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};Tt.$inject=["simulator"];function vt(e){this._simulator=e}vt.$inject=["simulator"];vt.prototype.createContextPads=function(e){return[this.createTriggerContextPad(e)]};vt.prototype.createTriggerContextPad=function(e){const t=()=>this._findSubscriptions({element:e}).slice().sort((l,c)=>l.event.type==="none"?1:-1),n=`
    <div class="bts-context-pad" title="Trigger Event">
      ${Ur()}
    </div>
  `;return{action:o=>{const{event:a,scope:l}=o[0];return this._simulator.trigger({event:a,scope:l})},element:e,html:n,contexts:t}};vt.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};const bn=500,Xa=-15,Za=-15;function Ne(e,t,n,i,o,a){this._elementRegistry=t,this._overlays=n,this._injector=i,this._canvas=o,this._scopeFilter=a,this._active=!1,this._overlayCache=new Map,this._handlerIdx=0,this._handlers=[],this.registerHandler("bpmn:ExclusiveGateway",Bi),this.registerHandler("bpmn:InclusiveGateway",Ii),this.registerHandler("bpmn:Activity",Tt),this.registerHandler("bpmn:Event",vt),this.registerHandler("bpmn:Gateway",vt),this.registerHandler("bpmn:Activity",vt),e.on(be,bn,l=>{this._active=l.active,this._active?this.openContextPads():this.closeContextPads()}),e.on(Ye,bn,()=>{this.closeContextPads(),this.openContextPads()}),e.on("root.set",bn,()=>{this._active?this.openContextPads():this.closeContextPads()}),e.on(Ot,l=>{const c=It(".djs-overlay-bts-context-menu [data-scope-ids]",n._overlayRoot);for(const f of c){const w=f.dataset.scopeIds.split(",").some(j=>a.isShown(j));Z(f).toggle("hidden",!w)}const d=It(".djs-overlay-bts-context-menu [data-hide-scope-ids]",n._overlayRoot);for(const f of d){const w=f.dataset.hideScopeIds.split(",").some(j=>a.isShown(j));Z(f).toggle("hidden",w)}}),e.on($r,bn,l=>{const{element:c}=l;this.updateElementContextPads(c)})}Ne.prototype.registerHandler=function(e,t){const n=this._injector.instantiate(t);n.hash=String(this._handlerIdx++),this._handlers.push({handler:n,type:e})};Ne.prototype.getHandlers=function(e){return this._handlers.filter(({type:t})=>v(e,t)).map(({handler:t})=>t)};Ne.prototype.openContextPads=function(e){e||(e=this._canvas.getRootElement()),this._elementRegistry.forEach(t=>{Ja(e,t)&&!ma(t)&&this.updateElementContextPads(t)})};Ne.prototype._getOverlays=function(e){return this._overlayCache.get(e)||[]};Ne.prototype._addOverlay=function(e,t){const{handlerHash:n}=t;if(!n)throw new Error("<handlerHash> required");const i=this._overlays.add(e,"bts-context-menu",{...t,position:{top:Xa,left:Za},show:{minZoom:.5}}),o=this._overlays.get(i),a=this._overlayCache;a.has(n)||a.set(n,[]),a.get(n).push(o)};Ne.prototype._removeOverlay=function(e){const{id:t,handlerHash:n}=e;this._overlays.remove(t);const i=this._overlayCache.get(n)||[],o=i.indexOf(e);o!==-1&&i.splice(o,1)};Ne.prototype.updateElementContextPads=function(e){for(const t of this.getHandlers(e))this._updateElementContextPads(e,t)};Ne.prototype._updateElementContextPads=function(e,t){const n=this._canvas,i=(t.createContextPads(e)||[]).filter(c=>c),o=`${e.id}------${t.hash}`,a=this._getOverlays(o),l=[];for(const c of i){const{element:d,contexts:f,hideContexts:b,action:w,html:j}=c,z=`${c.element.id}-------${j}`;let ie=a.find(L=>L.hash===z);const N=ie&&ie.html||ce(j);if(f){const L=f();N.dataset.scopeIds=L.map(G=>G.scope.id).join(",");const J=L.filter(G=>this._scopeFilter.isShown(G.scope));Z(N).toggle("hidden",J.length===0)}if(b){const L=b();N.dataset.hideScopeIds=L.map(G=>G.scope.id).join(",");const J=L.filter(G=>this._scopeFilter.isShown(G.scope));Z(N).toggle("hidden",J.length>0)}if(ie){l.push(ie);continue}w&&de.bind(N,"click",L=>{L.preventDefault();const J=f?f().filter(G=>this._scopeFilter.isShown(G.scope)):null;w(J),"restoreFocus"in n&&n.restoreFocus()}),this._addOverlay(d,{hash:z,handlerHash:o,html:N})}for(const c of a)l.includes(c)||this._removeOverlay(c)};Ne.prototype.closeContextPads=function(){for(const e of this._overlayCache.values())for(const t of e)this._closeOverlay(t);this._overlayCache.clear()};Ne.prototype._closeOverlay=function(e){this._overlays.remove(e.id)};Ne.$inject=["eventBus","elementRegistry","overlays","injector","canvas","scopeFilter"];function Ja(e,t){do{if(e===t)return!0;t=t.parent}while(t);return!1}const Qa={__depends__:[Ht],__init__:["contextPads"],contextPads:["type",Ne]};function mo(e,t,n){e.on(tn,i=>{const{scope:o}=i,{destroyInitiator:a,element:l}=o;!o.completed||!a||!["bpmn:Process","bpmn:Participant"].includes(l.type)||n.addElementNotification(a.element,{type:"success",icon:di(),text:"Finished",scope:o})})}mo.$inject=["eventBus","simulator","elementNotifications"];const el=-15,tl=15;function un(e,t){this._overlays=e,t.on([Ye,St,be],()=>{this.clear()})}un.prototype.addElementNotification=function(e,t){const n={top:el,right:tl},{type:i,icon:o,text:a,scope:l={}}=t,c=l.colors,d=c?`style="color: ${c.auxiliary}; background: ${c.primary}"`:"",f=ce(`
    <div class="bts-element-notification ${i||""}" ${d}>
      ${o||""}
      <span class="bts-text">${a}</span>
    </div>
  `);this._overlays.add(e,"bts-element-notification",{position:n,html:f,show:{minZoom:.5}})};un.prototype.clear=function(){this._overlays.remove({type:"bts-element-notification"})};un.prototype.removeElementNotification=function(e){this._overlays.remove({element:e})};un.$inject=["overlays","eventBus"];const yo={elementNotifications:["type",un]},nl=2e3,il=Wr();function dn(e,t,n){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._init(),e.on([be,Ye],i=>{this.clear()})}dn.prototype._init=function(){this.container=ce('<div class="bts-notifications"></div>'),this._canvas.getContainer().appendChild(this.container)};dn.prototype.showNotification=function(e){const{text:t,type:n="info",icon:i=il,scope:o,ttl:a=nl}=e;if(o&&!this._scopeFilter.isShown(o))return;const l=i.startsWith("<")?i:`<i class="${i}"></i>`,c=o&&o.colors,d=c?`style="color: ${c.auxiliary}; background: ${c.primary}"`:"",f=ce(`
    <div class="bts-notification ${n}">
      <span class="bts-icon">${l}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${o?`<span class="bts-scope" ${d}>${o.id}</span>`:""}
    </div>
  `);for(this.container.appendChild(f);this.container.children.length>5;)this.container.children[0].remove();setTimeout(function(){f.remove()},a)};dn.prototype.clear=function(){for(;this.container.children.length;)this.container.children[0].remove()};dn.$inject=["eventBus","canvas","scopeFilter"];const hn={__depends__:[Ht],notifications:["type",dn]},rl={__depends__:[yo,hn],__init__:["simulationState"],simulationState:["type",mo]},ol="--token-simulation-silver-base-97",sl="--token-simulation-green-base-44",go="show-scopes",al=3e3;function Be(e,t,n,i,o){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._elementColors=i,this._simulationStyles=o,this._highlight=null,this._init(),e.on(be,a=>{a.active?Z(this._container).remove("hidden"):(Z(this._container).add("hidden"),as(this._container),this.unhighlightScope())}),e.on(Ot,a=>{const l=this.getScopeElements();for(const c of l){const d=c.dataset.scopeId;Z(c).toggle("inactive",!this._scopeFilter.isShown(d)),Z(c).toggle("focussed",this._scopeFilter.isFocused(d))}}),e.on(St,a=>{this.addScope(a.scope)}),e.on(tn,a=>{this.removeScope(a.scope)}),e.on(Ds,a=>{this.updateScope(a.scope)}),e.on(Ye,()=>{this.removeAllInstances()})}Be.prototype._init=function(){this._container=ce('<div class="bts-scopes hidden"></div>'),this._canvas.getContainer().appendChild(this._container)};Be.prototype.addScope=function(e){const t=["bpmn:Process","bpmn:SubProcess","bpmn:Participant"],{element:n}=e;if(!Et(n,t))return;const i=e.colors,o=i?`style="color: ${i.auxiliary}; background: ${i.primary}; outline-color: ${i.primary}"`:"",a=ce(`
    <div data-scope-id="${e.id}" class="bts-scope"
         title="Focus process instance ${e.id}" ${o}>
      ${e.getTokens()}
    </div>
  `);de.bind(a,"click",()=>{this._scopeFilter.toggle(e)}),de.bind(a,"mouseenter",()=>{this.highlightScope(n)}),de.bind(a,"mouseleave",()=>{this.unhighlightScope()}),this._scopeFilter.isShown(e)||Z(a).add("inactive"),Z(a).toggle("focussed",this._scopeFilter.isFocused(e)),this._container.appendChild(a)};Be.prototype.getScopeElements=function(){return It("[data-scope-id]",this._container)};Be.prototype.getScopeElement=function(e){return Se(`[data-scope-id="${e.id}"]`,this._container)};Be.prototype.updateScope=function(e){const t=this.getScopeElement(e);t&&(t.textContent=e.getTokens())};Be.prototype.removeScope=function(e){const t=this.getScopeElement(e);t&&t.remove()};Be.prototype.removeAllInstances=function(){this._container.innerHTML=""};Be.prototype.highlightScope=function(e){this.unhighlightScope(),this._highlight=e,this._elementColors.add(e,go,this._getHighlightColors(),al),e.parent||Z(this._canvas.getContainer()).add("highlight")};Be.prototype.unhighlightScope=function(){if(!this._highlight)return;const e=this._highlight;this._elementColors.remove(e,go),e.parent||Z(this._canvas.getContainer()).remove("highlight"),this._highlight=null};Be.prototype._getHighlightColors=function(){return{fill:this._simulationStyles.get(ol),stroke:this._simulationStyles.get(sl)}};Be.$inject=["eventBus","canvas","scopeFilter","elementColors","simulationStyles"];function Zn(){this._cache={}}Zn.$inject=[];Zn.prototype.get=function(e){const t=this._cache[e];return t||(this._computedStyle||(this._computedStyle=this._getComputedStyle()),this._cache[e]=this._computedStyle.getPropertyValue(e).trim())};Zn.prototype._getComputedStyle=function(){const e=typeof getComputedStyle=="function"?getComputedStyle:ll,t=typeof document<"u"?document.documentElement:{};return e(t)};function ll(){return{getPropertyValue(){return""}}}const Jn={simulationStyles:["type",Zn]},cl={__depends__:[Ht,Jn],__init__:["showScopes"],showScopes:["type",Be]};var pl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function vo(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return pl[t]})}const ul=Wr();function li(e){const t=e&&e.businessObject.name;return t&&vo(t)}function ci(e,t){const n=gi(e);return n==="none"?"bpmn-icon-intermediate-event-none":`bpmn-icon-intermediate-event-${t}-${n}`}function gi(e){const t=Y(e);if(t.get("eventDefinitions").length===0)return"none";const n=t.eventDefinitions[0];return v(n,"bpmn:MessageEventDefinition")?"message":v(n,"bpmn:TimerEventDefinition")?"timer":v(n,"bpmn:SignalEventDefinition")?"signal":v(n,"bpmn:ErrorEventDefinition")?"error":v(n,"bpmn:EscalationEventDefinition")?"escalation":v(n,"bpmn:CompensateEventDefinition")?"compensation":v(n,"bpmn:ConditionalEventDefinition")?"condition":v(n,"bpmn:LinkEventDefinition")?"link":v(n,"bpmn:CancelEventDefinition")?"cancel":v(n,"bpmn:TerminateEventDefinition")?"terminate":"none"}function Rt(e,t,n,i,o,a){this._notifications=t,this._tokenSimulationPalette=n,this._canvas=i,this._scopeFilter=o,this._init(),e.on(Ot,l=>{const c=It(".bts-entry[data-scope-id]",this._container);for(const d of c){const f=d.dataset.scopeId;Z(d).toggle("inactive",!this._scopeFilter.isShown(f))}}),e.on(tn,l=>{const{scope:c}=l,{element:d}=c,f=c.completed;if(!Et(d,["bpmn:Process","bpmn:Participant","bpmn:SubProcess"]))return;const j=`${v(d,"bpmn:SubProcess")?li(d)||"SubProcess":"Process"} ${f?"finished":"canceled"}`;this.log({text:j,icon:f?di():Js(),scope:c})}),e.on(St,l=>{const{scope:c}=l,{element:d}=c;if(!Et(d,["bpmn:Process","bpmn:Participant","bpmn:SubProcess"]))return;const w=`${v(d,"bpmn:SubProcess")?li(d)||"SubProcess":"Process"} started`;this.log({text:w,icon:di(),scope:c})}),e.on(zr,l=>{const{action:c,scope:d,element:f}=l;if(c!=="exit")return;const b=d.parent,w=li(f);if(v(f,"bpmn:ServiceTask"))return this.log({text:w||"Service Task",icon:"bpmn-icon-service",scope:b});if(v(f,"bpmn:UserTask"))return this.log({text:w||"User Task",icon:"bpmn-icon-user",scope:b});if(v(f,"bpmn:CallActivity"))return this.log({text:w||"Call Activity",icon:"bpmn-icon-call-activity",scope:b});if(v(f,"bpmn:ScriptTask"))return this.log({text:w||"Script Task",icon:"bpmn-icon-script",scope:b});if(v(f,"bpmn:BusinessRuleTask"))return this.log({text:w||"Business Rule Task",icon:"bpmn-icon-business-rule",scope:b});if(v(f,"bpmn:ManualTask"))return this.log({text:w||"Manual Task",icon:"bpmn-icon-manual-task",scope:b});if(v(f,"bpmn:ReceiveTask"))return this.log({text:w||"Receive Task",icon:"bpmn-icon-receive",scope:b});if(v(f,"bpmn:SendTask"))return this.log({text:w||"Send Task",icon:"bpmn-icon-send",scope:b});if(v(f,"bpmn:Task"))return this.log({text:w||"Task",icon:"bpmn-icon-task",scope:b});if(v(f,"bpmn:ExclusiveGateway"))return this.log({text:w||"Exclusive Gateway",icon:"bpmn-icon-gateway-xor",scope:b});if(v(f,"bpmn:ParallelGateway"))return this.log({text:w||"Parallel Gateway",icon:"bpmn-icon-gateway-parallel",scope:b});if(v(f,"bpmn:InclusiveGateway"))return this.log({text:w||"Inclusive Gateway",icon:"bpmn-icon-gateway-or",scope:b});if(v(f,"bpmn:StartEvent"))return this.log({text:w||"Start Event",icon:`bpmn-icon-start-event-${gi(f)}`,scope:b});if(v(f,"bpmn:IntermediateCatchEvent"))return this.log({text:w||"Intermediate Event",icon:ci(f,"catch"),scope:b});if(v(f,"bpmn:IntermediateThrowEvent"))return this.log({text:w||"Intermediate Event",icon:ci(f,"throw"),scope:b});if(v(f,"bpmn:BoundaryEvent"))return this.log({text:w||"Boundary Event",icon:ci(f,"catch"),scope:b});if(v(f,"bpmn:EndEvent"))return this.log({text:w||"End Event",icon:`bpmn-icon-end-event-${gi(f)}`,scope:b})}),e.on([be,Ye],l=>{this.clear(),this.toggle(!1)})}Rt.prototype._init=function(){this._container=ce(`
    <div class="bts-log hidden djs-scrollable">
      <div class="bts-header">
        ${tr("bts-log-icon")}
        Simulation Log
        <button class="bts-close" aria-label="Close">
          ${Qs()}
        </button>
      </div>
      <div class="bts-content">
        <p class="bts-entry placeholder">No Entries</p>
      </div>
    </div>
  `),this._placeholder=Se(".bts-placeholder",this._container),this._content=Se(".bts-content",this._container),de.bind(this._content,"mousedown",e=>{e.stopPropagation()}),this._close=Se(".bts-close",this._container),de.bind(this._close,"click",()=>{this.toggle(!1)}),this._icon=Se(".bts-log-icon",this._container),de.bind(this._icon,"click",()=>{this.toggle()}),this._canvas.getContainer().appendChild(this._container),this.paletteEntry=ce(`
    <div class="bts-entry" title="Toggle Simulation Log">
      ${tr()}
    </div>
  `),de.bind(this.paletteEntry,"click",()=>{this.toggle()}),this._tokenSimulationPalette.addEntry(this.paletteEntry,3)};Rt.prototype.isShown=function(){const e=this._container;return!Z(e).has("hidden")};Rt.prototype.toggle=function(e=!this.isShown()){const t=this._container;e?Z(t).remove("hidden"):Z(t).add("hidden")};Rt.prototype.log=function(e){const{text:t,type:n="info",icon:i=ul,scope:o}=e,a=this._content;Z(this._placeholder).add("hidden"),this.isShown()||this._notifications.showNotification(e);const l=i.startsWith("<")?i:`<i class="${i}"></i>`,c=o&&o.colors,d=c?`style="background: ${c.primary}; color: ${c.auxiliary}"`:"",f=ce(`
    <p class="bts-entry ${n} ${o&&this._scopeFilter.isShown(o)?"":"inactive"}" ${o?`data-scope-id="${o.id}"`:""}>
      <span class="bts-icon">${l}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${o?`<span class="bts-scope" data-scope-id="${o.id}" ${d}>${o.id}</span>`:""}
    </p>
  `);ki.bind(f,".bts-scope[data-scope-id]","click",w=>{this._scopeFilter.toggle(o)});const b=Math.abs(a.clientHeight+a.scrollTop-a.scrollHeight)<2;a.appendChild(f),b&&(a.scrollTop=a.scrollHeight)};Rt.prototype.clear=function(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._placeholder=ce('<p class="bts-entry placeholder">No Entries</p>'),this._content.appendChild(this._placeholder)};Rt.$inject=["eventBus","notifications","tokenSimulationPalette","canvas","scopeFilter","simulator"];const dl={__depends__:[hn,Ht],__init__:["log"],log:["type",Rt]},hl=["bpmn:ComplexGateway"];function fl(e){return e.labelTarget}function Vt(e,t,n,i,o){this._eventBus=e,this._elementRegistry=t,this._elementNotifications=o,this._notifications=i,this._canvasParent=n.getContainer().parentNode,e.on(be,a=>{a.active?this.enable():this.clear()})}Vt.prototype.getUnsupportedElements=function(){return this._unsupportedElements};Vt.prototype.enable=function(){const e=[];this._elementRegistry.forEach(t=>{fl(t)||Et(t,hl)&&(this.showWarning(t),e.push(t))}),e.length&&this._notifications.showNotification({text:"Found unsupported elements",icon:Vr(),type:"warning",ttl:5e3}),this._unsupportedElements=e};Vt.prototype.clear=function(){Z(this._canvasParent).remove("warning")};Vt.prototype.showWarning=function(e){this._elementNotifications.addElementNotification(e,{type:"warning",icon:Vr(),text:"Not supported"})};Vt.$inject=["eventBus","elementRegistry","canvas","notifications","elementNotifications"];const ml={__depends__:[yo,hn],__init__:["elementSupport"],elementSupport:["type",Vt]},bo=Ur(),yl=hi(),ar=1500;function ct(e,t,n,i){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this.canvasParent=i.getContainer().parentNode,this.isActive=!1,this.isPaused=!0,this._init(),e.on(St,ar,o=>{this.activate(),this.unpause()}),e.on([Ye,be],()=>{this.deactivate(),this.pause()}),e.on(zr,ar,o=>{this.unpause()})}ct.prototype._init=function(){this.paletteEntry=ce(`
    <div class="bts-entry disabled" title="Play/Pause Simulation">
      ${bo}
    </div>
  `),de.bind(this.paletteEntry,"click",this.toggle.bind(this)),this._tokenSimulationPalette.addEntry(this.paletteEntry,1)};ct.prototype.toggle=function(){this.isPaused?this.unpause():this.pause()};ct.prototype.pause=function(){this.isActive&&(Z(this.paletteEntry).remove("active"),Z(this.canvasParent).add("paused"),this.paletteEntry.innerHTML=bo,this._eventBus.fire(Lr),this._notifications.showNotification({text:"Pause Simulation"}),this.isPaused=!0)};ct.prototype.unpause=function(){!this.isActive||!this.isPaused||(Z(this.paletteEntry).add("active"),Z(this.canvasParent).remove("paused"),this.paletteEntry.innerHTML=yl,this._eventBus.fire(jr),this._notifications.showNotification({text:"Play Simulation"}),this.isPaused=!1)};ct.prototype.activate=function(){this.isActive=!0,Z(this.paletteEntry).remove("disabled")};ct.prototype.deactivate=function(){this.isActive=!1,Z(this.paletteEntry).remove("active"),Z(this.paletteEntry).add("disabled")};ct.$inject=["eventBus","tokenSimulationPalette","notifications","canvas"];const gl={__depends__:[hn],__init__:["pauseSimulation"],pauseSimulation:["type",ct]};function Qn(e,t,n){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this._init(),e.on(St,()=>{Z(this._paletteEntry).remove("disabled")}),e.on(be,i=>{(this._active=i.active)||this.resetSimulation()})}Qn.prototype._init=function(){this._paletteEntry=ce(`
    <div class="bts-entry disabled" title="Reset Simulation">
      ${Xs()}
    </div>
  `),de.bind(this._paletteEntry,"click",()=>{this.resetSimulation(),this._notifications.showNotification({text:"Reset Simulation",type:"info"})}),this._tokenSimulationPalette.addEntry(this._paletteEntry,2)};Qn.prototype.resetSimulation=function(){Z(this._paletteEntry).add("disabled"),this._eventBus.fire(Ye)};Qn.$inject=["eventBus","tokenSimulationPalette","notifications"];const vl={__depends__:[hn],__init__:["resetSimulation"],resetSimulation:["type",Qn]},bl=10,El=-15,wl=500,_l="--token-simulation-green-base-44",xl="--token-simulation-white";function pt(e,t,n,i,o){this._overlays=t,this._scopeFilter=i,this._simulator=n,this._simulationStyles=o,this.overlayIds={},e.on($r,wl,a=>{const{element:l}=a;this.removeTokenCounts(l),this.addTokenCounts(l)}),e.on(Ot,a=>{const l=It(".bts-token-count[data-scope-id]",t._overlayRoot);for(const c of l){const d=c.dataset.scopeId;Z(c).toggle("inactive",!this._scopeFilter.isShown(d))}})}pt.prototype.addTokenCounts=function(e){if(v(e,"bpmn:MessageFlow")||v(e,"bpmn:SequenceFlow"))return;const t=this._simulator.findScopes(n=>!n.destroyed&&n.children.some(i=>!i.destroyed&&i.element===e));this.addTokenCount(e,t)};pt.prototype.addTokenCount=function(e,t){if(!t.length)return;const n=t.map(l=>this._getTokenHTML(e,l)).join(""),i=ce(`
    <div class="bts-token-count-parent">
      ${n}
    </div>
  `),o={bottom:bl,left:El},a=this._overlays.add(e,"bts-token-count",{position:o,html:i,show:{minZoom:.5}});this.overlayIds[e.id]=a};pt.prototype.removeTokenCounts=function(e){this.removeTokenCount(e)};pt.prototype.removeTokenCount=function(e){const t=this.overlayIds[e.id];t&&(this._overlays.remove(t),delete this.overlayIds[e.id])};pt.prototype._getTokenHTML=function(e,t){const n=t.colors||this._getDefaultColors();return`
    <div data-scope-id="${t.id}" class="bts-token-count waiting ${this._scopeFilter.isShown(t)?"":"inactive"}"
         style="color: ${n.auxiliary}; background: ${n.primary}">
      ${t.getTokensByElement(e)}
    </div>
  `};pt.prototype._getDefaultColors=function(){return{primary:this._simulationStyles.get(_l),auxiliary:this._simuationStyles.get(xl)}};pt.$inject=["eventBus","overlays","simulator","scopeFilter","simulationStyles"];const Sl={__depends__:[Ht,Jn],__init__:["tokenCount"],tokenCount:["type",pt]},kl=[["Slow",.5],["Normal",1],["Fast",2]];function fn(e,t,n){this._canvas=e,this._animation=t,this._eventBus=n,this._init(t.getAnimationSpeed()),n.on(be,i=>{i.active?Z(this._container).remove("hidden"):Z(this._container).add("hidden")}),n.on(Or,i=>{this.setActive(i.speed)})}fn.prototype.getToggleSpeed=function(e){return parseFloat(e.dataset.speed)};fn.prototype._init=function(e){this._container=ce(`
    <div class="bts-set-animation-speed hidden">
      ${Zs()}
      <div class="bts-animation-speed-buttons">
        ${kl.map(([t,n],i)=>`
            <button title="Set animation speed = ${t}" data-speed="${n}" class="bts-animation-speed-button ${n===e?"active":""}">
              ${Array.from({length:i+1}).map(()=>Ks()).join("")}
            </button>
          `).join("")}
      </div>
    </div>
  `),ki.bind(this._container,"[data-speed]","click",t=>{const n=t.delegateTarget,i=this.getToggleSpeed(n);this._animation.setAnimationSpeed(i)}),this._canvas.getContainer().appendChild(this._container)};fn.prototype.setActive=function(e){It("[data-speed]",this._container).forEach(t=>{const n=this.getToggleSpeed(t)===e;Z(t)[n?"add":"remove"]("active")})};fn.$inject=["canvas","animation","eventBus"];const Cl={__init__:["setAnimationSpeed"],setAnimationSpeed:["type",fn]},Al="--token-simulation-grey-darken-30",Tl="--token-simulation-grey-lighten-56";function Rl(e,t){var n=e.outgoing.filter(ji),i=n.indexOf(t||e.sequenceFlow);return n[i+1]?n[i+1]:n[0]}function ji(e){return v(e,"bpmn:SequenceFlow")}const Pl="exclusive-gateway-settings",Ml=2e3;function Wt(e,t,n,i,o){this._elementRegistry=t,this._elementColors=n,this._simulator=i,this._simulationStyles=o,e.on(be,a=>{a.active?this.setSequenceFlowsDefault():this.resetSequenceFlows()})}Wt.prototype.setSequenceFlowsDefault=function(){const e=this._elementRegistry.filter(t=>v(t,"bpmn:ExclusiveGateway"));for(const t of e)this.setSequenceFlow(t)};Wt.prototype.resetSequenceFlows=function(){this._elementRegistry.filter(t=>v(t,"bpmn:ExclusiveGateway")).forEach(t=>{t.outgoing.filter(ji).length&&this.resetSequenceFlow(t)})};Wt.prototype.resetSequenceFlow=function(e){this._simulator.setConfig(e,{activeOutgoing:void 0})};Wt.prototype.setSequenceFlow=function(e){const t=e.outgoing.filter(ji);if(t.length<2)return;const{activeOutgoing:n}=this._simulator.getConfig(e);let i;n?i=Rl(e,n):i=t[0],this._simulator.setConfig(e,{activeOutgoing:i}),e.outgoing.forEach(o=>{const a=o===i?Al:Tl,l=this._simulationStyles.get(a);this._elementColors.add(o,Pl,{stroke:l},Ml)})};Wt.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];const lr=5e4;function je(e,t,n){this._elementRegistry=e,this._eventBus=t,this._graphicsFactory=n,this._originalColors={},this._customColors={},t.on(be,lr,i=>{i.active?this._saveOriginalColors():(this._applyOriginalColors(),this._originalColors={},this._customColors={})}),t.on("saveXML.start",lr,()=>{this._applyOriginalColors(),t.once("saveXML.done",()=>this._applyCustomColors())})}je.$inject=["elementRegistry","eventBus","graphicsFactory"];je.prototype.add=function(e,t,n,i=1e3){let o=this._customColors[e.id];o||(o=this._customColors[e.id]={}),o[t]={...n,priority:i},this._applyHighestPriorityColor(e)};je.prototype.remove=function(e,t){const n=this._customColors[e.id];n&&(delete n[t],Object.keys(n)||delete this._customColors[e.id]),this._applyHighestPriorityColor(e)};je.prototype._get=function(e){const t=ze(e);if(t){if(Eo(e))return{stroke:t.label&&t.label.get("color")};if(Et(t,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return{fill:t.get("background-color"),stroke:t.get("border-color")}}};je.prototype._set=function(e,t={}){const{fill:n,stroke:i}=t,o=ze(e);o&&(Eo(e)?o.label&&o.label.set("color",i):Et(o,["bpmndi:BPMNEdge","bpmndi:BPMNShape"])&&(o.set("background-color",n),o.set("border-color",i)),this._forceRedraw(e))};je.prototype._saveOriginalColors=function(){this._originalColors={},this._elementRegistry.forEach(e=>{this._originalColors[e.id]=this._get(e)})};je.prototype._applyOriginalColors=function(){this._elementRegistry.forEach(e=>{const t=this._originalColors[e.id];t&&this._set(e,t)})};je.prototype._applyCustomColors=function(){this._elementRegistry.forEach(e=>{const t=this._customColors[e.id];t&&this._set(e,wo(t))})};je.prototype._applyHighestPriorityColor=function(e){const t=this._customColors[e.id];if(!t){this._set(e,this._originalColors[e.id]);return}this._set(e,wo(t))};je.prototype._forceRedraw=function(e){const t=this._elementRegistry.getGraphics(e),n=e.waypoints?"connection":"shape";this._graphicsFactory.update(n,e,t)};function Eo(e){return"labelTarget"in e}function wo(e={}){const t=Object.values(e).reduce((n,i)=>{const{priority:o=1e3}=i;return!n||o>n.priority?i:n},void 0);if(t){const{priority:n,...i}=t;return i}}const Li={elementColors:["type",je]},Dl={__depends__:[Li,Jn],exclusiveGatewaySettings:["type",Wt]},Fl="neutral-element-colors";function Oi(e,t,n){this._elementRegistry=t,this._elementColors=n,e.on(be,i=>{const{active:o}=i;o&&this._setNeutralColors()})}Oi.prototype._setNeutralColors=function(){this._elementRegistry.forEach(e=>{this._elementColors.add(e,Fl,{stroke:"#212121",fill:"#fff"})})};Oi.$inject=["eventBus","elementRegistry","elementColors"];const Nl={__depends__:[Li],__init__:["neutralElementColors"],neutralElementColors:["type",Oi]},Bl="--token-simulation-grey-darken-30",Il="--token-simulation-grey-lighten-56",jl="inclusive-gateway-settings";function Xe(e,t,n,i,o){this._elementRegistry=t,this._elementColors=n,this._simulator=i,this._simulationStyles=o,e.on(be,a=>{a.active?this.setDefaults():this.reset()})}Xe.prototype.setDefaults=function(){this._elementRegistry.filter(t=>v(t,"bpmn:InclusiveGateway")).forEach(t=>{t.outgoing.filter(st).length>1&&this._setGatewayDefaults(t)})};Xe.prototype.reset=function(){this._elementRegistry.filter(t=>v(t,"bpmn:InclusiveGateway")).forEach(t=>{t.outgoing.filter(st).length>1&&this._resetGateway(t)})};Xe.prototype.toggleSequenceFlow=function(e,t){const n=this._getActiveOutgoing(e),i=$i(e),o=Ll(e);let a;n.includes(t)?a=vi(n,t):a=vi(n,i).concat(t),a.length||(i?a=[i]:a=[o.find(l=>l!==t)]),this._setActiveOutgoing(e,a)};Xe.prototype._getActiveOutgoing=function(e){const{activeOutgoing:t}=this._simulator.getConfig(e);return t};Xe.prototype._setActiveOutgoing=function(e,t){this._simulator.setConfig(e,{activeOutgoing:t}),e.outgoing.filter(st).forEach(i=>{const o=!t||t.includes(i)?Bl:Il,a=this._simulationStyles.get(o);this._elementColors.add(i,jl,{stroke:a})})};Xe.prototype._setGatewayDefaults=function(e){const t=e.outgoing.filter(st),n=$i(e),i=vi(t,n);this._setActiveOutgoing(e,i)};Xe.prototype._resetGateway=function(e){this._setActiveOutgoing(e,void 0)};Xe.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];function $i(e){const t=Y(e).default;if(t)return e.outgoing.find(n=>Y(n)===t)}function Ll(e){const t=$i(e);return e.outgoing.filter(n=>Y(n)!==t)}function vi(e,t){return e.filter(n=>n!==t)}const Ol={__depends__:[Li,Jn],inclusiveGatewaySettings:["type",Xe]};function ei(e,t){var n=this;this._canvas=t,this.entries=[],this._init(),e.on(be,function(i){var o=i.active;o?Z(n.container).remove("hidden"):Z(n.container).add("hidden")})}ei.prototype._init=function(){this.container=ce('<div class="bts-palette hidden"></div>'),this._canvas.getContainer().appendChild(this.container)};ei.prototype.addEntry=function(e,t){var n=0;this.entries.forEach(function(i){t>=i.index&&n++}),this.container.insertBefore(e,this.container.childNodes[n]),this.entries.push({entry:e,index:t})};ei.$inject=["eventBus","canvas"];const $l={__init__:["tokenSimulationPalette"],tokenSimulationPalette:["type",ei]},zl={__depends__:[po,Va,qa,Qa,rl,cl,dl,ml,gl,vl,Sl,Cl,Dl,Nl,Ol,$l]},Hl={__depends__:[zl,ta]};function yt(e,t){return v(e,"bpmn:CallActivity")?!1:v(e,"bpmn:SubProcess")?(t=t||ze(e),t&&v(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):v(e,"bpmn:Participant")?!!Y(e).processRef:!0}function cr(e){if(!(!v(e,"bpmn:Participant")&&!v(e,"bpmn:Lane"))){var t=ze(e).isHorizontal;return t===void 0?!0:t}}function Vl(e){return e&&!!Y(e).triggeredByEvent}var Dn={width:90,height:20},pr=15;function Wl(e){return v(e,"bpmn:Event")||v(e,"bpmn:Gateway")||v(e,"bpmn:DataStoreReference")||v(e,"bpmn:DataObjectReference")||v(e,"bpmn:DataInput")||v(e,"bpmn:DataOutput")||v(e,"bpmn:SequenceFlow")||v(e,"bpmn:MessageFlow")||v(e,"bpmn:Group")}function Ul(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],o=Gl(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),l=o.x,c=o.y;return Math.abs(a)<Math.PI/2?c-=pr:l+=pr,{x:l,y:c}}function Gl(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Yl(e){return e.waypoints?Ul(e.waypoints):v(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Dn.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Dn.height/2}}function Kl(e,t){var n,i,o,a=e.label;return a&&a.bounds?(o=a.bounds,i={width:Math.max(Dn.width,o.width),height:o.height},n={x:o.x+o.width/2,y:o.y+o.height/2}):(n=Yl(t),i=Dn),ne({x:n.x-i.width/2,y:n.y-i.height/2},i)}function ql(e){if(v(e,"bpmn:FlowElement")||v(e,"bpmn:Participant")||v(e,"bpmn:Lane")||v(e,"bpmn:SequenceFlow")||v(e,"bpmn:MessageFlow")||v(e,"bpmn:DataInput")||v(e,"bpmn:DataOutput"))return"name";if(v(e,"bpmn:TextAnnotation"))return"text";if(v(e,"bpmn:Group"))return"categoryValueRef"}function Xl(e){var t=e.categoryValueRef;return t&&t.value||""}function Fn(e){var t=e.businessObject,n=ql(t);if(n)return n==="categoryValueRef"?Xl(t):t[n]||""}var bi="hsl(225, 10%, 15%)",Zl="white";function Le(e,t){return Nn(e.eventDefinitions,function(n){return n.$type===t})}function Jl(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function Ql(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function V(e,t,n){var i=ze(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||Zl}function P(e,t,n){var i=ze(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||bi}function Kt(e,t,n,i){var o=ze(e),a=o.get("label");return i||a&&a.get("color:color")||t||P(e,n)}function ec(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,o=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return In(o)}function tc(e,t){var n=e.x,i=e.y,o=e.width,a=e.height,l=[["M",n+t,i],["l",o-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-10,t],["l",t*2-o,0],["a",t,t,0,0,1,-10,-10],["l",0,t*2-a],["a",t,t,0,0,1,t,-10],["z"]];return In(l)}function nc(e){var t=e.width,n=e.height,i=e.x,o=e.y,a=t/2,l=n/2,c=[["M",i+a,o],["l",a,l],["l",-a,l],["l",-a,-l],["z"]];return In(c)}function ic(e){var t=e.x,n=e.y,i=e.width,o=e.height,a=[["M",t,n],["l",i,0],["l",0,o],["l",-i,0],["z"]];return In(a)}function qt(e,t={}){return{width:De(e,t),height:Ae(e,t)}}function De(e,t={}){return Bn(t,"width")?t.width:e.width}function Ae(e,t={}){return Bn(t,"height")?t.height:e.height}var rc=new Dr,oc=10,En=3,sc=1.5,Tn=10,Ft=.95,ac=1,lc=.25;function Pt(e,t,n,i,o,a,l){Nr.call(this,t,l);var c=e&&e.defaultFillColor,d=e&&e.defaultStrokeColor,f=e&&e.defaultLabelColor;function b(u){return n.computeStyle(u,{strokeLinecap:"round",strokeLinejoin:"round",stroke:bi,strokeWidth:2,fill:"white"})}function w(u){return n.computeStyle(u,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:bi,strokeWidth:2})}function j(u,r){var{ref:s={x:0,y:0},scale:p=1,element:h,parentGfx:m=o._svg}=r,y=ge("marker",{id:u,viewBox:"0 0 20 20",refX:s.x,refY:s.y,markerWidth:20*p,markerHeight:20*p,orient:"auto"});Ue(y,h);var C=Se(":scope > defs",m);C||(C=ge("defs"),Ue(m,C)),Ue(C,y)}function z(u,r,s,p){var h=rc.nextPrefixed("marker-");return ie(u,h,r,s,p),"url(#"+h+")"}function ie(u,r,s,p,h){if(s==="sequenceflow-end"){var m=ge("path",{d:"M 1 5 L 11 10 L 1 15 Z",...b({fill:h,stroke:h,strokeWidth:1})});j(r,{element:m,ref:{x:11,y:10},scale:.5,parentGfx:u})}if(s==="messageflow-start"){var y=ge("circle",{cx:6,cy:6,r:3.5,...b({fill:p,stroke:h,strokeWidth:1,strokeDasharray:[1e4,1]})});j(r,{element:y,ref:{x:6,y:6},parentGfx:u})}if(s==="messageflow-end"){var C=ge("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...b({fill:p,stroke:h,strokeWidth:1,strokeDasharray:[1e4,1]})});j(r,{element:C,ref:{x:8.5,y:5},parentGfx:u})}if(s==="association-start"){var I=ge("path",{d:"M 11 5 L 1 10 L 11 15",...w({fill:"none",stroke:h,strokeWidth:1.5,strokeDasharray:[1e4,1]})});j(r,{element:I,ref:{x:1,y:10},scale:.5,parentGfx:u})}if(s==="association-end"){var oe=ge("path",{d:"M 1 5 L 11 10 L 1 15",...w({fill:"none",stroke:h,strokeWidth:1.5,strokeDasharray:[1e4,1]})});j(r,{element:oe,ref:{x:11,y:10},scale:.5,parentGfx:u})}if(s==="conditional-flow-marker"){var se=ge("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...b({fill:p,stroke:h})});j(r,{element:se,ref:{x:-1,y:10},scale:.5,parentGfx:u})}if(s==="conditional-default-flow-marker"){var ue=ge("path",{d:"M 6 4 L 10 16",...b({stroke:h,fill:"none"})});j(r,{element:ue,ref:{x:0,y:10},scale:.5,parentGfx:u})}}function N(u,r,s,p,h={}){pi(p)&&(h=p,p=0),p=p||0,h=b(h);var m=r/2,y=s/2,C=ge("circle",{cx:m,cy:y,r:Math.round((r+s)/4-p),...h});return Ue(u,C),C}function L(u,r,s,p,h,m){pi(h)&&(m=h,h=0),h=h||0,m=b(m);var y=ge("rect",{x:h,y:h,width:r-h*2,height:s-h*2,rx:p,ry:p,...m});return Ue(u,y),y}function J(u,r,s,p){var h=r/2,m=s/2,y=[{x:h,y:0},{x:r,y:m},{x:h,y:s},{x:0,y:m}],C=y.map(function(oe){return oe.x+","+oe.y}).join(" ");p=b(p);var I=ge("polygon",{...p,points:C});return Ue(u,I),I}function G(u,r,s,p){s=w(s);var h=ls(r,s,p);return Ue(u,h),h}function Ce(u,r,s){return G(u,r,s,5)}function x(u,r,s){s=w(s);var p=ge("path",{...s,d:r});return Ue(u,p),p}function D(u,r,s,p){return x(r,s,ne({"data-marker":u},p))}function B(u){return _e[u]}function g(u){return function(r,s,p){return B(u)(r,s,p)}}var E={"bpmn:MessageEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.235,my:.315}}),m=p?P(r,d,s.stroke):V(r,c,s.fill),y=p?V(r,c,s.fill):P(r,d,s.stroke),C=x(u,h,{fill:m,stroke:y,strokeWidth:1});return C},"bpmn:TimerEventDefinition":function(u,r,s={}){var p=s.width||r.width,h=s.height||r.height,m=s.width?1:2,y=N(u,p,h,.2*h,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:m}),C=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:p,containerHeight:h,position:{mx:.5,my:.5}});x(u,C,{stroke:P(r,d,s.stroke),strokeWidth:m});for(var I=0;I<12;I++){var oe=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:p,containerHeight:h,position:{mx:.5,my:.5}}),se=p/2,ue=h/2;x(u,oe,{strokeWidth:1,stroke:P(r,d,s.stroke),transform:"rotate("+I*30+","+ue+","+se+")"})}return y},"bpmn:EscalationEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.5,my:.2}}),m=p?P(r,d,s.stroke):V(r,c,s.fill);return x(u,h,{fill:m,stroke:P(r,d,s.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(u,r,s={}){var p=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.5,my:.222}});return x(u,p,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:.57,my:.263}}),m=p?P(r,d,s.stroke):V(r,c,s.fill);return x(u,h,{fill:m,stroke:P(r,d,s.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.2,my:.722}}),m=p?P(r,d,s.stroke):V(r,c,s.fill);return x(u,h,{fill:m,stroke:P(r,d,s.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:.638,my:-.055}}),m=p?P(r,d,s.stroke):"none",y=x(u,h,{fill:m,stroke:P(r,d,s.stroke),strokeWidth:1});return ps(y,45),y},"bpmn:CompensateEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.22,my:.5}}),m=p?P(r,d,s.stroke):V(r,c,s.fill);return x(u,h,{fill:m,stroke:P(r,d,s.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.5,my:.2}}),m=p?P(r,d,s.stroke):V(r,c,s.fill);return x(u,h,{strokeWidth:1,fill:m,stroke:P(r,d,s.stroke)})},"bpmn:MultipleEventDefinition":function(u,r,s={},p){var h=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.211,my:.36}}),m=p?P(r,d,s.stroke):V(r,c,s.fill);return x(u,h,{fill:m,stroke:P(r,d,s.stroke),strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(u,r,s={}){var p=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:s.width||r.width,containerHeight:s.height||r.height,position:{mx:.458,my:.194}});return x(u,p,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(u,r,s={}){var p=N(u,r.width,r.height,8,{fill:P(r,d,s.stroke),stroke:P(r,d,s.stroke),strokeWidth:4});return p}};function S(u,r,s={},p){var h=Y(u),m=Jl(h),y=p||u;return h.get("eventDefinitions")&&h.get("eventDefinitions").length>1?h.get("parallelMultiple")?E["bpmn:ParallelMultipleEventDefinition"](r,y,s,m):E["bpmn:MultipleEventDefinition"](r,y,s,m):Le(h,"bpmn:MessageEventDefinition")?E["bpmn:MessageEventDefinition"](r,y,s,m):Le(h,"bpmn:TimerEventDefinition")?E["bpmn:TimerEventDefinition"](r,y,s,m):Le(h,"bpmn:ConditionalEventDefinition")?E["bpmn:ConditionalEventDefinition"](r,y,s,m):Le(h,"bpmn:SignalEventDefinition")?E["bpmn:SignalEventDefinition"](r,y,s,m):Le(h,"bpmn:EscalationEventDefinition")?E["bpmn:EscalationEventDefinition"](r,y,s,m):Le(h,"bpmn:LinkEventDefinition")?E["bpmn:LinkEventDefinition"](r,y,s,m):Le(h,"bpmn:ErrorEventDefinition")?E["bpmn:ErrorEventDefinition"](r,y,s,m):Le(h,"bpmn:CancelEventDefinition")?E["bpmn:CancelEventDefinition"](r,y,s,m):Le(h,"bpmn:CompensateEventDefinition")?E["bpmn:CompensateEventDefinition"](r,y,s,m):Le(h,"bpmn:TerminateEventDefinition")?E["bpmn:TerminateEventDefinition"](r,y,s,m):null}var T={ParticipantMultiplicityMarker:function(u,r,s={}){var p=De(r,s),h=Ae(r,s),m=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:p,containerHeight:h,position:{mx:(p/2-6)/p,my:(h-15)/h}});D("participant-multiplicity",u,m,{strokeWidth:2,fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)})},SubProcessMarker:function(u,r,s={}){var p=L(u,14,14,0,{strokeWidth:1,fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)});us(p,r.width/2-7.5,r.height-20);var h=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:r.width,containerHeight:r.height,position:{mx:(r.width/2-7.5)/r.width,my:(r.height-20)/r.height}});D("sub-process",u,h,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)})},ParallelMarker:function(u,r,s){var p=De(r,s),h=Ae(r,s),m=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:p,containerHeight:h,position:{mx:(p/2+s.parallel)/p,my:(h-20)/h}});D("parallel",u,m,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)})},SequentialMarker:function(u,r,s){var p=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:(r.width/2+s.seq)/r.width,my:(r.height-19)/r.height}});D("sequential",u,p,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)})},CompensationMarker:function(u,r,s){var p=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:(r.width/2+s.compensation)/r.width,my:(r.height-13)/r.height}});D("compensation",u,p,{strokeWidth:1,fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)})},LoopMarker:function(u,r,s){var p=De(r,s),h=Ae(r,s),m=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:p,containerHeight:h,position:{mx:(p/2+s.loop)/p,my:(h-7)/h}});D("loop",u,m,{strokeWidth:1.5,fill:"none",stroke:P(r,d,s.stroke),strokeMiterlimit:.5})},AdhocMarker:function(u,r,s){var p=De(r,s),h=Ae(r,s),m=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:p,containerHeight:h,position:{mx:(p/2+s.adhoc)/p,my:(h-15)/h}});D("adhoc",u,m,{strokeWidth:1,fill:P(r,d,s.stroke),stroke:P(r,d,s.stroke)})}};function A(u,r,s,p){T[u](r,s,p)}function M(u,r,s,p={}){p={fill:p.fill,stroke:p.stroke,width:De(r,p),height:Ae(r,p)};var h=Y(r),m=s&&s.includes("SubProcessMarker");m?p={...p,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:p={...p,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},q(s,function(I){A(I,u,r,p)}),h.get("isForCompensation")&&A("CompensationMarker",u,r,p),v(h,"bpmn:AdHocSubProcess")&&A("AdhocMarker",u,r,p);var y=h.get("loopCharacteristics"),C=y&&y.get("isSequential");y&&(C===void 0&&A("LoopMarker",u,r,p),C===!1&&A("ParallelMarker",u,r,p),C===!0&&A("SequentialMarker",u,r,p))}function R(u,r,s={}){s=ne({size:{width:100}},s);var p=a.createText(r||"",s);return cs(p).add("djs-label"),Ue(u,p),p}function U(u,r,s,p={}){var h=Y(r),m=qt({x:r.x,y:r.y,width:r.width,height:r.height},p);return R(u,h.name,{align:s,box:m,padding:7,style:{fill:Kt(r,f,d,p.stroke)}})}function he(u,r,s={}){var p={width:90,height:30,x:r.width/2+r.x,y:r.height/2+r.y};return R(u,Fn(r),{box:p,fitBox:!0,style:ne({},a.getExternalStyle(),{fill:Kt(r,f,d,s.stroke)})})}function H(u,r,s,p={}){var h=cr(s),m=R(u,r,{box:{height:30,width:h?Ae(s,p):De(s,p)},align:"center-middle",style:{fill:Kt(s,f,d,p.stroke)}});if(h){var y=-1*Ae(s,p);si(m,0,-y,270)}}function O(u,r,s={}){var{width:p,height:h}=qt(r,s);return L(u,p,h,Tn,{...s,fill:V(r,c,s.fill),fillOpacity:Ft,stroke:P(r,d,s.stroke)})}function re(u,r,s={}){var p=Y(r),h=V(r,c,s.fill),m=P(r,d,s.stroke);return(p.get("associationDirection")==="One"||p.get("associationDirection")==="Both")&&(s.markerEnd=z(u,"association-end",h,m)),p.get("associationDirection")==="Both"&&(s.markerStart=z(u,"association-start",h,m)),s=K(s,["markerStart","markerEnd"]),Ce(u,r.waypoints,{...s,stroke:m,strokeDasharray:"0, 5"})}function fe(u,r,s={}){var p=V(r,c,s.fill),h=P(r,d,s.stroke),m=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:.474,my:.296}}),y=x(u,m,{fill:p,fillOpacity:Ft,stroke:h}),C=Y(r);if(Ql(C)){var I=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:.33,my:(r.height-18)/r.height}});x(u,I,{strokeWidth:2,fill:p,stroke:h})}return y}function le(u,r,s={}){return N(u,r.width,r.height,{fillOpacity:Ft,...s,fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)})}function we(u,r,s={}){return J(u,r.width,r.height,{fill:V(r,c,s.fill),fillOpacity:Ft,stroke:P(r,d,s.stroke)})}function _(u,r,s={}){var p=L(u,De(r,s),Ae(r,s),0,{fill:V(r,c,s.fill),fillOpacity:s.fillOpacity||Ft,stroke:P(r,d,s.stroke),strokeWidth:1.5}),h=Y(r);if(v(h,"bpmn:Lane")){var m=h.get("name");H(u,m,r,s)}return p}function k(u,r,s={}){var p=O(u,r,s),h=yt(r);if(Vl(r)&&(Je(p,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),!h)){var m=Y(r).flowElements||[],y=m.filter(C=>v(C,"bpmn:StartEvent"));y.length===1&&F(y[0],u,s,r)}return U(u,r,h?"center-top":"center-middle",s),h?M(u,r,void 0,s):M(u,r,["SubProcessMarker"],s),p}function F(u,r,s,p){var h=22,m={fill:V(p,c,s.fill),stroke:P(p,d,s.stroke),width:h,height:h},y=Y(u).isInterrupting,C=y?0:3,I=y?1:1.2,oe=20,se=(h-oe)/2,ue="translate("+se+","+se+")";N(r,oe,oe,{fill:m.fill,stroke:m.stroke,strokeWidth:I,strokeDasharray:C,transform:ue}),S(u,r,m,p)}function ee(u,r,s={}){var p=O(u,r,s);return U(u,r,"center-middle",s),M(u,r,void 0,s),p}var _e=this.handlers={"bpmn:AdHocSubProcess":function(u,r,s={}){return yt(r)?s=K(s,["fill","stroke","width","height"]):s=K(s,["fill","stroke"]),k(u,r,s)},"bpmn:Association":function(u,r,s={}){return s=K(s,["fill","stroke"]),re(u,r,s)},"bpmn:BoundaryEvent":function(u,r,s={}){var{renderIcon:p=!0}=s;s=K(s,["fill","stroke"]);var h=Y(r),m=h.get("cancelActivity");s={strokeWidth:1.5,fill:V(r,c,s.fill),fillOpacity:ac,stroke:P(r,d,s.stroke)},m||(s.strokeDasharray="6");var y=le(u,r,s);return N(u,r.width,r.height,En,{...s,fill:"none"}),p&&S(r,u,s),y},"bpmn:BusinessRuleTask":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=ee(u,r,s),h=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),m=x(u,h);Je(m,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1});var y=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),C=x(u,y);return Je(C,{fill:P(r,d,s.stroke),stroke:P(r,d,s.stroke),strokeWidth:1}),p},"bpmn:CallActivity":function(u,r,s={}){return s=K(s,["fill","stroke"]),k(u,r,{strokeWidth:5,...s})},"bpmn:ComplexGateway":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=we(u,r,s),h=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:r.width,containerHeight:r.height,position:{mx:.46,my:.26}});return x(u,h,{fill:P(r,d,s.stroke),stroke:P(r,d,s.stroke),strokeWidth:1}),p},"bpmn:DataInput":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=i.getRawPath("DATA_ARROW"),h=fe(u,r,s);return x(u,p,{fill:"none",stroke:P(r,d,s.stroke),strokeWidth:1}),h},"bpmn:DataInputAssociation":function(u,r,s={}){return s=K(s,["fill","stroke"]),re(u,r,{...s,markerEnd:z(u,"association-end",V(r,c,s.fill),P(r,d,s.stroke))})},"bpmn:DataObject":function(u,r,s={}){return s=K(s,["fill","stroke"]),fe(u,r,s)},"bpmn:DataObjectReference":g("bpmn:DataObject"),"bpmn:DataOutput":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=i.getRawPath("DATA_ARROW"),h=fe(u,r,s);return x(u,p,{strokeWidth:1,fill:V(r,c,s.fill),stroke:P(r,d,s.stroke)}),h},"bpmn:DataOutputAssociation":function(u,r,s={}){return s=K(s,["fill","stroke"]),re(u,r,{...s,markerEnd:z(u,"association-end",V(r,c,s.fill),P(r,d,s.stroke))})},"bpmn:DataStoreReference":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:0,my:.133}});return x(u,p,{fill:V(r,c,s.fill),fillOpacity:Ft,stroke:P(r,d,s.stroke),strokeWidth:2})},"bpmn:EndEvent":function(u,r,s={}){var{renderIcon:p=!0}=s;s=K(s,["fill","stroke"]);var h=le(u,r,{...s,strokeWidth:4});return p&&S(r,u,s),h},"bpmn:EventBasedGateway":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=Y(r),h=we(u,r,s);N(u,r.width,r.height,r.height*.2,{fill:V(r,"none",s.fill),stroke:P(r,d,s.stroke),strokeWidth:1});var m=p.get("eventGatewayType"),y=!!p.get("instantiate");function C(){var oe=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:r.width,containerHeight:r.height,position:{mx:.36,my:.44}});x(u,oe,{fill:"none",stroke:P(r,d,s.stroke),strokeWidth:2})}if(m==="Parallel"){var I=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:r.width,containerHeight:r.height,position:{mx:.474,my:.296}});x(u,I,{fill:"none",stroke:P(r,d,s.stroke),strokeWidth:1})}else m==="Exclusive"&&(y||N(u,r.width,r.height,r.height*.26,{fill:"none",stroke:P(r,d,s.stroke),strokeWidth:1}),C());return h},"bpmn:ExclusiveGateway":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=we(u,r,s),h=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:r.width,containerHeight:r.height,position:{mx:.32,my:.3}}),m=ze(r);return m.get("isMarkerVisible")&&x(u,h,{fill:P(r,d,s.stroke),stroke:P(r,d,s.stroke),strokeWidth:1}),p},"bpmn:Gateway":function(u,r,s={}){return s=K(s,["fill","stroke"]),we(u,r,s)},"bpmn:Group":function(u,r,s={}){return s=K(s,["fill","stroke","width","height"]),L(u,r.width,r.height,Tn,{stroke:P(r,d,s.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:De(r,s),height:Ae(r,s)})},"bpmn:InclusiveGateway":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=we(u,r,s);return N(u,r.width,r.height,r.height*.24,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:2.5}),p},"bpmn:IntermediateEvent":function(u,r,s={}){var{renderIcon:p=!0}=s;s=K(s,["fill","stroke"]);var h=le(u,r,{...s,strokeWidth:1.5});return N(u,r.width,r.height,En,{fill:"none",stroke:P(r,d,s.stroke),strokeWidth:1.5}),p&&S(r,u,s),h},"bpmn:IntermediateCatchEvent":g("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":g("bpmn:IntermediateEvent"),"bpmn:Lane":function(u,r,s={}){return s=K(s,["fill","stroke","width","height"]),_(u,r,{...s,fillOpacity:lc})},"bpmn:ManualTask":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=ee(u,r,s),h=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return x(u,h,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:.5}),p},"bpmn:MessageFlow":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=Y(r),h=ze(r),m=V(r,c,s.fill),y=P(r,d,s.stroke),C=Ce(u,r.waypoints,{markerEnd:z(u,"messageflow-end",m,y),markerStart:z(u,"messageflow-start",m,y),stroke:y,strokeDasharray:"10, 11",strokeWidth:1.5});if(p.get("messageRef")){var I=C.getPointAtLength(C.getTotalLength()/2),oe=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:I.x,y:I.y}}),se={strokeWidth:1};h.get("messageVisibleKind")==="initiating"?(se.fill=m,se.stroke=y):(se.fill=y,se.stroke=m);var ue=x(u,oe,se),Q=p.get("messageRef"),X=Q.get("name"),We=R(u,X,{align:"center-top",fitBox:!0,style:{fill:y}}),gn=ue.getBBox(),Re=We.getBBox(),$=I.x-Re.width/2,te=I.y+gn.height/2+oc;si(We,$,te,0)}return C},"bpmn:ParallelGateway":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=we(u,r,s),h=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:r.width,containerHeight:r.height,position:{mx:.46,my:.2}});return x(u,h,{fill:P(r,d,s.stroke),stroke:P(r,d,s.stroke),strokeWidth:1}),p},"bpmn:Participant":function(u,r,s={}){s=K(s,["fill","stroke","width","height"]);var p=_(u,r,s),h=yt(r),m=cr(r),y=Y(r),C=y.get("name");if(h){var I=m?[{x:30,y:0},{x:30,y:Ae(r,s)}]:[{x:0,y:30},{x:De(r,s),y:30}];G(u,I,{stroke:P(r,d,s.stroke),strokeWidth:sc}),H(u,C,r,s)}else{var oe=qt(r,s);m||(oe.height=De(r,s),oe.width=Ae(r,s));var se=R(u,C,{box:oe,align:"center-middle",style:{fill:Kt(r,f,d,s.stroke)}});if(!m){var ue=-1*Ae(r,s);si(se,0,-ue,270)}}return y.get("participantMultiplicity")&&A("ParticipantMultiplicityMarker",u,r,s),p},"bpmn:ReceiveTask":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=Y(r),h=ee(u,r,s),m;return p.get("instantiate")?(N(u,28,28,20*.22,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1}),m=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):m=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),x(u,m,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1}),h},"bpmn:ScriptTask":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=ee(u,r,s),h=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return x(u,h,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1}),p},"bpmn:SendTask":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=ee(u,r,s),h=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return x(u,h,{fill:P(r,d,s.stroke),stroke:V(r,c,s.fill),strokeWidth:1}),p},"bpmn:SequenceFlow":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=V(r,c,s.fill),h=P(r,d,s.stroke),m=Ce(u,r.waypoints,{markerEnd:z(u,"sequenceflow-end",p,h),stroke:h}),y=Y(r),{source:C}=r;if(C){var I=Y(C);y.get("conditionExpression")&&v(I,"bpmn:Activity")&&Je(m,{markerStart:z(u,"conditional-flow-marker",p,h)}),I.get("default")&&(v(I,"bpmn:Gateway")||v(I,"bpmn:Activity"))&&I.get("default")===y&&Je(m,{markerStart:z(u,"conditional-default-flow-marker",p,h)})}return m},"bpmn:ServiceTask":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=ee(u,r,s);N(u,10,10,{fill:V(r,c,s.fill),stroke:"none",transform:"translate(6, 6)"});var h=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});x(u,h,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1}),N(u,10,10,{fill:V(r,c,s.fill),stroke:"none",transform:"translate(11, 10)"});var m=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return x(u,m,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:1}),p},"bpmn:StartEvent":function(u,r,s={}){var{renderIcon:p=!0}=s;s=K(s,["fill","stroke"]);var h=Y(r);h.get("isInterrupting")||(s={...s,strokeDasharray:"6"});var m=le(u,r,s);return p&&S(r,u,s),m},"bpmn:SubProcess":function(u,r,s={}){return yt(r)?s=K(s,["fill","stroke","width","height"]):s=K(s,["fill","stroke"]),k(u,r,s)},"bpmn:Task":function(u,r,s={}){return s=K(s,["fill","stroke"]),ee(u,r,s)},"bpmn:TextAnnotation":function(u,r,s={}){s=K(s,["fill","stroke","width","height"]);var{width:p,height:h}=qt(r,s),m=L(u,p,h,0,0,{fill:"none",stroke:"none"}),y=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:p,containerHeight:h,position:{mx:0,my:0}});x(u,y,{stroke:P(r,d,s.stroke)});var C=Y(r),I=C.get("text")||"";return R(u,I,{align:"left-top",box:qt(r,s),padding:7,style:{fill:Kt(r,f,d,s.stroke)}}),m},"bpmn:Transaction":function(u,r,s={}){yt(r)?s=K(s,["fill","stroke","width","height"]):s=K(s,["fill","stroke"]);var p=k(u,r,{strokeWidth:1.5,...s}),h=n.style(["no-fill","no-events"],{stroke:P(r,d,s.stroke),strokeWidth:1.5}),m=yt(r);return m||(s={}),L(u,De(r,s),Ae(r,s),Tn-En,En,h),p},"bpmn:UserTask":function(u,r,s={}){s=K(s,["fill","stroke"]);var p=ee(u,r,s),h=15,m=12,y=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:h,y:m}});x(u,y,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:.5});var C=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:h,y:m}});x(u,C,{fill:V(r,c,s.fill),stroke:P(r,d,s.stroke),strokeWidth:.5});var I=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:h,y:m}});return x(u,I,{fill:P(r,d,s.stroke),stroke:P(r,d,s.stroke),strokeWidth:.5}),p},label:function(u,r,s={}){return he(u,r,s)}};this._drawPath=x,this._renderer=B}rt(Pt,Nr);Pt.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Pt.prototype.canRender=function(e){return v(e,"bpmn:BaseElement")};Pt.prototype.drawShape=function(e,t,n={}){var{type:i}=t,o=this._renderer(i);return o(e,t,n)};Pt.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,o=this._renderer(i);return o(e,t,n)};Pt.prototype.getShapePath=function(e){return v(e,"bpmn:Event")?ec(e):v(e,"bpmn:Activity")?tc(e,Tn):v(e,"bpmn:Gateway")?nc(e):ic(e)};function K(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var cc=12,pc=1.2,uc=30;function _o(e){var t=ne({fontFamily:"Arial, sans-serif",fontSize:cc,fontWeight:"normal",lineHeight:pc},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=ne({},t,{fontSize:n},e&&e.externalStyle||{}),o=new ds({style:t});this.getExternalLabelBounds=function(a,l){var c=o.getDimensions(l,{box:{width:90,height:30},style:i});return{x:Math.round(a.x+a.width/2-c.width/2),y:Math.round(a.y),width:Math.ceil(c.width),height:Math.ceil(c.height)}},this.getTextAnnotationBounds=function(a,l){var c=o.getDimensions(l,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(uc,Math.round(c.height))}},this.createText=function(a,l){return o.createText(a,l||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}_o.$inject=["config.textRenderer"];function dc(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],o,a;n.abspos?(o=n.abspos.x,a=n.abspos.y):(o=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var l={};if(n.position){for(var c=n.containerHeight/i.height*n.yScaleFactor,d=n.containerWidth/i.width*n.xScaleFactor,f=0;f<i.heightElements.length;f++)l["y"+f]=i.heightElements[f]*c;for(var b=0;b<i.widthElements.length;b++)l["x"+b]=i.widthElements[b]*d}var w=yc(i.d,{mx:o,my:a,e:l});return w}}var hc=/\{([^{}]+)\}/g,fc=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function mc(e,t,n){var i=n;return t.replace(fc,function(o,a,l,c,d){a=a||c,i&&(a in i&&(i=i[a]),typeof i=="function"&&d&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function yc(e,t){return String(e).replace(hc,function(n,i){return mc(n,i,t)})}const gc={__init__:["bpmnRenderer"],bpmnRenderer:["type",Pt],textRenderer:["type",_o],pathMap:["type",dc]};function me(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function Rn(e,t,n){return ne({id:e.id,type:e.$type,businessObject:e,di:t},n)}function vc(e,t,n){var i=e.waypoint;return!i||i.length<2?[ui(t),ui(n)]:i.map(function(o){return{x:o.x,y:o.y}})}function xo(e,t,n){return new Error(`element ${me(t)} referenced by ${me(e)}#${n} not yet drawn`)}function Ze(e,t,n,i,o){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=o}Ze.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];Ze.prototype.add=function(e,t,n){var i,o,a;if(v(t,"bpmndi:BPMNPlane")){var l=v(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(Rn(e,t,l)),this._canvas.addRootElement(i)}else if(v(t,"bpmndi:BPMNShape")){var c=!yt(e,t),d=Ec(e);o=n&&(n.hidden||n.collapsed);var f=t.bounds;i=this._elementFactory.createShape(Rn(e,t,{collapsed:c,hidden:o,x:Math.round(f.x),y:Math.round(f.y),width:Math.round(f.width),height:Math.round(f.height),isFrame:d})),v(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),v(e,"bpmn:Lane")&&(a=0),v(e,"bpmn:DataStoreReference")&&(bc(n,ui(f))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,a)}else if(v(t,"bpmndi:BPMNEdge")){var b=this._getSource(e),w=this._getTarget(e);o=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(Rn(e,t,{hidden:o,source:b,target:w,waypoints:vc(t,b,w)})),v(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,a)}else throw new Error(`unknown di ${me(t)} for element ${me(e)}`);return Wl(e)&&Fn(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Ze.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${me(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),o=i&&i.attachers;if(!i)throw xo(e,n,"attachedToRef");t.host=i,o||(i.attachers=o=[]),o.indexOf(t)===-1&&o.push(t)};Ze.prototype.addLabel=function(e,t,n){var i,o,a;return i=Kl(t,n),o=Fn(n),o&&(i=this._textRenderer.getExternalLabelBounds(i,o)),a=this._elementFactory.createLabel(Rn(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Fn(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(a,n.parent)};Ze.prototype._getConnectedElement=function(e,t){var n,i,o=e.$type;if(i=e[t+"Ref"],t==="source"&&o==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&o==="bpmn:DataOutputAssociation"||t==="target"&&o==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?xo(e,i,t+"Ref"):new Error(`${me(e)}#${t} Ref not specified`)};Ze.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Ze.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Ze.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function bc(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Ec(e){return v(e,"bpmn:Group")}const wc={__depends__:[Br],bpmnImporter:["type",Ze]},_c={__depends__:[gc,wc]};function So(e,t,n,i){e.on("element.changed",function(o){var a=o.element;(a.parent||a===t.getRootElement())&&(o.gfx=n.getGraphics(a)),o.gfx&&e.fire(hs(a)+".changed",o)}),e.on("elements.changed",function(o){var a=o.elements;a.forEach(function(l){e.fire("element.changed",{element:l})}),i.updateContainments(a)}),e.on("shape.changed",function(o){i.update("shape",o.element,o.gfx)}),e.on("connection.changed",function(o){i.update("connection",o.element,o.gfx)})}So.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const xc={__init__:["changeSupport"],changeSupport:["type",So]};function zi(e,t){t.invoke(jn,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}rt(zi,jn);zi.$inject=["canvas","injector"];const Sc={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",zi]};var kc="bjs-breadcrumbs-shown";function ko(e,t,n){var i=ce('<ul class="bjs-breadcrumbs"></ul>'),o=n.getContainer(),a=Z(o);o.appendChild(i);var l=[];e.on("element.changed",function(d){var f=d.element,b=Y(f),w=tt(l,function(j){return j===b});w&&c()});function c(d){d&&(l=Cc(d));var f=l.flatMap(function(w){var j=n.findRoot(Vn(w))||n.findRoot(w.id);if(!j&&v(w,"bpmn:Process")){var z=t.find(function(L){var J=Y(L);return J&&J.get("processRef")===w});j=z&&n.findRoot(z.id)}if(!j)return[];var ie=vo(w.name||w.id),N=ce('<li><span class="bjs-crumb"><a title="'+ie+'">'+ie+"</a></span></li>");return N.addEventListener("click",function(){n.setRootElement(j)}),N});i.innerHTML="";var b=f.length>1;a.toggle(kc,b),f.forEach(function(w){i.appendChild(w)})}e.on("root.set",function(d){c(d.element)})}ko.$inject=["eventBus","elementRegistry","canvas"];function Cc(e){for(var t=Y(e),n=[],i=t;i;i=i.$parent)(v(i,"bpmn:SubProcess")||v(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function Co(e,t){var n=null,i=new Ac;e.on("root.set",function(o){var a=o.element,l=t.viewbox(),c=i.get(a);if(i.set(n,{x:l.x,y:l.y,zoom:l.scale}),n=a,!(!v(a,"bpmn:SubProcess")&&!c)){c=c||{x:0,y:0,zoom:1};var d=(l.x-c.x)*l.scale,f=(l.y-c.y)*l.scale;(d!==0||f!==0)&&t.scroll({dx:d,dy:f}),c.zoom!==l.scale&&t.zoom(c.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}Co.$inject=["eventBus","canvas"];function Ac(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var ur={x:180,y:160};function Mt(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,o){n._handleImport(o.definitions)})}Mt.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Mt.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(a){var l=a.bpmnElement;if(l){var c=l.$parent;v(l,"bpmn:SubProcess")&&!a.isExpanded&&n.push(l),Rc(l,e)&&i.push({diElement:a,parent:c})}});var o=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var l=t._createDiagram(a);t._processToDiagramMap[a.id]=l,o.push(l)}}),i.forEach(function(a){for(var l=a.diElement,c=a.parent;c&&n.indexOf(c)===-1;)c=c.$parent;if(c){var d=t._processToDiagramMap[c.id];t._moveToDiPlane(l,d.plane)}}),o};Mt.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=Tc(e),i={x:n.x-ur.x,y:n.y-ur.y};t.forEach(function(o){o.waypoint?o.waypoint.forEach(function(a){a.x=a.x-i.x,a.y=a.y-i.y}):o.bounds&&(o.bounds.x=o.bounds.x-i.x,o.bounds.y=o.bounds.y-i.y)})};Mt.prototype._moveToDiPlane=function(e,t){var n=Ao(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Mt.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Mt.$inject=["eventBus","moddle"];function Ao(e){return v(e,"bpmndi:BPMNDiagram")?e:Ao(e.$parent)}function Tc(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=fs(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),ms(t)}function Rc(e,t){var n=e.$parent;return!(!v(n,"bpmn:SubProcess")||n===t.bpmnElement||Et(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var wn=250,Pc='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',Mc="bjs-drilldown-empty";function ut(e,t,n,i,o){jn.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=o;var a=this;this.executed("shape.toggleCollapse",wn,function(l){var c=l.shape;a._canDrillDown(c)?a._addOverlay(c):a._removeOverlay(c)},!0),this.reverted("shape.toggleCollapse",wn,function(l){var c=l.shape;a._canDrillDown(c)?a._addOverlay(c):a._removeOverlay(c)},!0),this.executed(["shape.create","shape.move","shape.delete"],wn,function(l){var c=l.oldParent,d=l.newParent||l.parent,f=l.shape;a._canDrillDown(f)&&a._addOverlay(f),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(d),a._updateDrilldownOverlay(f)},!0),this.reverted(["shape.create","shape.move","shape.delete"],wn,function(l){var c=l.oldParent,d=l.newParent||l.parent,f=l.shape;a._canDrillDown(f)&&a._addOverlay(f),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(d),a._updateDrilldownOverlay(f)},!0),t.on("import.render.complete",function(){n.filter(function(l){return a._canDrillDown(l)}).map(function(l){a._addOverlay(l)})})}rt(ut,jn);ut.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};ut.prototype._canDrillDown=function(e){var t=this._canvas;return v(e,"bpmn:SubProcess")&&t.findRoot(Vn(e))};ut.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=Y(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var o=n&&n.get("flowElements")&&n.get("flowElements").length;Z(i.html).toggle(Mc,!o)}};ut.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=Y(e),o=n.get({element:e,type:"drilldown"});o.length&&this._removeOverlay(e);var a=ce('<button type="button" class="bjs-drilldown">'+Pc+"</button>"),l=i.get("name")||i.get("id"),c=this._translate("Open {element}",{element:l});a.setAttribute("title",c),a.addEventListener("click",function(){t.setRootElement(t.findRoot(Vn(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:a}),this._updateOverlayVisibility(e)};ut.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};ut.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const Dc={__depends__:[Ir,xc,Sc],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",ko],drilldownCentering:["type",Co],drilldownOverlayBehavior:["type",ut],subprocessCompatibility:["type",Mt]};function Fc(){return/mac/i.test(navigator.platform)}function Hi(){}Hi.prototype.get=function(e){return this.$model.properties.get(this,e)};Hi.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function To(e,t){this.model=e,this.properties=t}To.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Hi.prototype);q(e.properties,function(l){!l.isMany&&l.default!==void 0&&(i[l.name]=l.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var o=e.ns.name;function a(l){n.define(this,"$type",{value:o,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),q(l,bt(function(c,d){this.set(d,c)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var Nc={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Ro={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Vi(e,t){var n=Ro[e];return n?n(t):t}function Ei(e){return!!Nc[e]}function Po(e){return!!Ro[e]}function ye(e,t){var n=e.split(/:/),i,o;if(n.length===1)i=e,o=t;else if(n.length===2)i=n[1],o=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(o?o+":":"")+i,{name:e,prefix:o,localName:i}}function Me(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}Me.prototype.build=function(){return gs(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};Me.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};Me.prototype.replaceProperty=function(e,t,n){var i=e.ns,o=this.properties,a=this.propertiesByName,l=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var c=o.indexOf(e);if(c===-1)throw new Error("property <"+i.name+"> not found in property list");o.splice(c,1),this.addProperty(t,n?void 0:c,l),a[i.name]=a[i.localName]=t};Me.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,o=t.split("#"),a=ye(o[0],i),l=ye(o[1],a.prefix).name,c=this.propertiesByName[l];if(c)this.replaceProperty(c,e,n);else throw new Error("refined property <"+l+"> not found");delete e.redefines};Me.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};Me.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};Me.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};Me.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};Me.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};Me.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};Me.prototype.hasProperty=function(e){return this.propertiesByName[e]};Me.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,o=e.name;o in n||(q(e.properties,bt(function(a){a=ne({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var l=a.replaces,c=a.redefines;l||c?this.redefineProperty(a,l||c,l):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[o]=e)};function dt(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,q(e,bt(this.registerPackage,this))}dt.prototype.getPackage=function(e){return this.packageMap[e]};dt.prototype.getPackages=function(){return this.packages};dt.prototype.registerPackage=function(e){e=ne({},e);var t=this.packageMap;dr(t,e,"prefix"),dr(t,e,"uri"),q(e.types,bt(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};dt.prototype.registerType=function(e,t){e=ne({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:ne(e.meta||{})});var n=ye(e.name,t.prefix),i=n.name,o={};q(e.properties,bt(function(a){var l=ye(a.name,n.prefix),c=l.name;Ei(a.type)||(a.type=ye(a.type,l.prefix).name),ne(a,{ns:l,name:c}),o[c]=a},this)),ne(e,{ns:n,name:i,propertiesByName:o}),q(e.extends,bt(function(a){var l=ye(a,n.prefix),c=this.typeMap[l.name];c.traits=c.traits||[],c.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};dt.prototype.mapTypes=function(e,t,n){var i=Ei(e.name)?{name:e.name}:this.typeMap[e.name],o=this;function a(d,f){var b=ye(d,Ei(d)?"":e.prefix);o.mapTypes(b,t,f)}function l(d){return a(d,!0)}function c(d){return a(d,!1)}if(!i)throw new Error("unknown type <"+e.name+">");q(i.superClass,n?l:c),t(i,!n),q(i.traits,l)};dt.prototype.getEffectiveDescriptor=function(e){var t=ye(e),n=new Me(t);this.mapTypes(t,function(o,a){n.addTrait(o,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};dt.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function dr(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Dt(e){this.model=e}Dt.prototype.set=function(e,t,n){if(!xt(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),o=i&&i.name;Bc(n)?i?delete e[o]:delete e.$attrs[wi(t)]:i?o in e?e[o]=n:Mo(e,i,n):e.$attrs[wi(t)]=n};Dt.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[wi(t)];var i=n.name;return!e[i]&&n.isMany&&Mo(e,n,[]),e[i]};Dt.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=ne({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Dt.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Dt.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Dt.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const o=n.config.strict;if(typeof o<"u"){const a=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(o)throw a;typeof console<"u"&&console.warn(a)}return null};function Bc(e){return typeof e>"u"}function Mo(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function wi(e){return e.replace(/^:/,"")}function Ie(e,t={}){this.properties=new Dt(this),this.factory=new To(this,this.properties),this.registry=new dt(e,this.properties),this.typeCache={},this.config=t}Ie.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Ie.prototype.getType=function(e){var t=this.typeCache,n=xt(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};Ie.prototype.createAny=function(e,t,n){var i=ye(e),o={$type:e,$instanceOf:function(l){return l===this.$type},get:function(l){return this[l]},set:function(l,c){ys(this,[l],c)}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(o,a),this.properties.defineModel(o,this),this.properties.define(o,"get",{enumerable:!1,writable:!0}),this.properties.define(o,"set",{enumerable:!1,writable:!0}),this.properties.define(o,"$parent",{enumerable:!1,writable:!0}),this.properties.define(o,"$instanceOf",{enumerable:!1,writable:!0}),q(n,function(l,c){pi(l)&&l.value!==void 0?o[l.name]=l.value:o[c]=l}),o};Ie.prototype.getPackage=function(e){return this.registry.getPackage(e)};Ie.prototype.getPackages=function(){return this.registry.getPackages()};Ie.prototype.getElementDescriptor=function(e){return e.$descriptor};Ie.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Ie.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Ie.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var hr=String.fromCharCode,Ic=Object.prototype.hasOwnProperty,jc=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Jt={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Jt).forEach(function(e){Jt[e.toUpperCase()]=Jt[e]});function Lc(e,t,n,i){return i?Ic.call(Jt,i)?Jt[i]:"&"+i+";":hr(t||parseInt(n,16))}function mt(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(jc,Lc):e}var fr="non-whitespace outside of root node";function Nt(e){return new Error(e)}function mr(e){return"missing namespace for prefix <"+e+">"}function _n(e){return{get:e,enumerable:!0}}function Oc(e){var t={},n;for(n in e)t[n]=e[n];return t}function _i(e){return e+"$uri"}function $c(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[_i(i)]=n;return t}function yr(){return{line:0,column:0}}function zc(e){throw e}function Do(e){if(!this)return new Do(e);var t=e&&e.proxy,n,i,o,a,l=zc,c,d,f,b,w=yr,j=!1,z=!1,ie=null,N=!1,L;function J(x){x instanceof Error||(x=Nt(x)),ie=x,l(x,w)}function G(x){c&&(x instanceof Error||(x=Nt(x)),c(x,w))}this.on=function(x,D){if(typeof D!="function")throw Nt("required args <name, cb>");switch(x){case"openTag":i=D;break;case"text":n=D;break;case"closeTag":o=D;break;case"error":l=D;break;case"warn":c=D;break;case"cdata":a=D;break;case"attention":b=D;break;case"question":f=D;break;case"comment":d=D;break;default:throw Nt("unsupported event: "+x)}return this},this.ns=function(x){if(typeof x>"u"&&(x={}),typeof x!="object")throw Nt("required args <nsMap={}>");var D={},B;for(B in x)D[B]=x[B];return z=!0,L=D,this},this.parse=function(x){if(typeof x!="string")throw Nt("required args <xml=string>");return ie=null,Ce(x),w=yr,N=!1,ie},this.stop=function(){N=!0};function Ce(x){var D=z?[]:null,B=z?$c(L):null,g,E=[],S=0,T=!1,A=!1,M=0,R=0,U,he,H,O,re,fe,le,we,_,k="",F=0,ee;function _e(){if(ee!==null)return ee;var r,s,p,h=z&&B.xmlns,m=z&&j?[]:null,y=F,C=k,I=C.length,oe,se,ue,Q,X,We={},gn={},Re,$,te;e:for(;y<I;y++)if(Re=!1,$=C.charCodeAt(y),!($===32||$<14&&$>8)){for(($<65||$>122||$>90&&$<97)&&$!==95&&$!==58&&(G("illegal first char attribute name"),Re=!0),te=y+1;te<I;te++)if($=C.charCodeAt(te),!($>96&&$<123||$>64&&$<91||$>47&&$<59||$===46||$===45||$===95)){if($===32||$<14&&$>8){G("missing attribute value"),y=te;continue e}if($===61)break;G("illegal attribute name char"),Re=!0}if(X=C.substring(y,te),X==="xmlns:xmlns"&&(G("illegal declaration of xmlns"),Re=!0),$=C.charCodeAt(te+1),$===34)te=C.indexOf('"',y=te+2),te===-1&&(te=C.indexOf("'",y),te!==-1&&(G("attribute value quote missmatch"),Re=!0));else if($===39)te=C.indexOf("'",y=te+2),te===-1&&(te=C.indexOf('"',y),te!==-1&&(G("attribute value quote missmatch"),Re=!0));else for(G("missing attribute value quotes"),Re=!0,te=te+1;te<I&&($=C.charCodeAt(te+1),!($===32||$<14&&$>8));te++);for(te===-1&&(G("missing closing quotes"),te=I,Re=!0),Re||(ue=C.substring(y,te)),y=te;te+1<I&&($=C.charCodeAt(te+1),!($===32||$<14&&$>8));te++)y===te&&(G("illegal character after attribute end"),Re=!0);if(y=te+1,Re)continue e;if(X in gn){G("attribute <"+X+"> already defined");continue}if(gn[X]=!0,!z){We[X]=ue;continue}if(j){if(se=X==="xmlns"?"xmlns":X.charCodeAt(0)===120&&X.substr(0,6)==="xmlns:"?X.substr(6):null,se!==null){if(r=mt(ue),s=_i(se),Q=L[r],!Q){if(se==="xmlns"||s in B&&B[s]!==r)do Q="ns"+S++;while(typeof B[Q]<"u");else Q=se;L[r]=Q}B[se]!==Q&&(oe||(B=Oc(B),oe=!0),B[se]=Q,se==="xmlns"&&(B[_i(Q)]=r,h=Q),B[s]=r),We[X]=ue;continue}m.push(X,ue);continue}if($=X.indexOf(":"),$===-1){We[X]=ue;continue}if(!(p=B[X.substring(0,$)])){G(mr(X.substring(0,$)));continue}X=h===p?X.substr($+1):p+X.substr($),We[X]=ue}if(j)for(y=0,I=m.length;y<I;y++){if(X=m[y++],ue=m[y],$=X.indexOf(":"),$!==-1){if(!(p=B[X.substring(0,$)])){G(mr(X.substring(0,$)));continue}X=h===p?X.substr($+1):p+X.substr($)}We[X]=ue}return ee=We}function u(){for(var r=/(\r\n|\r|\n)/g,s=0,p=0,h=0,m=R,y,C;M>=h&&(y=r.exec(x),!(!y||(m=y[0].length+y.index,m>M)));)s+=1,h=m;return M==-1?(p=m,C=x.substring(R)):R===0?C=x.substring(R,M):(p=M-h,C=R==-1?x.substring(M):x.substring(M,R+1)),{data:C,line:s,column:p}}for(w=u,t&&(_=Object.create({},{name:_n(function(){return le}),originalName:_n(function(){return we}),attrs:_n(_e),ns:_n(function(){return B})}));R!==-1;){if(x.charCodeAt(R)===60?M=R:M=x.indexOf("<",R),M===-1){if(E.length)return J("unexpected end of file");if(R===0)return J("missing start tag");R<x.length&&x.substring(R).trim()&&G(fr);return}if(R!==M){if(E.length){if(n&&(n(x.substring(R,M),mt,w),N))return}else if(x.substring(R,M).trim()&&(G(fr),N))return}if(O=x.charCodeAt(M+1),O===33){if(H=x.charCodeAt(M+2),H===91&&x.substr(M+3,6)==="CDATA["){if(R=x.indexOf("]]>",M),R===-1)return J("unclosed cdata");if(a&&(a(x.substring(M+9,R),w),N))return;R+=3;continue}if(H===45&&x.charCodeAt(M+3)===45){if(R=x.indexOf("-->",M),R===-1)return J("unclosed comment");if(d&&(d(x.substring(M+4,R),mt,w),N))return;R+=3;continue}}if(O===63){if(R=x.indexOf("?>",M),R===-1)return J("unclosed question");if(f&&(f(x.substring(M,R+2),w),N))return;R+=2;continue}for(U=M+1;;U++){if(re=x.charCodeAt(U),isNaN(re))return R=-1,J("unclosed tag");if(re===34)H=x.indexOf('"',U+1),U=H!==-1?H:U;else if(re===39)H=x.indexOf("'",U+1),U=H!==-1?H:U;else if(re===62){R=U;break}}if(O===33){if(b&&(b(x.substring(M,R+1),mt,w),N))return;R+=1;continue}if(ee={},O===47){if(T=!1,A=!0,!E.length)return J("missing open tag");if(U=le=E.pop(),H=M+2+U.length,x.substring(M+2,H)!==U)return J("closing tag mismatch");for(;H<R;H++)if(O=x.charCodeAt(H),!(O===32||O>8&&O<14))return J("close tag")}else{if(x.charCodeAt(R-1)===47?(U=le=x.substring(M+1,R-1),T=!0,A=!0):(U=le=x.substring(M+1,R),T=!0,A=!1),!(O>96&&O<123||O>64&&O<91||O===95||O===58))return J("illegal first char nodeName");for(H=1,he=U.length;H<he;H++)if(O=U.charCodeAt(H),!(O>96&&O<123||O>64&&O<91||O>47&&O<59||O===45||O===95||O==46)){if(O===32||O<14&&O>8){le=U.substring(0,H),ee=null;break}return J("invalid nodeName")}A||E.push(le)}if(z){if(g=B,T&&(A||D.push(g),ee===null&&(j=U.indexOf("xmlns",H)!==-1)&&(F=H,k=U,_e(),j=!1)),we=le,O=le.indexOf(":"),O!==-1){if(fe=B[le.substring(0,O)],!fe)return J("missing namespace on <"+we+">");le=le.substr(O+1)}else fe=B.xmlns;fe&&(le=fe+":"+le)}if(T&&(F=H,k=U,i&&(t?i(_,mt,A,w):i(le,_e,mt,A,w),N)))return;if(A){if(o&&(o(t?_:le,mt,T,w),N))return;z&&(T?B=g:B=D.pop())}R+=1}}}function Fo(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var xi={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},No="property";function Bo(e){return e.xml&&e.xml.serialize}function Hc(e){const t=Bo(e);return t!==No&&(t||null)}function Vc(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Io(e,t){return Fo(t)?e.prefix+":"+Vc(e.localName):e.name}function Wc(e,t){var n=e.name,i=e.localName,o=t&&t.xml&&t.xml.typePrefix;return o&&i.indexOf(o)===0?e.prefix+":"+i.slice(o.length):n}function Uc(e,t,n){const i=ye(e,t.xmlns),o=`${t[i.prefix]||i.prefix}:${i.localName}`,a=ye(o);var l=n.getPackage(a.prefix);return Wc(a,l)}function it(e){return new Error(e)}function Ge(e){return e.$descriptor}function Gc(e){ne(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw it("expected element");var n=this.elementsById,i=Ge(t),o=i.idProperty,a;if(o&&(a=t.get(o.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw it("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function mn(){}mn.prototype.handleEnd=function(){};mn.prototype.handleText=function(){};mn.prototype.handleNode=function(){};function Wi(){}Wi.prototype=Object.create(mn.prototype);Wi.prototype.handleNode=function(){return this};function Ut(){}Ut.prototype=Object.create(mn.prototype);Ut.prototype.handleText=function(e){this.body=(this.body||"")+e};function yn(e,t){this.property=e,this.context=t}yn.prototype=Object.create(Ut.prototype);yn.prototype.handleNode=function(e){if(this.element)throw it("expected no sub nodes");return this.element=this.createReference(e),this};yn.prototype.handleEnd=function(){this.element.id=this.body};yn.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Ui(e,t){this.element=t,this.propertyDesc=e}Ui.prototype=Object.create(Ut.prototype);Ui.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Vi(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function ti(){}ti.prototype=Object.create(Ut.prototype);ti.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function ve(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}ve.prototype=Object.create(ti.prototype);ve.prototype.addReference=function(e){this.context.addReference(e)};ve.prototype.handleText=function(e){var t=this.element,n=Ge(t),i=n.bodyProperty;if(!i)throw it("unexpected body text <"+e+">");Ut.prototype.handleText.call(this,e)};ve.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Ge(t),i=n.bodyProperty;i&&e!==void 0&&(e=Vi(i.type,e),t.set(i.name,e))};ve.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Ge(n),o=this.context,a=new n({}),l=this.model,c;return q(t,function(d,f){var b=i.propertiesByName[f],w;b&&b.isReference?b.isMany?(w=d.split(" "),q(w,function(j){o.addReference({element:a,property:b.ns.name,id:j})})):o.addReference({element:a,property:b.ns.name,id:d}):(b?d=Vi(b.type,d):f==="xmlns"?f=":"+f:(c=ye(f,i.ns.prefix),l.getPackage(c.prefix)&&o.addWarning({message:"unknown attribute <"+f+">",element:a,property:f,value:d})),a.set(f,d))}),a};ve.prototype.getPropertyForNode=function(e){var t=e.name,n=ye(t),i=this.type,o=this.model,a=Ge(i),l=n.name,c=a.propertiesByName[l];if(c&&!c.isAttr){const f=Hc(c);if(f){const b=e.attributes[f];if(b){const w=Uc(b,e.ns,o),j=o.getType(w);return ne({},c,{effectiveType:Ge(j).name})}}return c}var d=o.getPackage(n.prefix);if(d){const f=Io(n,d),b=o.getType(f);if(c=tt(a.properties,function(w){return!w.isVirtual&&!w.isReference&&!w.isAttribute&&b.hasType(w.type)}),c)return ne({},c,{effectiveType:Ge(b).name})}else if(c=tt(a.properties,function(f){return!f.isReference&&!f.isAttribute&&f.type==="Element"}),c)return c;throw it("unrecognized element <"+n.name+">")};ve.prototype.toString=function(){return"ElementDescriptor["+Ge(this.type).name+"]"};ve.prototype.valueHandler=function(e,t){return new Ui(e,t)};ve.prototype.referenceHandler=function(e){return new yn(e,this.context)};ve.prototype.handler=function(e){return e==="Element"?new Lt(this.model,e,this.context):new ve(this.model,e,this.context)};ve.prototype.handleChild=function(e){var t,n,i,o;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,Po(n))return this.valueHandler(t,i);t.isReference?o=this.referenceHandler(t).handleNode(e):o=this.handler(n).handleNode(e);var a=o.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(ne(a,{element:i}),this.context.addReference(a)):a.$parent=i),o};function Gi(e,t,n){ve.call(this,e,t,n)}Gi.prototype=Object.create(ve.prototype);Gi.prototype.createElement=function(e){var t=e.name,n=ye(t),i=this.model,o=this.type,a=i.getPackage(n.prefix),l=a&&Io(n,a)||t;if(!o.hasType(l))throw it("unexpected element <"+e.originalName+">");return ve.prototype.createElement.call(this,e)};function Lt(e,t,n){this.model=e,this.context=n}Lt.prototype=Object.create(ti.prototype);Lt.prototype.createElement=function(e){var t=e.name,n=ye(t),i=n.prefix,o=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,o,a)};Lt.prototype.handleChild=function(e){var t=new Lt(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,o;return i!==void 0&&(o=n.$children=n.$children||[],o.push(i),i.$parent=n),t};Lt.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Yi(e){e instanceof Ie&&(e={model:e}),ne(this,{lax:!1},e)}Yi.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof ve?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var o=this.model,a=this.lax,l=new Gc(ne({},t,{rootHandler:i})),c=new Do({proxy:!0}),d=Yc();i.context=l,d.push(i);function f(D,B,g){var E=B(),S=E.line,T=E.column,A=E.data;A.charAt(0)==="<"&&A.indexOf(" ")!==-1&&(A=A.slice(0,A.indexOf(" "))+">");var M="unparsable content "+(A?A+" ":"")+`detected
	line: `+S+`
	column: `+T+`
	nested error: `+D.message;if(g)return l.addWarning({message:M,error:D}),!0;throw it(M)}function b(D,B){return f(D,B,!0)}function w(){var D=l.elementsById,B=l.references,g,E;for(g=0;E=B[g];g++){var S=E.element,T=D[E.id],A=Ge(S).propertiesByName[E.property];if(T||l.addWarning({message:"unresolved reference <"+E.id+">",element:E.element,property:E.property,value:E.id}),A.isMany){var M=S.get(A.name),R=M.indexOf(E);R===-1&&(R=M.length),T?M[R]=T:M.splice(R,1)}else S.set(A.name,T)}}function j(){d.pop().handleEnd()}var z=/^<\?xml /i,ie=/ encoding="([^"]+)"/i,N=/^utf-8$/i;function L(D){if(z.test(D)){var B=ie.exec(D),g=B&&B[1];!g||N.test(g)||l.addWarning({message:"unsupported document encoding <"+g+">, falling back to UTF-8"})}}function J(D,B){var g=d.peek();try{d.push(g.handleNode(D))}catch(E){f(E,B,a)&&d.push(new Wi)}}function G(D,B){try{d.peek().handleText(D)}catch(g){b(g,B)}}function Ce(D,B){D.trim()&&G(D,B)}var x=o.getPackages().reduce(function(D,B){return D[B.uri]=B.prefix,D},Object.entries(xi).reduce(function(D,[B,g]){return D[g]=B,D},o.config&&o.config.nsMap||{}));return c.ns(x).on("openTag",function(D,B,g,E){var S=D.attrs||{},T=Object.keys(S).reduce(function(M,R){var U=B(S[R]);return M[R]=U,M},{}),A={name:D.name,originalName:D.originalName,attributes:T,ns:D.ns};J(A,E)}).on("question",L).on("closeTag",j).on("cdata",G).on("text",function(D,B,g){Ce(B(D),g)}).on("error",f).on("warn",b),new Promise(function(D,B){var g;try{c.parse(e),w()}catch(M){g=M}var E=i.element;!g&&!E&&(g=it("failed to parse document as <"+i.type.$descriptor.name+">"));var S=l.warnings,T=l.references,A=l.elementsById;return g?(g.warnings=S,B(g)):D({rootElement:E,elementsById:A,references:T,warnings:S})})};Yi.prototype.handler=function(e){return new Gi(this.model,e)};function Yc(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Kc=`<?xml version="1.0" encoding="UTF-8"?>
`,qc=/<|>|'|"|&|\n\r|\n/g,jo=/<|>|&/g;function He(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}He.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e};He.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]};He.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)};He.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)};He.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)};He.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t};He.prototype.getNSKey=function(e){return e.prefix!==void 0?e.uri+"|"+e.prefix:e.uri};He.prototype.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);this.used[n]=this.byUri(t),this.parent&&this.parent.logUsed(e)};He.prototype.getUsed=function(e){var t=[].concat(this.wellknown,this.custom);return t.filter(n=>{var i=this.getNSKey(n);return this.used[i]})};function Xc(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Zc(e,t){return Fo(t)?Xc(e):e}function Lo(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Oo(e){return xt(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Jc(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function Qc(e,t){return t.isGeneric?ne({localName:t.ns.localName},e):ne({localName:Zc(t.ns.localName,t.$pkg)},e)}function ep(e,t){return ne({localName:t.ns.localName},e)}function tp(e){var t=e.$descriptor;return Ln(t.properties,function(n){var i=n.name;if(n.isVirtual||!Bn(e,i))return!1;var o=e[i];return o===n.default||o===null?!1:n.isMany?o.length:!0})}var np={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},ip={"<":"lt",">":"gt","&":"amp"};function $o(e,t,n){return e=xt(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function rp(e){return $o(e,qc,np)}function op(e){return $o(e,jo,ip)}function sp(e){return Ln(e,function(t){return t.isAttr})}function ap(e){return Ln(e,function(t){return!t.isAttr})}function Ki(e){this.tagName=e}Ki.prototype.build=function(e){return this.element=e,this};Ki.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function wt(){}wt.prototype.serializeValue=wt.prototype.serializeTo=function(e){e.append(this.escape?op(this.value):this.value)};wt.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(jo)!==-1&&(this.escape=!0),this};function qi(e){this.tagName=e}Lo(qi,wt);qi.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function ae(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}ae.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,o,a=t.isGeneric;return a?i=this.parseGenericNsAttributes(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a?this.parseGenericContainments(e):(o=tp(e),this.parseAttributes(sp(o)),this.parseContainments(ap(o))),this.parseGenericAttributes(e,i),this};ae.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Qc(t,e)};ae.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return ep(t,e)};ae.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};ae.prototype.nsAttributeName=function(e){var t;if(xt(e)?t=ye(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:ne({localName:t.localName},n)};ae.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,n])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,n)).map(([t,n])=>({name:t,value:n}))};ae.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push(new wt().build({type:"String"},t));var n=e.$children;n&&q(n,i=>{this.body.push(new ae(this).build(i))})};ae.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,o=ye(t),a;if(o.prefix==="xmlns"&&(a={prefix:o.localName,uri:n}),!o.prefix&&o.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var l=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(l)}};ae.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=[];return q(n,function(o,a){var l=t.parseNsAttribute(e,a,o);l&&i.push(l)}),i};ae.prototype.parseGenericAttributes=function(e,t){var n=this;q(t,function(i){try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(o){typeof console<"u"&&console.warn(`missing namespace information for <${i.name}=${i.value}> on`,e,o)}})};ae.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;q(e,function(o){var a=i.get(o.name),l=o.isReference,c=o.isMany;if(c||(a=[a]),o.isBody)n.push(new wt().build(o,a[0]));else if(Po(o.type))q(a,function(f){n.push(new qi(t.addTagName(t.nsPropertyTagName(o))).build(o,f))});else if(l)q(a,function(f){n.push(new Ki(t.addTagName(t.nsPropertyTagName(o))).build(f))});else{var d=Bo(o);q(a,function(f){var b;d?d===No?b=new ae(t,o):b=new ni(t,o,d):b=new ae(t),n.push(b.build(f))})}})};ae.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new He(i):t=i),t};ae.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),o=e.uri,a=e.prefix,l=i.byUri(o);return(!l||n)&&i.add(e,t),i.mapPrefix(a,o),e};ae.prototype.logNamespaceUsed=function(e,t){var n=this.getNamespaces(t),i=e.prefix,o=e.uri,a,l,c;if(!i&&!o)return{localName:e.localName};if(c=n.defaultUriByPrefix(i),o=o||c||n.uriByPrefix(i),!o)throw new Error("no namespace uri given for prefix <"+i+">");if(e=n.byUri(o),!e&&!i&&(e=this.logNamespace({uri:o},c===o,!0)),!e){for(a=i,l=1;n.uriByPrefix(a);)a=i+"_"+l++;e=this.logNamespace({prefix:a,uri:o},c===o)}return i&&n.mapPrefix(i,o),e};ae.prototype.parseAttributes=function(e){var t=this,n=this.element;q(e,function(i){var o=n.get(i.name);if(i.isReference)if(!i.isMany)o=o.id;else{var a=[];q(o,function(l){a.push(l.id)}),o=a.join(" ")}t.addAttribute(t.nsAttributeName(i),o)})};ae.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Oo(e)};ae.prototype.addAttribute=function(e,t){var n=this.attrs;xt(t)&&(t=rp(t));var i=vs(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),o={name:e,value:t};i!==-1?n.splice(i,1,o):n.push(o)};ae.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Jc(n).concat(t)),q(t,function(i){e.append(" ").append(Oo(i.name)).append('="').append(i.value).append('"')})};ae.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==wt;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),q(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function ni(e,t,n){ae.call(this,e,t),this.serialization=n}Lo(ni,ae);ni.prototype.parseNsAttributes=function(e){var t=ae.prototype.parseNsAttributes.call(this,e).filter(l=>l.name!==this.serialization),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var o=e.$model.getPackage(i.uri),a=o.xml&&o.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};ni.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function lp(){this.value="",this.write=function(e){this.value+=e}}function cp(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function pp(e){e=ne({format:!1,preamble:!0},e||{});function t(n,i){var o=i||new lp,a=new cp(o,e.format);e.preamble&&a.append(Kc);var l=new ae,c=n.$model;if(l.getNamespaces().mapDefaultPrefixes(up(c)),l.build(n).serializeTo(a),!i)return o.value}return{toXML:t}}function up(e){const t=e.config&&e.config.nsMap||{},n={};for(const i in xi)n[i]=xi[i];for(const i in t){const o=t[i];n[o]=i}for(const i of e.getPackages())n[i.prefix]=i.uri;return n}function ii(e,t){Ie.call(this,e,t)}ii.prototype=Object.create(Ie.prototype);ii.prototype.fromXML=function(e,t,n){xt(t)||(n=t,t="bpmn:Definitions");var i=new Yi(ne({model:this,lax:!0},n)),o=i.handler(t);return i.fromXML(e,o)};ii.prototype.toXML=function(e,t){var n=new pp(t);return new Promise(function(i,o){try{var a=n.toXML(e);return i({xml:a})}catch(l){return o(l)}})};var dp="BPMN20",hp="http://www.omg.org/spec/BPMN/20100524/MODEL",fp="bpmn",mp=[],yp=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],gp=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],vp={tagAlias:"lowerCase",typePrefix:"t"},bp={name:dp,uri:hp,prefix:fp,associations:mp,types:yp,enumerations:gp,xml:vp},Ep="BPMNDI",wp="http://www.omg.org/spec/BPMN/20100524/DI",_p="bpmndi",xp=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],Sp=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],kp=[],Cp={name:Ep,uri:wp,prefix:_p,types:xp,enumerations:Sp,associations:kp},Ap="DC",Tp="http://www.omg.org/spec/DD/20100524/DC",Rp="dc",Pp=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],Mp=[],Dp={name:Ap,uri:Tp,prefix:Rp,types:Pp,associations:Mp},Fp="DI",Np="http://www.omg.org/spec/DD/20100524/DI",Bp="di",Ip=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],jp=[],Lp={tagAlias:"lowerCase"},Op={name:Fp,uri:Np,prefix:Bp,types:Ip,associations:jp,xml:Lp},$p="bpmn.io colors for BPMN",zp="http://bpmn.io/schema/bpmn/biocolor/1.0",Hp="bioc",Vp=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],Wp=[],Up=[],Gp={name:$p,uri:zp,prefix:Hp,types:Vp,enumerations:Wp,associations:Up},Yp="BPMN in Color",Kp="http://www.omg.org/spec/BPMN/non-normative/color/1.0",qp="color",Xp=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],Zp=[],Jp=[],Qp={name:Yp,uri:Kp,prefix:qp,types:Xp,enumerations:Zp,associations:Jp};const eu={bpmn:bp,bpmndi:Cp,dc:Dp,di:Op,bioc:Gp,color:Qp};function tu(e,t){const n=ne({},eu,e);return new ii(n,t)}var nu="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function iu(e){Bn(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(nu)}})}function xe(e,t){return e.$instanceOf(t)}function ru(e){return tt(e.rootElements,function(t){return xe(t,"bpmn:Process")||xe(t,"bpmn:Collaboration")})}function ou(e){var t={},n=[],i={};function o(_,k){return function(F){_(F,k)}}function a(_){t[_.id]=_}function l(_){return t[_.id]}function c(_,k){var F=_.gfx;if(F)throw new Error(`already rendered ${me(_)}`);return e.element(_,i[_.id],k)}function d(_,k){return e.root(_,i[_.id],k)}function f(_,k){try{var F=i[_.id]&&c(_,k);return a(_),F}catch(ee){b(ee.message,{element:_,error:ee}),console.error(`failed to import ${me(_)}`,ee)}}function b(_,k){e.error(_,k)}var w=this.registerDi=function(k){var F=k.bpmnElement;F?i[F.id]?b(`multiple DI elements defined for ${me(F)}`,{element:F}):(i[F.id]=k,iu(F)):b(`no bpmnElement referenced in ${me(k)}`,{element:k})};function j(_){z(_.plane)}function z(_){w(_),q(_.planeElement,ie)}function ie(_){w(_)}this.handleDefinitions=function(k,F){var ee=k.diagrams;if(F&&ee.indexOf(F)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!F&&ee&&ee.length&&(F=ee[0]),!F)throw new Error("no diagram to display");i={},j(F);var _e=F.plane;if(!_e)throw new Error(`no plane for ${me(F)}`);var u=_e.bpmnElement;if(!u)if(u=ru(k),u)b(`correcting missing bpmnElement on ${me(_e)} to ${me(u)}`),_e.bpmnElement=u,w(_e);else throw new Error("no process or collaboration to display");var r=d(u,_e);if(xe(u,"bpmn:Process")||xe(u,"bpmn:SubProcess"))L(u,r);else if(xe(u,"bpmn:Collaboration"))le(u,r),J(k.rootElements,r);else throw new Error(`unsupported bpmnElement for ${me(_e)}: ${me(u)}`);N(n)};var N=this.handleDeferred=function(){for(var k;n.length;)k=n.shift(),k()};function L(_,k){O(_,k),S(_.ioSpecification,k),E(_.artifacts,k),a(_)}function J(_,k){var F=Ln(_,function(ee){return!l(ee)&&xe(ee,"bpmn:Process")&&ee.laneSets});F.forEach(o(L,k))}function G(_,k){f(_,k)}function Ce(_,k){q(_,o(G,k))}function x(_,k){f(_,k)}function D(_,k){f(_,k)}function B(_,k){f(_,k)}function g(_,k){f(_,k)}function E(_,k){q(_,function(F){xe(F,"bpmn:Association")?n.push(function(){g(F,k)}):g(F,k)})}function S(_,k){_&&(q(_.dataInputs,o(D,k)),q(_.dataOutputs,o(B,k)))}var T=this.handleSubProcess=function(k,F){O(k,F),E(k.artifacts,F)};function A(_,k){var F=f(_,k);xe(_,"bpmn:SubProcess")&&T(_,F||k),xe(_,"bpmn:Activity")&&S(_.ioSpecification,k),n.push(function(){q(_.dataInputAssociations,o(x,k)),q(_.dataOutputAssociations,o(x,k))})}function M(_,k){f(_,k)}function R(_,k){f(_,k)}function U(_,k){n.push(function(){var F=f(_,k);_.childLaneSet&&he(_.childLaneSet,F||k),we(_)})}function he(_,k){q(_.lanes,o(U,k))}function H(_,k){q(_,o(he,k))}function O(_,k){re(_.flowElements,k),_.laneSets&&H(_.laneSets,k)}function re(_,k){q(_,function(F){xe(F,"bpmn:SequenceFlow")?n.push(function(){M(F,k)}):xe(F,"bpmn:BoundaryEvent")?n.unshift(function(){A(F,k)}):xe(F,"bpmn:FlowNode")?A(F,k):xe(F,"bpmn:DataObject")||(xe(F,"bpmn:DataStoreReference")||xe(F,"bpmn:DataObjectReference")?R(F,k):b(`unrecognized flowElement ${me(F)} in context ${me(k&&k.businessObject)}`,{element:F,context:k}))})}function fe(_,k){var F=f(_,k),ee=_.processRef;ee&&L(ee,F||k)}function le(_,k){q(_.participants,o(fe,k)),E(_.artifacts,k),n.push(function(){Ce(_.messageFlows,k)})}function we(_){q(_.flowNodeRef,function(k){var F=k.get("lanes");F&&F.push(_)})}}function su(e,t,n){var i,o,a,l,c=[];function d(f,b){var w={root:function(N,L){return i.add(N,L)},element:function(N,L,J){return i.add(N,L,J)},error:function(N,L){c.push({message:N,context:L})}},j=new ou(w);b=b||f.diagrams&&f.diagrams[0];var z=au(f,b);if(!z)throw new Error("no diagram to display");q(z,function(N){j.handleDefinitions(f,N)});var ie=b.plane.bpmnElement.id;a.setRootElement(a.findRoot(ie+"_plane")||a.findRoot(ie))}return new Promise(function(f,b){try{return i=e.get("bpmnImporter"),o=e.get("eventBus"),a=e.get("canvas"),o.fire("import.render.start",{definitions:t}),d(t,n),o.fire("import.render.complete",{error:l,warnings:c}),f({warnings:c})}catch(w){return w.warnings=c,b(w)}})}function au(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!v(n,"bpmn:Process")&&!v(n,"bpmn:Collaboration")&&(i=lu(n));var o;v(i,"bpmn:Collaboration")?o=i:o=tt(e.rootElements,function(f){if(v(f,"bpmn:Collaboration"))return tt(f.participants,function(b){return b.processRef===i})});var a=[i];o&&(a=bs(o.participants,function(f){return f.processRef}),a.push(o));var l=zo(a),c=[t],d=[n];return q(e.diagrams,function(f){if(f.plane){var b=f.plane.bpmnElement;l.indexOf(b)!==-1&&d.indexOf(b)===-1&&(c.push(f),d.push(b))}}),c}}function zo(e){var t=[];return q(e,function(n){n&&(t.push(n),t=t.concat(zo(n.flowElements)))}),t}function lu(e){for(var t=e;t;){if(v(t,"bpmn:Process"))return t;t=t.$parent}}var cu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Ho=cu,Vo={verticalAlign:"middle"},Wo={color:"#404040"},pu={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},uu={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},du={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},hu='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+Ho+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Oe;function fu(){Oe=ce(hu),Qe(Oe,pu),Qe(Se("svg",Oe),Vo),Qe(Se(".backdrop",Oe),uu),Qe(Se(".notice",Oe),du),Qe(Se(".link",Oe),Wo,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function mu(){Oe||(fu(),ki.bind(Oe,".backdrop","click",function(e){document.body.removeChild(Oe)})),document.body.appendChild(Oe)}function pe(e){e=ne({},gu,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e),bu(this._container)}rt(pe,On);pe.prototype.importXML=async function(t,n){const i=this;function o(l){return i.get("eventBus").createEvent(l)}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let l;try{l=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(j){throw this._emit("import.parse.complete",{error:j}),j}let c=l.rootElement;const d=l.references,f=l.warnings,b=l.elementsById;a=a.concat(f),c=this._emit("import.parse.complete",o({error:null,definitions:c,elementsById:b,references:d,warnings:a}))||c;const w=await this.importDefinitions(c,n);return a=a.concat(w.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(l){let c=l;throw a=a.concat(c.warnings||[]),Pn(c,a),c=yu(c),this._emit("import.done",{error:c,warnings:c.warnings}),c}};pe.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};pe.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const a=new Error("no XML imported");throw Pn(a,[]),a}if(typeof t=="string"&&(i=vu(n,t),!i)){const a=new Error("BPMNDiagram <"+t+"> not found");throw Pn(a,[]),a}try{this.clear()}catch(a){throw Pn(a,[]),a}const{warnings:o}=await su(this,n,i);return{warnings:o}};pe.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,o;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,o=(await this._moddle.toXML(n,t)).xml,o=this._emit("saveXML.serialized",{xml:o})||o}catch(l){i=l}const a=i?{error:i}:{xml:o};if(this._emit("saveXML.done",a),i)throw i;return a};pe.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),o=i.getActiveLayer(),a=Se(":scope > defs",i._svg),l=Qi(o),c=a?"<defs>"+Qi(a)+"</defs>":"",d=o.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+d.width+'" height="'+d.height+'" viewBox="'+d.x+" "+d.y+" "+d.width+" "+d.height+'" version="1.1">'+c+l+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};pe.prototype._setDefinitions=function(e){this._definitions=e};pe.prototype.getModules=function(){return this._modules};pe.prototype.clear=function(){this.getDefinitions()&&On.prototype.clear.call(this)};pe.prototype.destroy=function(){On.prototype.destroy.call(this),Es(this._container)};pe.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};pe.prototype.off=function(e,t){this.get("eventBus").off(e,t)};pe.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Se(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};pe.prototype.getDefinitions=function(){return this._definitions};pe.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};pe.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),o=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],l=[].concat(a,i,o),c=ne(ws(n,["additionalModules"]),{canvas:ne({},n.canvas,{container:e}),modules:l});On.call(this,c),n&&n.container&&this.attachTo(n.container)};pe.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};pe.prototype._createContainer=function(e){const t=ce('<div class="bjs-container"></div>');return Qe(t,{width:gr(e.width),height:gr(e.height),position:e.position}),t};pe.prototype._createModdle=function(e){const t=ne({},this._moddleExtensions,e.moddleExtensions);return new tu(t)};pe.prototype._modules=[];function Pn(e,t){return e.warnings=t,e}function yu(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const gu={width:"100%",height:"100%",position:"relative"};function gr(e){return e+(_s(e)?"px":"")}function vu(e,t){return t&&tt(e.diagrams,function(n){return n.id===t})||null}function bu(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Ho+"</a>",i=ce(n);Qe(Se("svg",i),Vo),Qe(i,Wo,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),de.bind(i,"click",function(o){mu(),o.preventDefault()})}function Gt(e){pe.call(this,e)}rt(Gt,pe);Gt.prototype._modules=[_c,Dc,Ir,xs,Br];Gt.prototype._moddleExtensions={};var Eu=["c","C"],wu=["v","V"],_u=["y","Y"],Uo=["z","Z"];function xu(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function et(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function $e(e,t){return e=Ss(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function Xi(e){return e.shiftKey}function Su(e){return et(e)&&$e(Eu,e)}function ku(e){return et(e)&&$e(wu,e)}function Cu(e){return et(e)&&!Xi(e)&&$e(Uo,e)}function Au(e){return et(e)&&($e(_u,e)||$e(Uo,e)&&Xi(e))}var ri="keyboard.keydown",Tu="keyboard.keyup",Ru=1e3,Go="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function Ee(e,t){var n=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(Go));var i=e&&e.bind!==!1;t.on("canvas.init",function(o){n._target=o.svg,i&&n.bind(),n._fire("init")})}Ee.$inject=["config.keyboard","eventBus"];Ee.prototype._keydownHandler=function(e){this._keyHandler(e,ri)};Ee.prototype._keyupHandler=function(e){this._keyHandler(e,Tu)};Ee.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||ri,i),n&&e.preventDefault()}};Ee.prototype._isEventIgnored=function(e){return!1};Ee.prototype.bind=function(e){e&&console.error("unsupported argument <node>",new Error(Go)),this.unbind(),e=this._node=this._target,de.bind(e,"keydown",this._keydownHandler),de.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Ee.prototype.getBinding=function(){return this._node};Ee.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),de.unbind(e,"keydown",this._keydownHandler),de.unbind(e,"keyup",this._keyupHandler)),this._node=null};Ee.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Ee.prototype.addListener=function(e,t,n){ks(e)&&(n=t,t=e,e=Ru),this._eventBus.on(n||ri,e,t)};Ee.prototype.removeListener=function(e,t){this._eventBus.off(t||ri,e)};Ee.prototype.hasModifier=xu;Ee.prototype.isCmd=et;Ee.prototype.isShift=Xi;Ee.prototype.isKey=$e;var Pu=500;function Zi(e,t){var n=this;e.on("editorActions.init",Pu,function(i){var o=i.editorActions;n.registerBindings(t,o)})}Zi.$inject=["eventBus","keyboard"];Zi.prototype.registerBindings=function(e,t){function n(i,o){t.isRegistered(i)&&e.addListener(o)}n("undo",function(i){var o=i.keyEvent;if(Cu(o))return t.trigger("undo"),!0}),n("redo",function(i){var o=i.keyEvent;if(Au(o))return t.trigger("redo"),!0}),n("copy",function(i){var o=i.keyEvent;if(Su(o))return t.trigger("copy"),!0}),n("paste",function(i){var o=i.keyEvent;if(ku(o))return t.trigger("paste"),!0}),n("stepZoom",function(i){var o=i.keyEvent;if($e(["+","Add","="],o)&&et(o))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var o=i.keyEvent;if($e(["-","Subtract"],o)&&et(o))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var o=i.keyEvent;if($e("0",o)&&et(o))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var o=i.keyEvent;if($e(["Backspace","Delete","Del"],o))return t.trigger("removeSelection"),!0})};const Mu={__init__:["keyboard","keyboardBindings"],keyboard:["type",Ee],keyboardBindings:["type",Zi]};var Du={moveSpeed:50,moveSpeedAccelerated:200};function Yo(e,t,n){var i=this;this._config=ne({},Du,e||{}),t.addListener(o);function o(a){var l=a.keyEvent,c=i._config;if(t.isCmd(l)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],l)){var d=t.isShift(l)?c.moveSpeedAccelerated:c.moveSpeed,f;switch(l.key){case"ArrowLeft":case"Left":f="left";break;case"ArrowUp":case"Up":f="up";break;case"ArrowRight":case"Right":f="right";break;case"ArrowDown":case"Down":f="down";break}return i.moveCanvas({speed:d,direction:f}),!0}}this.moveCanvas=function(a){var l=0,c=0,d=a.speed,f=d/Math.min(Math.sqrt(n.viewbox().scale),1);switch(a.direction){case"left":l=f;break;case"up":c=f;break;case"right":l=-f;break;case"down":c=-f;break}n.scroll({dx:l,dy:c})}}Yo.$inject=["config.keyboardMove","keyboard","canvas"];const Fu={__depends__:[Mu],__init__:["keyboardMove"],keyboardMove:["type",Yo]};var Nu=/^djs-cursor-.*$/;function Ko(e){var t=Z(document.body);t.removeMatching(Nu),e&&t.add("djs-cursor-"+e)}function Bu(){Ko(null)}var Iu=5e3;function ju(e,t){t=t||"element.click";function n(){return!1}return e.once(t,Iu,n),function(){e.off(t,n)}}function vr(e,t){return{x:e.x-t.x,y:e.y-t.y}}var Lu=15;function qo(e,t){var n;function i(c){return l(c.originalEvent)}e.on("canvas.focus.changed",function(c){c.focused?e.on("element.mousedown",500,i):e.off("element.mousedown",i)});function o(c){var d=n.start,f=n.button,b=er(c),w=vr(b,d);if(!n.dragging&&Ou(w)>Lu&&(n.dragging=!0,f===0&&ju(e),Ko("grab")),n.dragging){var j=n.last||n.start;w=vr(b,j),t.scroll({dx:w.x,dy:w.y}),n.last=b}c.preventDefault()}function a(c){de.unbind(document,"mousemove",o),de.unbind(document,"mouseup",a),n=null,Bu()}function l(c){if(!Cs(c.target,".djs-draggable")){var d=c.button;if(!(d>=2||c.ctrlKey||c.shiftKey||c.altKey))return n={button:d,start:er(c)},de.bind(document,"mousemove",o),de.bind(document,"mouseup",a),!0}}this.isActive=function(){return!!n}}qo.$inject=["eventBus","canvas"];function Ou(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const $u={__init__:["moveCanvas"],moveCanvas:["type",qo]};function Si(e){return Math.log(e)/Math.log(10)}function Xo(e,t){var n=Si(e.min),i=Si(e.max),o=Math.abs(n)+Math.abs(i);return o/t}function zu(e,t){return Math.max(e.min,Math.min(e.max,t))}var Hu=Math.sign||function(e){return e>=0?1:-1},Ji={min:.2,max:4},Zo=10,Vu=.1,Wu=.75;function Ve(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=bt(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||Wu;var i=this;t.on("canvas.focus.changed",function(o){i._init(o.focused&&e.enabled!==!1)})}Ve.$inject=["config.zoomScroll","eventBus","canvas"];Ve.prototype.scroll=function(t){this._canvas.scroll(t)};Ve.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Ve.prototype.zoom=function(t,n){var i=Xo(Ji,Zo*2);this._totalDelta+=t,Math.abs(this._totalDelta)>Vu&&(this._zoom(t,n,i),this._totalDelta=0)};Ve.prototype._handleWheel=function(t){if(this._canvas.isFocused()){var n=this._container;t.preventDefault();var i=t.ctrlKey||Fc()&&t.metaKey,o=t.shiftKey,a=-1*this._scale,l;if(i?a*=t.deltaMode===0?.02:.32:a*=t.deltaMode===0?1:16,i){var c=n.getBoundingClientRect(),d={x:t.clientX-c.left,y:t.clientY-c.top};l=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*Hu(t.deltaY)*a,this.zoom(l,d)}else o?l={dx:a*t.deltaY,dy:0}:l={dx:a*t.deltaX,dy:a*t.deltaY},this.scroll(l)}};Ve.prototype.stepZoom=function(t,n){var i=Xo(Ji,Zo);this._zoom(t,n,i)};Ve.prototype._zoom=function(e,t,n){var i=this._canvas,o=e>0?1:-1,a=Si(i.zoom()),l=Math.round(a/n)*n;l+=n*o;var c=Math.pow(10,l);i.zoom(zu(Ji,c),t)};Ve.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,o=this._enabled;return typeof t>"u"&&(t=!o),o!==t&&de[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};Ve.prototype._init=function(e){this.toggle(e)};const Uu={__init__:["zoomScroll"],zoomScroll:["type",Ve]};function Qt(e){Gt.call(this,e)}rt(Qt,Gt);Qt.prototype._navigationModules=[Fu,$u,Uu];Qt.prototype._modules=[].concat(Gt.prototype._modules,Qt.prototype._navigationModules);const Jo="BizDevOps",Qo="bizdevops",es="https://github.com/biz-dev-ops/web-components/schema/1.0",ts={tagAlias:"lowerCase"},ns=[{name:"Links",superClass:["Element"],properties:[{name:"links",type:"Link",isMany:!0}]},{name:"Link",superClass:["Element"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isAttr:!0,type:"String"}]}],Gu={name:Jo,prefix:Qo,uri:es,xml:ts,types:ns},Yu=Object.freeze(Object.defineProperty({__proto__:null,default:Gu,name:Jo,prefix:Qo,types:ns,uri:es,xml:ts},Symbol.toStringTag,{value:"Module"}));var Ku=Object.defineProperty,qu=Object.getOwnPropertyDescriptor,Yt=(e,t,n,i)=>{for(var o=i>1?void 0:i?qu(t,n):t,a=e.length-1,l;a>=0;a--)(l=e[a])&&(o=(i?l(t,n,o):l(o))||o);return i&&o&&Ku(t,n,o),o};const Xu="bpmn-viewer";let _t=class extends is{constructor(){super(...arguments),this._initialized=!1,this.enableSimulator=!1,this.disableInteraction=!1}render(){return Mr`<div id="bpmn-container"></div>`}async firstUpdated(){this._initViewer()}async updated(e){var t;if(!this._initialized){this._initialized=!1;return}if(e.has("enableSimulator")&&this._initViewer(),e.has("src")){const n=await fetch(this.src);if(!n.ok){const i=(t=this.shadowRoot)==null?void 0:t.querySelector("#bpmn-container");i.innerHTML=`<div class="error">Failed to fetch ${this.src}</div>`,console.error(`Failed to fetch ${this.src}, status: ${n.status}, ${n.statusText}`,n);return}this.xml=await n.text()}e.has("xml")&&this._updateDiagram(this.xml),e.has("disableInteraction")&&this._viewer.get("zoomScroll").toggle(this.disableInteraction)}_initViewer(){var e;this._viewer&&(this._viewer.get("eventBus").off("root.set"),this._viewer.destroy()),this._viewer=new Qt({container:(e=this.shadowRoot)==null?void 0:e.querySelector("#bpmn-container"),moddleExtensions:{bizdevops:Yu},additionalModules:this.enableSimulator?[Hl]:[]}),this._viewer.get("eventBus").on("root.set",()=>{this._setHeight()}),this.xml&&this._updateDiagram(this.xml),this.disableInteraction&&this._viewer.get("zoomScroll").toggle(this.disableInteraction),this._initialized=!0}async _updateDiagram(e){if(e)try{const{warnings:t}=await this._viewer.importXML(e.replace(/\\"/g,'"'));t.length&&console.log("bpmn import with warnings",t),this._makeElementsClickable(),this.showProcess&&this._expandSubProcess()}catch(t){console.log("something went wrong while importing bpmn:",t)}}_setHeight(){var l;const e=a(this),t=o(this),n=this._viewer.get("canvas").viewbox(),i=(l=this.shadowRoot)==null?void 0:l.querySelector("#bpmn-container");i.style.aspectRatio=`${n.inner.width} / ${n.inner.height}`,i.style.minHeight=`${e.minHeight}px`,i.style.maxHeight=`${Math.min(n.inner.height+t,e.maxHeight)}px`,this.zoomReset();function o(c){var j;const d=(j=c.shadowRoot)==null?void 0:j.querySelector(".bjs-breadcrumbs"),{x:f,height:b}=d.getBoundingClientRect();return Math.max(10,f+b)*2}function a(c){const d=window.getComputedStyle(c),f=d.minHeight,b=d.maxHeight,w=j=>{if(j==="none"||j==="auto")return null;const z=parseFloat(j);return isNaN(z)?null:z};return{minHeight:w(f)??0,maxHeight:w(b)??Number.MAX_SAFE_INTEGER}}}_expandSubProcess(){var e;try{const t=this.showProcess.split("/").pop(),i=this._viewer.get("elementRegistry").get(`${t}_plane`);this._viewer.get("canvas").setRootElement(i)}catch(t){console.log(t instanceof Error?t.message:"Unknown error"),((e=this.shadowRoot)==null?void 0:e.querySelector("#bpmn-container")).classList.add("error")}}_getLinks(e){var i;const t=e.bpmnElement;return(((i=t==null?void 0:t.extensionElements)==null?void 0:i.values)||[]).filter(o=>o.$type.toLowerCase()==="bizdevops:links").reduce((o,a)=>[...o,...a.links.map(l=>({value:l.value,name:l.name}))],[])}_makeElementsClickable(){const e=this._viewer.get("elementRegistry");this._viewer.get("eventBus").on("element.click",n=>{const i=this._getLinks(n.element.di);i.length!==0&&this.dispatchEvent(new CustomEvent("onelementclick",{detail:{element:n.element,links:i},bubbles:!0,composed:!0}))}),e.forEach(n=>{const i=e.getGraphics(n);!i||this._getLinks(n.di).length===0||(i.style.cursor="pointer",i.style.textDecoration="underline")})}static get styles(){return[os,vn`
        :host {
          display: block;
          width: 100%;
          height: 100%;
        }
        #bpmn-container {
          width: 100%;
          height: 100%;
        }
        .bjs-breadcrumbs {
          top: 0px!important;
          left:0px!important;
        }
        .error {
          border: 3px solid red;
        }
        .bjs-powered-by {
            display: none;
        }
      `,vn`${oi(Ts)}`,vn`${oi(Rs)}`,vn`${oi(Ps)}`]}getZoomLevel(){return this._viewer.get("canvas").zoom()}zoomIn(){this._viewer.get("zoomScroll").stepZoom(1)}zoomOut(){this._viewer.get("zoomScroll").stepZoom(-1)}zoomReset(){const e=this._viewer.get("canvas").viewbox();this._viewer.get("canvas").viewbox({x:0,y:0,width:e.width,height:e.height}),this._viewer.get("canvas").zoom("fit-viewport","auto")}};Yt([en({attribute:"src"})],_t.prototype,"src",2);Yt([en({attribute:"data-xml"})],_t.prototype,"xml",2);Yt([en({attribute:"show-process"})],_t.prototype,"showProcess",2);Yt([en({attribute:"enable-simulator",reflect:!0,type:Boolean})],_t.prototype,"enableSimulator",2);Yt([en({attribute:"disable-interaction",reflect:!0,type:Boolean})],_t.prototype,"disableInteraction",2);_t=Yt([rs(Xu)],_t);const nd={title:"Viewers/BPMNViewer",component:"bpmn-viewer",parameters:{layout:"padded"},argTypes:{src:{control:"text",description:"URL to fetch BPMN XML from"},"data-xml":{control:"text",description:"BPMN XML data as string"},"show-process":{control:"text",description:"Process ID to show"},"enable-simulator":{control:"boolean",description:"Enable token simulation"},"disable-interaction":{control:"boolean",description:"Disable diagram interaction"}},render:e=>Mr`
    <bpmn-viewer
      src=${e.src}
      data-xml=${e["data-xml"]}
      show-process=${e["show-process"]}
      ?enable-simulator=${e["enable-simulator"]}
      ?disable-interaction=${e["disable-interaction"]}
    ></bpmn-viewer>
  `},xn={args:{src:"/path/to/your/process.bpmn"}},Sn={args:{"data-xml":'<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"><bpmn:process id="Process_1"><bpmn:startEvent id="StartEvent_1"/><bpmn:task id="Task_1"/><bpmn:endEvent id="EndEvent_1"/></bpmn:process></bpmn:definitions>'}},kn={args:{"data-xml":'<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"><bpmn:process id="Process_1"><bpmn:startEvent id="StartEvent_1"/><bpmn:task id="Task_1"/><bpmn:endEvent id="EndEvent_1"/></bpmn:process></bpmn:definitions>',"enable-simulator":!0}},Cn={args:{"data-xml":'<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"><bpmn:process id="Process_1"><bpmn:startEvent id="StartEvent_1"/><bpmn:task id="Task_1"/><bpmn:endEvent id="EndEvent_1"/></bpmn:process></bpmn:definitions>',"disable-interaction":!0}};var br,Er,wr;xn.parameters={...xn.parameters,docs:{...(br=xn.parameters)==null?void 0:br.docs,source:{originalSource:`{
  args: {
    src: '/path/to/your/process.bpmn'
  }
}`,...(wr=(Er=xn.parameters)==null?void 0:Er.docs)==null?void 0:wr.source}}};var _r,xr,Sr;Sn.parameters={...Sn.parameters,docs:{...(_r=Sn.parameters)==null?void 0:_r.docs,source:{originalSource:`{
  args: {
    'data-xml': '<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"><bpmn:process id="Process_1"><bpmn:startEvent id="StartEvent_1"/><bpmn:task id="Task_1"/><bpmn:endEvent id="EndEvent_1"/></bpmn:process></bpmn:definitions>'
  }
}`,...(Sr=(xr=Sn.parameters)==null?void 0:xr.docs)==null?void 0:Sr.source}}};var kr,Cr,Ar;kn.parameters={...kn.parameters,docs:{...(kr=kn.parameters)==null?void 0:kr.docs,source:{originalSource:`{
  args: {
    'data-xml': '<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"><bpmn:process id="Process_1"><bpmn:startEvent id="StartEvent_1"/><bpmn:task id="Task_1"/><bpmn:endEvent id="EndEvent_1"/></bpmn:process></bpmn:definitions>',
    'enable-simulator': true
  }
}`,...(Ar=(Cr=kn.parameters)==null?void 0:Cr.docs)==null?void 0:Ar.source}}};var Tr,Rr,Pr;Cn.parameters={...Cn.parameters,docs:{...(Tr=Cn.parameters)==null?void 0:Tr.docs,source:{originalSource:`{
  args: {
    'data-xml': '<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"><bpmn:process id="Process_1"><bpmn:startEvent id="StartEvent_1"/><bpmn:task id="Task_1"/><bpmn:endEvent id="EndEvent_1"/></bpmn:process></bpmn:definitions>',
    'disable-interaction': true
  }
}`,...(Pr=(Rr=Cn.parameters)==null?void 0:Rr.docs)==null?void 0:Pr.source}}};const id=["FromSource","FromXML","WithSimulator","DisabledInteraction"];export{Cn as DisabledInteraction,xn as FromSource,Sn as FromXML,kn as WithSimulator,id as __namedExportsOrder,nd as default};
